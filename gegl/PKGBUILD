pkgname=gegl
pkgver=0.4.18
pkgrel=1
pkgdesc="Graph based image processing framework"
arch=('x86_64')
url="https://www.gegl.org/"
license=('GPL3' 'LGPL3')
depends=('babl' 'libspiro' 'json-glib' 'libgexiv2' 'libraw' 'openexr' 'librsvg' 'libtiff' 'luajit' 'jasper' 'lensfun' 'suitesparse')
makedepends=('intltool' 'ruby' 'mesa' 'glu' 'ffmpeg' 'exiv2' 'vala' 'gobject-introspection' 'meson' 'python3-gobject')
optdepends=('ffmpeg: for using the ffmpeg plugin')
source=("http://ftp.gimp.org/pub/$pkgname/${pkgver%.*}/$pkgname-$pkgver.tar.xz")
sha256sums=('c946dfb45beb7fe0fb95b89a25395b449eda2b205ba3e8a1ffb1ef992d9eca64')

build() {
  cd ${pkgname}-${pkgver}
  mkdir -p build
  cd build
  chakra-meson .. \
    -Dworkshop=true \
    -Dmrg=disabled
  ninja
}

package() {
  cd ${pkgname}-${pkgver}
  DESTDIR="${pkgdir}" ninja install
}
