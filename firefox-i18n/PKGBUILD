pkgname=firefox-i18n
pkgver=67.0.2
pkgrel=1
pkgdesc="Language pack for Firefox"
arch=('x86_64')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
makedepends=('zip' 'unzip')

_languages=(
  'ach    "Acholi"'
  'af     "Afrikaans"'
  'an     "Aragonese"'
  'ar     "Arabic"'
  'as     "Assamese"'
  'ast    "Asturian"'
  'az     "Azerbaijani"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'bn-IN  "Bengali (India)"'
  'br     "Breton"'
  'bs     "Bosnian"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-CA  "English (Canadian)"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'en-ZA  "English (South African)"'
  'eo     "Esperanto"'
  'es-AR  "Spanish (Argentina)"'
  'es-CL  "Spanish (Chile)"'
  'es-ES  "Spanish (Spain)"'
  'es-MX  "Spanish (Mexico)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fa     "Persian"'
  'ff     "Fulah"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'gn     "Guarani"'
  'gu-IN  "Gujarati (India)"'
  'he     "Hebrew"'
  'hi-IN  "Hindi (India)"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ka     "Georgian"'
  'kab    "Kabyle"'
  'kk     "Kazakh"'
  'km     "Khmer"'
  'kn     "Kannada"'
  'ko     "Korean"'
  'lij    "Ligurian"'
  'lt     "Lithuanian"'
  'lv     "Latvian"'
  'mai    "Maithili"'
  'mk     "Macedonian"'
  'ml     "Malayalam"'
  'mr     "Marathi"'
  'ms     "Malay"'
  'my     "Burmese"'
  'nb-NO  "Norwegian (BokmÃ¥l)"'
  'ne-NP  "Nepali"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'or     "Oriya"'
  'pa-IN  "Punjabi (India)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'son    "Songhai"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta     "Tamil"'
  'te     "Telugu"'
  'th     "Thai"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'uz     "Uzbek"'
  'vi     "Vietnamese"'
  'xh     "Xhosa"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

source=()
_url=https://download-installer.cdn.mozilla.net/pub/firefox/releases/${pkgver}/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=firefox-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("firefox-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_firefox-i18n() {
  pkgdesc="Transition package to split build"
  depends=("firefox>=${pkgver}" "firefox-langpack>=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Firefox"
  provides=("firefox-langpack=${pkgver}")
  install -Dm644 firefox-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/firefox/browser/extensions/langpack-$1@firefox.mozilla.org.xpi"
}

sha256sums=('dfe34925a842b076836ebad3da32f5aa2297a60709cba63b3a7f32e659ab3cbb'
            'f49d55783e085d629cfe68de97577e5cd6ec530424a44bbb93a77a7b4dec94a2'
            'f5c1bd1f9ea7931e2791666e015eda67351fe365e7aabc50e77315971d318b47'
            'd0702f8ef40382740478a5517b1cbd4e21fef431c2aab2ac020fd7ebf875f356'
            '14f7f4c90f16d991bd2832d05831f1fd5e512a698b302e9830afea8013d5915f'
            '93f5cbac420cf1435cf1c6e11a488316c9f2b44c0eeef327793557fb4d6f6621'
            '4a114abfbcdd77ca8f311a0be47eb5d5c122ad99f41ae0b1ca1c309fc6747b2c'
            '6c9c11f16ab1f16de064a336529f7ac90f6f52325f8778b3a2e8cb96cc5053cf'
            '86fdf2931976a44861cae7d0dc8f551f1a68fc971670420eca1b08d22851d88d'
            'dff3e5ea298ab1accb39f0cd812057f8f22691bec3fb399ff231503005813915'
            '3f464d8f4f137277f33c9c78cef2715e561d66891d325f3ab490c221bd10a23e'
            '15cd4067b961704326d973f9cca5492a3ff0c803a25731fd6ac1ad7817e155ab'
            'a6a87285e7441b97e3647f184d9c6751fc73034af0c6b07f8a80b73057c0f38b'
            '27d8069d10a62d696eb364964348f64ae43f3255c7da247d035f757eb5c61e60'
            '9fb48cfe8405b335724f99c0c79b4f6c8a2bee69e4db95ae2d28ebe8c2799b33'
            'e575afc377cbdc7427a49b8ac0bb9a8479e97bf0d177f90f5b67b4ccb6e4ec71'
            '84f9a0d0921e6be10e940794b3c55e724c91e59923da6a209b2d8fe22d47af23'
            'b7f113156baa952a6f0a8cea815220306e46408b0ee81ef772fd5862a2c607ed'
            'd946f2556b32a9fcde01d81e35963af2f67017099c88315376336e0da6bebf24'
            '9eb2742aa183d6826c458ddf5972a823fdd1210f31fbd8d12b556e356c63b1dd'
            'd066f96f12eb3714e59ca5a8c38d19648addcff94219e31f535a7c38ee643270'
            '4cbe237854599c6e7ef97d7136a04827811005dc00f721b93780c92a4943d088'
            '91bd90ae9558eab7d78dd89a53d9a599acccfd6a1347281ac4fab2fc11fd0216'
            '6f967d24907355c31cf0969a89532873be5859ddeae6066b67bca58439aae01e'
            'fb834e7e3d533f2400fa0ad1f817a4f5d21d32eb9c4f5ef24a4de30ab9dc716e'
            '7d9ab245800a1617bb4d8102f349c4af9904f2b037e9a0fab30220e5c138285e'
            '8f61f51afbe460d0bfb0439d545833265e4b04d6a18ebb30217c51729d9975f8'
            'ea35bc71c057ae5fb49929366841bff009f6911bf641b70073a2640d1537ed75'
            '5a861fac131d1c8db805863c9bc8f37849a80765a60c4dd2ab03ad17f8c884fc'
            '8bb97374fd30a60e6a99fd69bc0fe5aedd96b230eea503033c713325d83800dd'
            '7e3f994fca1f7fe05f8d0e5c95242d0de943965b161e1fe0c713ea94faeea150'
            'b9db72f33014fb3f5926162fd59992b51b6d033c1c642e499f273dcf0c366b32'
            '805dc12c18edcda70db95d124f2cbc88bb0a7780b2dac7723460860905bbcbc3'
            'd76fb514c50a37d11aad266a5c1633f30bbd32330d86ba34cc4858fa48586be9'
            'e792773b2a4582c9bc0935f4a16c301ff3bcd9507aa0bea1877f80d603731409'
            'd4c3481957ceae144544423ae4fa216dc025185578ee9750f9ad865aba3184c4'
            '6ef902f01b84747ae0a9cb58b5b86014bddb1db2f96c6aab00e870d6e49b4a6a'
            'ead9d10165c9f8ed62bf35f5817940d3985e10a38259ca73d4912d21287c6576'
            'dd462970b6b3fa0e2d9ba4faa8a62c9179f840d1d8eccb74f41e0876c5df3d5f'
            '3d44e8ac62e3af844874334aa0131275cfe6061db03e09b3b1ecbb139246991a'
            '9f3a4c6eb39021a1beb5a585bcf95ec10cd80cd2991f9634bd4e004a7305db49'
            '9da34d5378065c250a93476dc0dbbce3a35110aaaac62f2739f9fc78a774c284'
            'fdef26b8b239e4520c1294f4d93f19efd2db60453168bdfecd5b94dd9745e2ad'
            'd5319a85f9466b1ee485c76a8fa7360dbb1b2f57359732e185356b9af1b63543'
            'ec1152f54c6c6ccea390e5bb121ec2fd1412c352b5cd625efebaefce1df5d60f'
            'bb5fb81b4c779980c349013d80dc2a54bfded5810ecbd5ecf255275a94ae9b1e'
            '2516b4801a527aa2e272b846920479a26ca607c8f2e686df3eaa86df10166fe0'
            '388c79976d06795a71164828bef3cd7e8821f727b1d1e546c157e1756fc5bd19'
            'ed821c2019a7fc81c18c5d4e3358d183044dbd77f215b9cbdc562959d6e324c5'
            '0d2f4810649a4d6f8c83c5053e6c27ad9e4f6f573e21ac13be8ba8f8b599af71'
            '5771be55bd31cf95446f74f80d8f0f87767a679762ff4067b0633c4bef784830'
            '3c9b7cf8153a7e9698711d95dcf9b0c4e9cd1b0a969e3dde6b56e06abff18412'
            '2741b30f951e29805eb5e542754bf745f919ed292217d87d5d9563f0af305597'
            '6f7301de5117956fe4329037f7970bd49fad2c2fd012a6d1962d84d25342b6ce'
            '7b70b32fdf722d602eceaff32165be5282d556bb2c0f141ca1f7a838e30d757f'
            'a6a916702e84a329ba8d5b044e89429aea34339ca15ef5b6fecdb7a0d6fb8977'
            '9637600e142f3f704126cd26313e7afd09d75afc1242be346f7b9d4a33d41c81'
            'd0bbb6fe972d280bff0917ba857bf22b29418a5612099649baeb108bf979e8ca'
            '61657008fd212fa7364d97f873a96ae7945043963c434527a7b81658086e1e74'
            '5bac67b06532c4085a146ee2bb67bee27a8625dac2b764363911f470b633ed65'
            'fb98f57636ed4be8907acf44fecb24cfd2a5fb22a3d3d2d1b5a0abd3f155e21a'
            'f18cfcf37aa76ef206afc5e0036a3beb0d15eec527b3264c7bec841f148ba97f'
            '2c33f534889712781130f79ff80dcfab8c1938662572b34bb62a3270a1bb9c87'
            '93d1cfe3b3f5bcf1ef909818865aee34c995e66f3fc7159ba7ea52b08daddeb0'
            'fcd9bbd81c3bb6ee4f87f1c27f692401e5cf6e6113bfe38f2921d3b54ed3eec3'
            '2398fb4e882b620aa203945084345e4b66885120e5a622ca1e5865154bf63da7'
            '55f0103df9b492f786ef5a86d28a882899f5764089edff2b81370c085ace8d41'
            'c744a4ece75654616b0491bb0035c8f7fd5adfae98196d8def659f40ca2b9611'
            '82f0faf550cb44502bbd6570cff433434e2d0ed286caf2595d5195370d591e7f'
            '95aabe8790d87b21792cfd528bcff4e8200b8325de980360fefd76ae80e279f6'
            'c2c13a2a77841baa7a0d96ca1f0f7e6b2d739970b16bcef354e1345951bb885f'
            '870a492bc0780bf945a18b984ea8c5d1063ef520b7ce2aa7bc087f841b06af0e'
            'e2f238867921186a85d9ff74ec1849ebf2d230f6d6e81bbdd3fa37b3e82b1c01'
            '8335540cce6c1ce2a755948f0f9a9016c87ffa4500213faea8b5e60dfd86d02f'
            'b12be2ed60016b8e1d9ddf258e20c60274d15db1240fe510c3d0181d2270b310'
            'b94757b714bf19b585dd92d724fd7848bbd5e508d60da16cab310a6f9ca90107'
            '82380406498b0cba2fea1923cf7bf4d8420f7c138954cf4d4cd319c806abdc2d'
            '5b53217a86a131fee5324e1066474eea0b2a92d84e6e436e2b570f3ace76b3dc'
            '243d26928426ee3aec76c170fa1313461f4bad9d4b40b0e2c2f438d93cca557a'
            '755ee92081b32bcf4cdcdfda29355e2b2032d7551e3c345f02cb28db016f37b9'
            '5770d30c2cc175683ebe8ecd5aea67857e60c726d237fd460bce69359d9e5df9'
            '4becf84b752f177a891f7f31b57c281737f448c3c1b8b8c34a1f6894ef65beaa'
            '227ac9c928cf46826d0acd018d3915096532dd3d5d3987fe59123de738d9d6f7'
            '4767c299191ec146eb983f931138e77d429ad1e73566c9e7ae8cb12473733e36'
            '30a081a7bab103b414d2d73d7430a8801485254bfa09c01d828b0038456549d5'
            '531dea49d3e40847f536a9ddbd7da6ac9497021e5b4bffbcfc1ad121ec4f58aa'
            '6909822c499a80e9a200727e1367deee13b4197dccd4e66c8857f1b2aefe0754'
            '6b868fb594b236a8059274aa7148b7c78ac46b9d95820d0f76a0a3cc18976163'
            'efde9caec188dc878c87cc13eb56e826640fafa491cc9caabc8e20bfa87ae283'
            'c0350bcd6c0ce1f99666d2f6934f6ba4c238c855b190eb6d48bb273a8cca393e'
            '3de98e36142b9cba32aa17633be4945409d2c92f58aa31075a8c693c8149f05d'
            'd440000b14dde2d4616fc6fe7fe074feae3a95de9d7725200ca3eeb0aa727105'
            'e990031579ab509b960c445e6fcef179ab83cb85855bfc4f7f8fdb307b720261'
            '44a440ecb32a7bf7e4cc15dcf96617354270513e84cc6bda7d703b0259be3861')
