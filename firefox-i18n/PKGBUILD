pkgname=firefox-i18n
pkgver=65.0.2
pkgrel=1
pkgdesc="Language pack for Firefox"
arch=('x86_64')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("firefox-kde=$pkgver")
makedepends=('zip' 'unzip')

_languages=(
  'ach    "Acholi"'
  'af     "Afrikaans"'
  'an     "Aragonese"'
  'ar     "Arabic"'
  'as     "Assamese"'
  'ast    "Asturian"'
  'az     "Azerbaijani"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'bn-IN  "Bengali (India)"'
  'br     "Breton"'
  'bs     "Bosnian"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-CA  "English (Canadian)"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'en-ZA  "English (South African)"'
  'eo     "Esperanto"'
  'es-AR  "Spanish (Argentina)"'
  'es-CL  "Spanish (Chile)"'
  'es-ES  "Spanish (Spain)"'
  'es-MX  "Spanish (Mexico)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fa     "Persian"'
  'ff     "Fulah"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'gn     "Guarani"'
  'gu-IN  "Gujarati (India)"'
  'he     "Hebrew"'
  'hi-IN  "Hindi (India)"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ka     "Georgian"'
  'kab    "Kabyle"'
  'kk     "Kazakh"'
  'km     "Khmer"'
  'kn     "Kannada"'
  'ko     "Korean"'
  'lij    "Ligurian"'
  'lt     "Lithuanian"'
  'lv     "Latvian"'
  'mai    "Maithili"'
  'mk     "Macedonian"'
  'ml     "Malayalam"'
  'mr     "Marathi"'
  'ms     "Malay"'
  'my     "Burmese"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'ne-NP  "Nepali"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'or     "Oriya"'
  'pa-IN  "Punjabi (India)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'son    "Songhai"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta     "Tamil"'
  'te     "Telugu"'
  'th     "Thai"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'uz     "Uzbek"'
  'vi     "Vietnamese"'
  'xh     "Xhosa"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

pkgname=('firefox-i18n')
source=()
_url=https://download-installer.cdn.mozilla.net/pub/firefox/releases/${pkgver}/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=firefox-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("firefox-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_firefox-i18n() {
  pkgdesc="Transition package to split build"
  depends=("firefox-kde=${pkgver}" "firefox-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Firefox"
  provides=("firefox-langpack=${pkgver}")
  conflicts=("firefox-i18n<31.0")
  install -Dm644 firefox-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/firefox/browser/extensions/langpack-$1@firefox.mozilla.org.xpi"
}

sha256sums=('95c253b48831f49ad9a5b39a0a7e86b257fed940052ddd55b8960194f0d97667'
            'c3c0e77c6dc71d9f82ef0ee5ebe5d75e83e7ee1d4d55eedee48e1e2294d26273'
            '24f3a72b0c8e48fdcc4b626b0b05f6c93e9ce45be698e1398dff6c6faccb6ed0'
            '5d843b42b62a9d80901f53c74c1f36cba317e30c2b711477614b5519fd5d6fee'
            '3648a643d5a4598295927da1d4ef0dd75fe2a216508b423c4566e28872fb5c22'
            '846b801351ad56c3bbdc2733e257fadb2f60c45940219278c448d1ce1acfabc9'
            '68149223d25c62b3a58bf6de37eab2362501fa130bcfc094a329c7a98cdc90eb'
            '206f9dae0720003d7dc444b466c2d1e3754d6800208411d6e2e766e2232b89b1'
            'b3133aed8b7b0312677248524d377345164e60ee92ad132737631b6c5efb13f7'
            'cfe2e3d844cbbac9691c3b4c817eea75605dfbe6c60dbe04e8f822c3590c2e7f'
            '98169b8c0ecf2796ebbecfcbaef10803f0286ceea3d3d12ce47827d8e7c680a9'
            'c19d61f8e6a48311334e1ea203b42d2a4ca25e9590458e2ed22589d170cf6df4'
            'ff6c54f3f807ca52b1fbfd32ddb6fca54b10de628d9e0a91e848357f6966482c'
            '850b2ac8b0147f759409670563c764d8e77d5b4537869e4cf4d3beb58f868066'
            'abb5c1cf5992fc1215237a65a8b7eb5a5b19e69549b8a1b56b674ff4d288fdce'
            '85c53725ffd3789110c1f0ffa4ef543982e7384a51b8f1f43fc71abe9ff98c84'
            '26b6e157c82f854d9cf99ae2ef78d5cc8d471f336f1b2edc38ad721ef3f1509e'
            '517d2d2ca3a23f71e2e713e36f8c169cf5f85f861378094d207f74f196f9a053'
            'df04998dcb3d4957c206496a7d73fefc1b6aa556c35b21d3698b0d0ad403319f'
            'e1d764e85d16f1c57ca273507b23bc436a42cf1fc20bf029043ffdd381faa9fc'
            '42477eff3fff90ac96164c337d4e5ee060c7f0734c10a7ac76f5e3db332b7a50'
            '3034f9d1b67ec29519d7423ca282ed1144fee96d361d8429abca01d7dfdd562a'
            'abe9c4698d4912f0e92e3a7750b3818bbb6220c3905160032ae588305aed445d'
            '6fa58bdf051e7bd55f726a41b746b5ea74d9a0aa9615443881be74d0d550c51c'
            '57aa329ce55c22e9092a443d1248c019d00be7084e07c0842718ec42d9f03f17'
            'c38ac55cd7c2b811f0abdbb329773d7e857c2fa9c2c118638fd7fc6cfb2ff376'
            '3694685920fd5ffffc6944791649cdade08d2f2e75c793da3ea95bd8409543b0'
            'ec3e6797bfaabd20a350f2efc7ae007455a58452a13695563fb546ce4295242e'
            '76405a3cc72d304d072b39ee0a55b6b41ebb26ab36a66ee356e0707762f928e5'
            'd01bffbe8b156326660cbb99266895b49df25abab717530e65fa4095a2677ea2'
            '047e4f74f77259eb0ea244b1ba8aba7f346f05872f86ebcd8a9b0f5e7df263d9'
            'adf7f2be1f5d98fed844698bf9a4395b032bcb90da656def0400fdcbe0461b0c'
            '94f69e6a48def5aa6637d20b8b70190446007f93010635ba98b5648883c5eddf'
            '88a0bc9775ca7d21fa2a48e39f2cf6747cbe61624bf03a34560de38ca31e4371'
            '8ba47f6557fbdd5db0237a3371f7ae22b8546262281759634caeb09de4006551'
            'ee77e6e06ddd05fa577eba530686bb388e7d37b0f5f69789c6e480872391633a'
            '827cc839237516b8f9823b3f17fc7ca07fac6a70ddb1bbcb7b54dca3c8e29180'
            'b8680e9b142a7ff5dd339c19db5c70684ad65b732995a593f2c9c6682cd59d4d'
            'd02ca07e99f461f6a33febf0a2502fb2a9e45896c36bc80bb77bc4f2f56853f1'
            '71477121103857280970ff25c63fa0c6fe95b46e0b1a9517b016c6ab1ce2754f'
            '4222e71c97ae5ba48dcc24b3792d7bfcaefb77ea39491ed4e43695b3f8b74e3d'
            'ab5e98402dd177c4ad3bd35dcb2dec604b6a963a0f026ea7a3d14cdcf80e3761'
            'dac2399aba1ebadcbca53c7aca4567b7fc6b43b9816e9de16d08d15eec1afa0d'
            '7082442f804a8256166b76a87c157e509c9de746c9f78e27528a0496ad0a3a86'
            'caac0962c7e12d93ad71feed537527e7e7233ba656b043344ab73905f25205e4'
            '878439050b62dc1762e07f240e5e98bca365ea6a47b532f9b6e2234809253387'
            'a50e1e71ddcdd249e51f50d1a4ce243df15a6b48809748ac44c595764774d4c6'
            '584b934c1f65cdd2bf426582aa73412198562f2511d45cb5ffd74e600765540e'
            'ab09f6567362514a5b5e87628d8b3d5df4658a5af74a4a7c3d5400047f62fad0'
            'e1283bb2c8ee6f06fdae4f9d6aa9e8d55c6b2045984b2ae1486a2d2642c9de33'
            '130216ec315392a24a64f66117fa160c177ee388f35620be7cca6189018f5e0d'
            'a8011846a517cda2515d83b564aae6097f70d4a16f808d5a8e8dbe90762a6f43'
            'd826ccbf9c73dee9c5b37c0972b8158709e6f2367218279ae5cdb6f81772f6da'
            '92db9d22827dbc39d675600e00c33109517fab0ec5a579cff38cce8958f02d83'
            'a49c5f7eff204066271a195d6adc2334ba011df6530f6be0e08476534b7bdb5f'
            'f1118506c3f9f4c8978a7138305ce2a8986494b9922c9e949b1409084c631901'
            'f6ac98e608edac812341bcfd9ddd5aae3acc1f2cd224ea336f246dff15f41944'
            '08311eb0773cfb48884fb48d446c7ee0ce4a54805254de7fc74e0868bc1adafa'
            'f68ede359cd764615d327d2945b70757c36588476e51bd170caee2cb375584d2'
            'aaf0de53b8705a2019a264dc1911e6722de1db325e4135b75c83b431c198dbcf'
            '4a7b2d543d9212a2f853e848f110a806ee7349b59eb7222ab4c83d1254d44633'
            'f167c648a807f63f37be7e03d19de8171fd4a00684a7f32de8624da2f5001c96'
            '12c5123891810bdfa59cbd21506d3cd9e64956d6a853d6f86c62b017bcc341b0'
            'f121799f6b4c28ab8e714a6f99d9bed1e3f9fcbea867cc16f849496f3dc69d28'
            '939d0e003ef37ee857e9c7aa14bd0f2f7bc5780e48f41f2cdc59c97eb188845f'
            'df36c662a4ed25b5faf00a0de36ae819f94962b9cc65ab1692e471b800fb2cae'
            'b15e36ad98c131cf8fa8965a7e6be81f1c2f639547766a18dce2db427317307a'
            'edfc5ddb00aa12e07b9cd23cefbef57419b39ec0bcbb8b4150732787dc2ca089'
            '8a4d4b07cbefa25f42c464e678b79f577f1e8e32a1dfa394ac3c456e31e7714c'
            '1bda37ce37288f66cd75b615cb11b05dfc8d554e38a2fbc53e5f604697353690'
            '2969bc66aaee210086433274fe46b35df21497322cff1887d292cde0a2d351d3'
            '0835febc1a438c71ccb67d3d0fd7a4823e757b02d79d9822ac53c7138c248a81'
            '78eada45c6559d57d1b9fadc09b8b6907c2a084976df2cf17ee020f8db509e51'
            '21b0deff98d0b40a5598341ce4fbabd9e7f35cbdf802db6e35e489cb02314fda'
            '1b96211c6b19c708abd2e2a8e64c6309495b1311525c2158cf0b2ffa00970310'
            '587083a8a8e6d44471a71210a227b6ae53743324581c3c8adcc1a2a8ad3df19c'
            '4be04400993c5cf09b74950996545b9fadbf1a3f638328d819aac578567bd6f6'
            '1b479350faa28ee4dce8f27f24b17e4426e147f021c4a31cf191320065a207fc'
            'd080d9be42c31f71369eafba598ad97b14c29e12c6f25d903485034c2de599a7'
            '5fd34ce6ecbb87764617021fac0c76909b02d3d62db8cd562b2aab46b34ac73a'
            '8635d9f892da325c927cd963050cac218310d92b61550a87c7d391a5f07dcf08'
            '0662c19a38d4f11c556184382f58b100d6fd6a5b2b76c5f644f77c29990aacf9'
            '1911e24b2f03d802ec04afa853bc938747927037a49587372b63dfe6ee30c12c'
            '880c6498ce6d51283be263ea66afcb7d8e8261f8488efa7975ccea4ba40bac4d'
            'c9841f5b807ad28da5b4635cdfa27e4e2ea8418423cbf535683443b56a8d76dc'
            '6386b6df31d2fecb4389e70ff9d8d2b58c0d149458afbe9cad0cfd9af5a07ce4'
            '26ad8fa85b1c4de1c267883954680307bb3e538349766d01656033400ecb0d92'
            '65bc219572e46ef73f39b3a0ab06d58fe933c849c4c2a4442d371901bf0b49e0'
            '3efbec368bf6645d7702c8c8d21df03fd428104baa653842f9ae2fe6fee9b99d'
            '2e24b8c2b531b250099085f092a0a838ce59b13d0abe905a2957219d6fc4de3e'
            '21729c30481ba2abf35f4a95d2b5ff11e39bd21ac6f7fec9a8d01b0eaeccdea4'
            'a9cae01d51dc31d8fffc65e356905357d424d714ed53dacfcd1b9039597d80a1'
            '47160f6b219c7e8c4c5efe8ac2c59b17297bbd37afc8c63dcace5986ab21c364'
            '808b1ba76d1cd1d352fa867684014ce1012cb40330a23f85f2a901cf746b51b9')
