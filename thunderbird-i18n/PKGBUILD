pkgname=thunderbird-i18n
pkgver=60.7.0
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="https://www.thunderbird.net/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

sha512sums=('883d66276e6f1707c2f5b7f3d85f153442c0b3b631f99d1383021d42534f797ff180a762a0bbc89b42aecca8f9d72c6a1fdf38bdcd7b60fd2f3dd57c4e68ded0'
            '3c824e7aa2a24ff55a9a1d37e88e2d26438390213435dbd73444e8779576d666a11ac5fe950ed01bbe7183d6da13eb0d1177fe4db4b51ef1f91c119c7c056091'
            'ebbe507de6468ffbf6fa5ad3a743d4f36e5f75bec71faec5e459457ab193aa5fca1f69e81f917803021ed2084ac8c7cef4e443acf472f51d2d4a0faba599ed7c'
            '9d46354f830b16897bcef76513a8e0fdcb455d6538db4bb4f54ee2a3205e019fc7a8506f4e83e97a0d6de5d3eb30ff2658bb69e05cad03c26ed188836d91db70'
            'd3f777e8a5a8aaf65d950e0d2b66fc687c7227dc2818ad1190306388254837a1631d5a465277a0599d2fdb2f244cef2fa5f0194be26a4732bf2da49e768ee5ca'
            'be85e106167bd6debeaa74dc59178b95bd5a93958f5b715b569d89d9c7f032cf37968f5bb05cfd5802c0ac45122b4887dc429833603070ae8fe412fd0fe4e9d4'
            '7ed6afbe61f84863f8251fe5eb23ace79f51f177a95f02ff33aa669f1c33a09679554ce9a6f89f0b2deb802bfe4581834b8fe6fff1d05db51f4130d35a3399bc'
            '68b0e0812ff73bbf81c25ab7f11fbcabf1f0acf58d65295d19557a5f4d71904e51f69fcd4c9449539c4adecc5d31115f7be700bdf349ba80ee7a64186ee4bfdf'
            '7a56997f7ede542dd57531c3aacb7ad9ba21d59db0a5bf8a279bd53ea4a5d333cc61f3793b9b212a90e563a1d4db90f6f68ea1f2fb01ec2465780145a82f6ecf'
            'fd0eb44c2b059482a0b3a94bd650764e4cd97ef0f6ff6a83a4909b25a03d62e2476d44c79f80c88acacdf75f445e1468abd5e357fb0803f37b4729bf57378fdd'
            '16ce1aa169ec28cd7c2c117b7eb557bd8fa2bf4c5953e0383ef5cb5e0775804025a5d3d9baa9964fcc941dd438dacdd66f75165b6d9b50c970bd5544e0b718a2'
            '25ad254876525f190a5f2e5350fab476059941ee1c4521cc21a052c9348a10e6c22b7826f4c109eb80521ef1fdd225568545420fbd91aed3e09b7e037f448abe'
            '024c6d8c1c934d49f59e7a79c44ab7aca6d4dfa273ee2e9cf4a5d8666dda941051166b494ec82fed8328050dda0643109c9cacf0d968be33bee56e9b39b97480'
            '9fc610ab241d85913ae8fb8e30ac404e718461b565797e7436825ef37ca67ae7878d90437997fa6dee5b7cd8d6d6790c6b2dcab98184f9c15ae7236c3aa73cbd'
            '90737ba05f527a78828de1c4a755d3509c8eb7183784af83d6b0f02be1b6e156de244e35918d41434e2c48bfe2cf84a235561fb7c0f02e68e00e671a3b79f5fb'
            'b261bf99b39836149d46b4349c8414657b295c293c7e40e420e53638e97d2fb851df2f94a49a80affd42671da98a508b9110e391bf685966b4c7b84ad1e65c7e'
            '0c24ebcd7c5c34bdefd9e9d9d9aee690765824cdae9f837fd5039d1919cd1bad0de99ac00f8968166617d35eccd086d913512e6cecbd0236062f3c13bdc2f7f5'
            'bc7430e33d91c74567b13350f8afb93b054e7020b22cbea00598b551cbfc3992286c84d41c7a1f01f7a8696bf5c7ff78486d0a08b2067b1efe2d7f13e3ecafc7'
            'ab90d50ab0fe4a52d493ed0f2bfd3a682cbf933a493733116288c88d37b8878ec532dd284854c455dccb907409034a16284d4d4712767a769e909d276a2c3584'
            '5b2b8fd9282342624acb16ccb3d56a857aaf9c655fede058c2b8b3ea50adb02d95459e853b7234e3eb63766c1ae653a2a31cb30c6eafe457fba77b30c3e6fdd8'
            'e8c51d9432cde5d270cfb5eab6a3c66bc17a8c771961d3b3791b2b744cdd372f95e612530ea55b8bb0eeb4b7b531b9d23175167015d1a50140e5cb203c3ba42b'
            '7818655dfb1dcdbb5ec05ad99333edf708eeae6de72f8d8c99826d205b7e27fb2cfbe5a0b59542c1312bc6d3985e2de7d4376fcb24cd34b55a252e82090d44bb'
            '14f1ecda23ee70e01cbeb2c14e6700acbff6bf4a251b18f3dd1eb9abd53496f2deab7630871e8497fee77ef54d2df838270db43a0e134025da84ab6388bb9d25'
            'd5ff1133af2b0bd427fe60193374a5fda89ca8c00c3160c061878992b3728f4eb00472f5d1e0d612ea904b89120902eb4b9a3b65ae774ed4f93463d884399b47'
            '07f7ddbb7d2f7412a2f3246e2b7cc0a46cd67339b0c8f30947f7cc27e14674e5ac86af78dfdfd674d7f43679b43bafa45631f31f51cb6cefbaef8b48093e6e40'
            '13d52ed5aebfa416f08440c706b543622778db62bd4a8ada0af2d1867f4f03b5f621db801a29169714ebdd8bb885c8d0a18270152918e28876ab3236ff31e786'
            '481ba888a3e01c92ea22ae8481da96f6b722411b3e80767826cd62a462b6efb08f305c365169e96992a6ab6527102d601b4c77dceb0793a525131bfd46a07266'
            '0449b1f4be4edba5f40e94a1c95907d86cf3496042eb9a04b67bb90d90d0c4a07d2e55b2f8ff2060171d60da15a3518c3a2fdfb8cf81278530eeaaf330b6b80d'
            'b4106d70cea3cfa74e04cb9ecc409e4701fb4ec9ea332aaaba3dd7e6f578b2f68556a6455400953a990f8e2e23f2eed5822e36ce01e143cc2b480993e3289ea5'
            '2c6b5ef5f860a2388ffba87ee878bb1f630b947277eccb8e82f7bf3edcaff331f45df7d32cc2f9898134c91abd3708c764e2a6d5bfc4c7ae87124286e745c5c3'
            '5fd1c0407d9fd2ebbebfe7588eea5223761013b889a5d296329e1f28f31a95cfc3248debd3186c17f24eedf2afb3dbc0992acaae86ea89001a09721397a81af0'
            '26cd62702432aec555b3e1df582413b9777e52fadb85c76eaa7e69c08a2688009b28b8f91e1dbe406f680a6bb71e6c6c7fd518d012529a8278063b500480859e'
            '1976e3d707d19f736cc7812b688d091aaef59f685d75e9d88105b17f2e3db1ec06b11e98437db344e2fe30846e8961efdf1c3b21a8df138d4135422492ca1941'
            'd749be59c02819d0b6c8f7928589ff9d6717e39816fca227a6ae7919a019ba68fe7afdfb5737dbc1cb1e080ff9d6972875e4cf18e03612570cf1833de1ba3481'
            '5d306fbb54eeca9283d39f13b7268bf67f926f13f3272e15e828e10b5bc4ca2902f94f08efa48139662c9401e59a66bc5f753f2aa051170897976597a6f6a703'
            '0c1ec3d49b79d8fc8951bb0af4fc7ca8a0248740d3de5f0e0436e4f93f221e0221937325242ea7d70242524e1b2c6fab24b9b35e865728110b12ea9a8e7fcb1e'
            'ef38964b43d4dfa2ef30237fa9fc0be4a4b39f2469e678c521a42bc9a218e1125dc16170a17bbfa045681eb4b0b6027e0be6dd607be9ed752dc9b6f0a21b3dbf'
            '76625b479dfb3e4763f82ecb7ca5cc78b44152cf1d7fb14f746333cea0fe66d6afa3741037048cd458e28e05deb7977a6078278249a13b105fe54753423729e0'
            'b612f5843b4e60379cb4bbfeeea15e48f1e2c498ba81bd852cf11340f5b0db598b708c0b9f6a73badde41af45533a4f51e8f4b12b314eee5db710224be3625bd'
            'e99b12a930f061603b687a7cf57fbdcacc5baf2813258ac29324ff328f5cd2fdeb5a00e3529e9494aa8fe7bcd57b2767a81d091d4eca47dd2de13327f77a31dc'
            '04d5bf4248107f394a0a111fa8d34ee2d0f883edad61a9a224af6069208e0e5f7a17f033026891352ac8e79a2d39995db73ef73026888f0723d361f8e754ded0'
            'e4dc4199ce6e05a998e12e0f64325ed87269d42feb5b50eac2382dd0855ea4f653ddf43c37cfef562eb44e99e93dab59daff77bc52af2bdf2ba29b995f838ff2'
            '8bfdc388719c549a0fa710da9bc5be5d1fd9c18ea68d3a8471a93658de46620e909ae55601122ad8bdecc357f6975a159fc52a5840e1d02066000a7153941f15'
            'd72ce7f630b4df73786adede48b25152865a30559cff4135e022cb7820d711226c4df3e590f210dbd0753dae244e198a3e5a9397aefd92292c4df941b7f8845d'
            'ce7bb1770da2cc61f32eaba4235aa26feb9dc2889f94dd6f0b64ccb148de8a7473db0895460cf9ac0c3837c2000d4b376fd61f5cf1b25e2334b39cd3e4615705'
            '563739554b1bc1e55a961ad79474b56488d0b6879d4de30cac0c522ac61cd437e0e7d2d741994716ccc572c359467c8a15445ee7924899862835e6d0820d9775'
            '27955cca0aa63aea9efabe0f2dc6b886e3c876bb0c5921df7d2e3aa21e8fe8efa8e50c3e7b36c091e42e3fe30edbd2c6d1c6200344d802fe872cc68449b4efe3'
            'ca597d4fb96481a27bd3431fb06072def1046611b7bb5cb2c48e117cece65c736d291e531484d3c7ebc56ede611559682a866c1ad1fe1735dc45b7918288c47a'
            '56c5a0856287680e7a8abc28b792ddfba28c1ce9eb234f624fe58cbc9534fac6b3cff1bbc4e765e957319b463ab303a2946e13badb1f93824bef8db6705359b3'
            '877b270f783196d1a1fa9b5a03a2e479c9a4899a2997b899b3cdf3bb5630c0b7b956fd7d9ca8a083f4e00420cf35a9c855bd13ae3dc878d0b83d2abfe9320be8'
            'd58da490a846a6e986a19a3424cbee9ebccea246a4d27221c8ccfb72d7a30453b158302e4c48019434b35f793216601c2fd6531523ded209d63da05009e0c130'
            'bb92dc6633387e58a7e8bd45ed75bb2b3d699200b4a5db4d4008127b07e1e3bb99af3131b7c6c3265f881d20f026fa6e9d632b30470730405be21470df81c757'
            '691dc851c2e6f0dae45a1d88cd7ce2e55fc81efe6631180f2a2194df2297aa038e9358186b8a48f8f5c952e6e2347e6ba5a65f16abd8c0b1d58c4cc0596ff23c'
            'a75581df56bd1807c6f260816576ff6880d0953f33a998dff10b27c6a2c8e453a1b9dee568e65bb6b485670e8636a420b1f1b5ba083f1e91812d5501959101d3'
            'f0cc5932ef5bf6d8748eaaeecda18456b517214eb102ab8d1b41636102ab2d41c5756c14b85660f909916b40a5f91a9d3bda1e959df30e38f83fa9b78f2ac9f3')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
