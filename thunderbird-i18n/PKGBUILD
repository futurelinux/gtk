pkgname=thunderbird-i18n
pkgver=60.6.0
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="https://www.thunderbird.net/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

sha512sums=('ba9f97ef66105625e09a0ed7f4dc28af90d5b01981b2f980f6cc2e7c2520a3a660c70e9234a7f1ca2d428188eab2b93e0217b465d15d820c7f2fdf4bcc6cd5bb'
            '3a346be489cec696787afce7ab8cddf7424e585afaf9d6b6dd8a92d6a2d7f729b2fbe7adf7cba63570b23941987a0ac160cc306a8f9326c84d5b9fa8042c7736'
            '9d021963bbf56738629e46ea005e9f039b2a544df1b354529fb3f684cbdc026fc91a706a6465ecd0f2dab61dc3466e3262486e27c533d8be5ab565895538aab3'
            '1e34e49a865513c5b84b635db595b21aeb47f121d9a87292186160e9b8a3e1d0f4cea7cf006fc8242ebb9191b7b0df21716bb522606b434f83714a2d3dfec263'
            'f4f68197b33ac3f0aeb73fba51445f37d3b05e3baaea336e1d51b912fa7e554b4314f04531cd1129b98db989cdd3263050397377e97c25448ebfd0e7aea46aa3'
            'd38c74fc9db2685a24a1e424d2365f996413f06fc37c45dc06655ab2a558a0427466bc98c868ddd1fde8ab305e5b2847464b60b06f0aab3b2176108dc719dade'
            'dfcc19ebd5999497ba393a5c2555c1360ecac4dfd20a3d71b69060267fb5ad637a0d52a11238c224d021a512fc8259bdd494e52535e1f3dd7c10f4b9ecec8c5f'
            'dc2c91a9b61735955ac5576d79adc34bebabb2e8c69ea5e11d8d505575fafd662b19b7b599e42fd0a016d8572973e7d214c1eb32861e44c0d882a470a4e74f86'
            '79e3a17deb707342590c0436ae95c834c8586e26290317449429f8fd16fd1b538365a1732de32c933a01b36ec225d8c145e55b5c3b8a8c42a5c96e22374fd6b8'
            'd1039dcef888c70d4034a0ef3fcb11a885faaa739d6b87d50678f8712d3cd52343879809ada1b67b8deeab3099e2a1809ed36e803acf0d5ae27c01223b856bc1'
            '092a1f6599b06175aec9bf8eb1217437c2c25d9ef4a437682fad9c489d37fa9bd1a295ced734d4831cab367e81074d07da072567f9a736688ec8440f1c2da8ee'
            'cf881e6dae0f8086ab14668aa10440479a17c5587daf6551f23e0661ef3936875fa50c3808d81c39caa37cb3be8d548d2a5e5c50bb10b36600c2781fcb1d2dc9'
            '3309c420af7f9c2f85e9825ae52d420cd15a92bf839ca1fa5a01b6f371760c49b955643fe1b5cda89dd2b97a1b000e15ae68067f40b3834f3427c03c6630e8e3'
            '07156b4faba6e8187a6fb271d91b1f0a96641cefc307a295675418855caaa0d892563ec2e95110588f6949f45cd05a2135515596c52b4cd6f14ad556bdcf01b8'
            'a30271630543716a444e6bd04c5456f2e528339f54cf972e87d3b93549a291c450b0f6002f68dec8e4047c20247a093cae544e9ce3e93010b9b81c5dea4df477'
            'cfb1bb66c9a0fcc6f4de5b3abf9fb1deb0055031466494cfbc9d028b0612e4861f0b7fe8b97089b0cd84305e36769b7d231401a86011c1cfeab11ce1930b1ec6'
            '70ad0f3878e863a5e8ce083a80477c474e56281becbaff9ff06b0ab1300e6c76e00e1df848d26aee28f9362986c6354371a00cfab7fe9156e10fbbaa48e62737'
            'c63ddc1633d6ec5c3449b8866328c3a83e08b8f60dd813d28d530b3d266ea05f10b37e1e471e1711f5ad92fa1fdca9131b878af9f474344e6635e05d180f752b'
            '4591076c09832d014fae5e5e5f19441205210cdf0a79f37aa953c2c57b274a47d22e9edbf363a3a0b955f2a124ebdbe84687a3e021f237ece6f75fb60fb9a23b'
            'a9ecef839f36f0e727d6869e5fde626233006b10288ced723f04afb121cfb665a2f0be9e5cf5627a24c2ea462b145413b50b5846d488f2d4d683d182297c7f61'
            '257cb678ffb82494ace62610ee1d04ad058ddc8829a332b78549ded939c9bbc8b18e14d8f2f88b936b68c7215c3add921542482a66f69e0487193b3bf0ed7bbe'
            'b323e791ae498f7759827b68dd611fdbc854f9a82046bec0eb6c54bca616e63b40c3c89a2effc3f764b3c14e7b497f2e285b81d166a958477e24a6d3a994a19d'
            '13daa6b8341d852242f4de5161c4d5489673f90c5f081ae1d8b21305dc76b6e9c5832c6bafb6606f443717c5e8b6ede016c0bdca0db8d7967b10d9a98bdaf528'
            '6584a2158f4ac39d0c2d106ea0b054f01c41b66175c1b0aceab78afb4fa5304f37bcd44115082b56ce90b3d6f7b52cf48a5d8e625ec229e6e374fcee0c20d872'
            '50856a82f1f5685614b278d388a98d68a3a67f048c759ac489e6e1e5f080cc7127098882a03b7c0eb9fe4142d42c354ce52ff59a44193d912fe91890bc041b4c'
            'ec556a6971ffa85f50ac7c15748cf0a5b7d0e1abd3ed9537a58c227ebd9f9bc32aa57c000c9f09b2a37aa740e037933e482ebfe01d3d3d703ce2e318a88f327b'
            '67762a239d8552e51916155fc517db77c395480c3afb12468da1a2396c269f609c926a595783369ed07f8f57ac3fbfc3960c6e1c4b41634f25b56d119181b795'
            '0dc3c78135ca472ab76c7c84d0ee8beeaafca4caeec7c5951a99169203f2d3f309c7f61a3f5e5989874d21888e6bb67401151a32258cfb46f63e3d08c7bd925f'
            'f8102c3ed19d0aa558a4f4fa06add1662429b22fda49ab7f129a1ecc11fdfa531bf78aa3dbad38be62d485140b4e28438527cae1faec8ca55470cff8e8b94cce'
            '3c08bc7b4542c6369b115cbace8fa32068c8e1eed3dbe8132dc965a252fe6567c4b2568f92a1edb8cd67ba101db40888b335a79883fe9124a81a8d3c501e0823'
            '6c909ad4494c94a7b6140a540ad0d62246dd2e293f13e86c9de9c93733f3487eec9963770e702365b996e6cd62d520cc80f8ab1ae0565fc0eae26f8b7738cf42'
            '814b68ff056116afee57eede618fcc29ee64273ce17c987240c8320eb76ffc6a173b52a413c46363e356ecc18038abfab6bfb37866680093e49ccbebaf32a2a4'
            '299d9a3623e545f30d1b896c854cb7a0635ef5f865fc1326965bc6c28ebe867a84d9591703cb741a43320464e648331bf16a29228823aa78660d7a2bb0f055e9'
            '213f7f4efd94d650d0249bfdf1e2941ea8fd9c665590bc00cd98a87274b912313948691c41289ed8c98562c06c97f869895cef2323da2a894f70b062870b9e6a'
            'a66676e5711bae0dee141a2415cb46940fa21c78ca0a284fa278bade8be5dd3198568f5a43b6b1d89886fe63a3ef283c31f0bd4f87e8d8c520f9c5292a857063'
            '0924ca3cb4b267667a9c8aee18cfdf5fca5917fdf341ef985aaccedc4ed2c76a25df573a03bd2dc043e87bfd7c86a7b9a0aed1a2774c7350f67efb68d58281de'
            '223a9d97811c3fb962b7278cbf1da34c72c65c2f40993ce717c0bcaf3b4131e1f9fdea49e99f73953f12c57653820cdce4821431e1ec3d9fc05710f7d42999ec'
            '0dbb8464afa2cf274436c6a9c9a910553df07ff1ef1f1437aac5d421b6d638e546b24067112eecb1b44275ef37c6c485279872c16a9c231598aec45670c84a85'
            'eb3972945c2240a90dcbe4a16c5bbf2ecd5c5dc0deeffdd379a43d2b384d50c9aab5e736b77d17aabc220d12d1ba167f5577ffae08bc4cc7842aaf82125214b1'
            'd5fb2d3209321ea7e2d7d1373841308ceb9bec00209f8fd8bdf6cb0441667c3e51fa5d53ba111497b0e29acb80a122688899180fae803046b4c19be139d409e9'
            'bb1acf531d5b528ae8323e666366d5fc073684356fe6f95a020d1b92241eaf90ba6978e44ea2fc682cd6157b78e5af11e79f9687d4cbcf930e39883bd28ed27b'
            '8825fb746d5db6457ec55ecc86051ab9f9222c841214528afe6c2db34eac5f25f86af74b19e78a655eceffc5762948dce41337967156bc919ebce720f037de62'
            '9875c7c2b9bda6c331a2adfe1df84a9781bb086f8b0ecdb6814ca5368b827fd4daddf332e405d091ba5ee05d9fd1f793d5b34dc36e82635c84a45e62d59dee48'
            '13819fc13bf813d1d2c37d82d996da0fb7926a937233256ba2b9c7fd05f2dd87ca418f725f2cb02bf4963dfca61fdf6a9e5cfbe78442a953292baac3706a1eb7'
            '6085a7620dde9e1d74a5632a0e2395b8e29f3edf6caba14fb6e29be6b135b2b12e3bc6c24e2117ac1b2d944796454764e1672a438162ad5464fdc30f81d63273'
            '028f925a2ebce0376a2bcac4a303d484d7c4d90609b9ad4c3e050dfb36ff3db2a279f593677851441a931f05649427d888359d2db570e553ec6b85a223cfe54f'
            '03c7b5b9b78ba5b2fc1ee462759fc1baa9dd4c297041245485aadd3b72d712414f1c5e8a206e248bb3f85eece40bdd1d920d7953b653c7117ddc14a7eee80f47'
            'b4549a8068d95d68fe3731e8d6bad6195cf0e9e9b76f86590024292e00c86a84620a6d9d668ae7346bb577b89d68e25da71da1ac6be53426bce346056878c0fd'
            '278b6433b482c330413c09d96f7db1a266d1b9fe542bdeec38ea8a869df8cc1fda5cee4eadcd3f08ecc5d75bcf7a798fbea27c9811e641d79617eb90e36b75de'
            'e73cd3b112009602256175fce80365d2b4b6e7d6bb8a6f8f610c9ceb813f01b77e1d93c96d8e9038f5bca1a05db2bf1eba3af5d4b0986ab76d3e106407ce282f'
            '14702339a33b48d7848f094567d7a6ff1a524509ee686cbb67c584ecdcb2598119fb17ec1f964e23f7699a642a06b12d5c6fbb202d1bf1548786a752048bcdd7'
            '208ae4cc607e61518896bd5d581affd669ad7fd4c5096aa7fbebc6d32bcf01e67ef2e2d225313b1e076457e790a2c0b7b239197bbeb15a3cb0e0e8f7f25d2d3e'
            '8ec6900bb557bfc7a3571da7f48ef5a02c1afca7ca75c9e9cda03fc206bb361e2e02349c96e9f0d2722eb1c03a3c89cfd4f7d19563dded7a7403ffb29ffe971c'
            'af85c5d2232adc97e3f69d84bfa445d4debc477e515c9678babbaea9698adf30dcebcb549c71bd03a211354c8d4297a93014fec8f6f6604667eb254980ef2b40'
            '6f93daf1adfe1056d9032ed0990ab979a37cff0028aa7a6ed523abb7da949a308d793ed108d529da1e8484404e1cd324dcd2f78e8133fae196235b07d77270d6')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
