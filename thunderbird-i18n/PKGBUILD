pkgname=thunderbird-i18n
pkgver=60.8.0
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="https://www.thunderbird.net/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

sha512sums=('c92af1c4eef761c30ac2bbd6a333a18826534f35bbe6f5a0da342cb9cd354151bff4bbcb48cf0b804657de1f8e67c385c4c6ebf14d92a0a6cfc39f34586f961a'
            'bb61302d2e14362819a99df3de4e6309f778f025f85758b927604391a0f872d6df63a0b69d669f008972863fcc230a345c1cab9b961d5df4e2a403648c484a3a'
            'a73da736f77c7ff6947534aa7557ec11ea302ff378394d5ceb2cc1b6365bb36f81b556dfbb66c5521ded65168f2fae3a03cd3cd0f59d030093553590a21950e5'
            '0fa3b36072a4d3371e07169990cc18ed8af73dbe824cfd5af2f216d059781f4c56081644e86c26a7b7150257e475c5204a41d72bfe99e327720df70ea6cd01c3'
            '44d3b65877c63a0af035015d7c8013e1577760ca91e367edc5236e293d27dda6eb5166f608aa660fc09e7cb830598890f1ae52f3f296ae6169b16da57cb867e0'
            '7daa322f628acaf38ed3df27c07f25cc79cff78d2ddf4edb3c499032519ea387bec028954744fe78736c96faa8a8d2c25158ff304ce2af5903d02b61a944d60e'
            '64697bc83c0db92bd48e6a29e3520056e86afe7f12475a96b1b593781cb596baea500736347d51e27fc2f0a11359ce69bc6cfbc07f4354a2a3e1946944b0b5dd'
            'df91f59b9e93e7a467657c4102f28d999833f19e3a810cd39c090992da89f6ec62aa34ab391b651b95ca1e38ec8fc44f9ee401ad104288b52b7d8313da3a41ca'
            'a2de79bf83c5eb1f77f175e97332fada1bda0cd353e0ad575c7ed568a5775fb508cb48ea751979c13f848f8fad66b06019d381835e22b0b41632d4e2b1d5f924'
            '6bde7bc5e4c1d16b2ce758b7dddb3975b39984e07f73825f58c0c030c29d47e0968d7de0deb2a144e86f8e73e87e01a39712552d4d7d22feb20a7dee3c6564d5'
            'e5bcb4949ce2b465edb919bc259ab6ae9a353e8b5da6aea4bece116cda3fe1ea8f3caeb881894de7220c1220c21e6604944219bbe4f1cdfad9e050c597fb9a18'
            '0be4a1ab3444a7e2b53ddfbc4774bbc0ced663ff726cbb173550050342f935fe1bfcfd8aeabf556a16c0a3bc0b2f4483a4851c5d86fe9939d79f11169fc5e44c'
            'e955f9ea391eea87dec7981f5b88c0a43a8dc86212798abdb921a8b4ce048e7d617f864f926686fa073b7bb6789b4f7f39969df2a319f571c7fb991c4bb981d8'
            '6c6f4d4314a0626992d4c57bade9653c6d361d20ca43ec7abb7e8eed531350d645cae596bb0eb605cb3cf9f8569776919a1ddbed162f70c0c5c05832fd1855c0'
            'bd036fc6c83065ca148955a9c92e148980b6d93f7730eb08faef8f7449b32eeecaf8f8c2caf05050302a010709b377d8e9b81a5ba00a12c8fa53fa1303c2a88c'
            'b48debb9aa2c64074e5dd315140bf0a09126345dc05a1685ea9dec18d25b7cd639b1c07167764ec0823f623cc83524daa07898105098dee6a03e1770d60e42d7'
            '2b0a5455c1664877fe5530422248e8fbfcb1b97e68e264a1fb771ed787f4baeeed758fed4be66a0c389888154fd5f08de8032ab4651188c35cff9fe8a9525371'
            '30ef0e8dffcb2b42ad3efe43c8a0ab6895a757ec4406de6911f6444840384e427bcb517f8d4eb7a8294567d55f67545c4b8ce593aa063f2e843957c17eac715b'
            'b6595fa0e1ca4baa353705c0067ea05a4d1daade48c7de057356a5aeaccc19d666a0648ce2ff5108ccd3464ed3f4e1b59cac48dcba1991426373a04fe1323230'
            'bd76b229973e795516fe6f6c8d3dd60da986a26a915a622450e823043741c8fe6d526d29cd3566faf5bcd78109da89853747a24790ce448ea4f4b072efc18c8a'
            'd8c359757cb0514271208977df3dc4b40f49287001198fb09e3199866f0712d0bf7c3f4ade3216cd08601ffa7c6b8cf2ca7e2cc91856819d013bfa43940c794d'
            '7f1c59d222fc98825f3aa8eea6c6a122aa904402d3d499d67d26743588da003c6e92214e1492a1b6aa853397161c3d450c6fa4830ba5e3ea75a8fcbfc1f4e662'
            'bb6f36d842a06e34199bf90bb8511b1a91d79fb0c6e073f125b0a555f344d531bcdb9bf78c804472414fcadcff0e66a9bebdc64e0d0832e19fce5dbe3671f3b6'
            '666f13a8229f73966456975cc51db9bfbacf2645f887cc072ae0998f227acd6f33c4fafee8a7805f8e8850c9043ed6a05ef9b9fd261c1ec9ebc53127bab2d26d'
            '40e66995e06d39d11062955257761d3a6539bbe86849fb14f0a9b111d5556d7edd591abf2a4498ba7e226c2fa13031ebd2f0cb768cdfbc170249cf0586915608'
            'eade1cb89a5c5ec4dfda113774c6a93f68676faf584b0bcc4b6d25ca45c635b3e7e48bde6748e14b899ec0ab5370e1259dfdda0f6a3221bc6b4eac79d2675295'
            '3efafdca843a17dd950e637fdf58b4003b21ed76afd52021c0b5f428cb218370b57a7784be2db5be7e2c23a937089a5fca10463b778e2d080cb7b7d507838a77'
            'b33b88f566f42e0bc3a80ea2b1e3300addfe0379af5997cd53da4ed6af67bceb2c6a1396de78f788a14b9541518f118e7ad455fe78512019a6cfad5e899d7c17'
            '7c03aac474651a64d7714074ab9b0264fbacd2858f87bb014edd0404111335a5ca36eb3e469a515a83aa036a5439ec4110c42680b3a8b49412c5c072662e1191'
            '685424c205f9d89ae1105beff1964afcf511b44450b6b0f9e19d49e5fbc9edc70dab7533c7c9e2b107bdceb0c0bd9eeff8b9814dff08debb9dcacc681c408c9e'
            'e1bceb4c8fec5582c8a1eebaa03c6f64876b2d6f4d8cc921a4a76eb380f361003109ddfe05ec249fe8eaaf4c6606e68ed4f55bd93b5160f058abd611de9c1e55'
            'fa4cc59f1b64a532b2d31c2ac82f8153284b0135a669b3da36984289234f54ac94474885ab73e525384f3cec93c46ead53d00fa888d3163663696d94a06cf460'
            '670a582a4bb8c52903bf00b3aaaed74d9ca29c58a7ee989f20d006771c2e00dc4b512db51617f1c9e65a98441901cb31b9933189a5af07f96a11c4632afd4358'
            'cee7843a94772578145f03a4726b0d60ea513800365cd7c2fa85c94fbeca536ca45d5203fd091d6333834e6345aa31febdbd27535ed7a11782b80e597765d8e6'
            '7779f34c8c041c29672781cb9e48934fd81ec6a3d2af95db9a39e33c650517d510e527578b8355fcb87b6442b0998004ebf07a57c060d8818c156bbd2487a548'
            '53f956cc91a834c69d711fb23f7c4628159d7e3c3a33af9b861c0666bc26279c41c793906a332040c2caa3404a5a71aabaf4082995eb94121ee3a75a5e3745d6'
            '44001fcd69c370e12c55891afbe5be79cd7360d3e8b677f1682b4c37601c6a0dcdba68525e0627a537018d1c84b0810fa6b241d980125589f30818cd614cbcdc'
            '644e7440a5a47c34a281484a3c16c55037eba782ce51717adfc4306f38720a0d4dfa24b59344bbb1affb03de55dc21984b58497450912235cc96668fb9aba748'
            'ae494b7bd0e0f1287ee6291e6b4bd2b869a8f4ef74113aa88cc53789a75b4190e9d128641feea425804a6a26f853686c4410bb5bcc7253ab89500255a07db03c'
            'bbefc1b55be40d9be280292bd48c48e555dd2d6535f16b4155940e2cf3f2119b6b0d3da7fa83d66e5f530eb5b3c40aa4b7125d249feeb8177063888c26530568'
            'b88106161385d9853febfa40666d5fad961fbd331030e382f6ed681ebeb5046fb50daaaafd04a551bc9dab9f50e16aea3fca678d09de93461b4279933314431a'
            'b7cc627d0c8d367dc6b6ea9a56d5e60dfbec41708cd36c38856d5cee3e9e5cfe7949681fc00714105b6f9d989aa26ec56eac3c3165402f091deb83fbdc01de72'
            'd413a9f5e04520448b38f5e8729b0ef939a409edd6e8c5409c3fef397056fba0a0d0b323c04c203114b3e5cb37fd406242f9e508e25707719d4eecfecd99f557'
            '9b868097cb556cff75d59c55fcb56c7688cd844703b346d629e21669d0d10df2dd2c5d80aac2370a62f3eff261819102e6b25be14dc30f3b64fd3234fc0c487f'
            '81d44f9bb1f234d643520164ec5b06c34a2fde0438498ab1c927eafd64a8238148d608173e7c952e582e1357d9e65600748d1c972ad38b5cfa44f5e5a819274b'
            '6c22ccd50ce86f0a70f2b81b55ecf971fa39dd068f4b5250e551a68dde24129023ebbc59c65d8d519f09a2a7bbc62a88216da917365769f2759d6f764ca10dfe'
            '12eb163775da8dc77bd75fb2a3610633285f4b35cb2ee7162905a561e7447c54ce4a95acc20f02e0056ec34193f8bfca9e18dfbc78017615e775a82ecf0ca9bd'
            '2e9cfe30fb25c023d370028ee3f81177a25bcfa65505852d57fc3362582017a92ba4acf1a85e645b9aa7cc67d4cb1bb0c5da7017c8deb95c5166c83e993dd9ae'
            '5df131d60f6e88b50849e45dcaecf3db60ffe1f0d60c503804e14ae84656230be245e97d6fcb4546c57ce6d74df1b6b856a693c285cf12dfa412d960a3bf878f'
            '2552f42a10eba2b27b39c373cb94ef0e990bc6c5712c585635f420b81ac891035843b8fdb90b9fd70430c39e8d730286005bd2334ff255574e7d32370f40fe98'
            '5641107aeaa4882373323c8abac60b9312b413e8f706c293d25df981fecd25490be4aa0ec672befacacccaf9b47cf933ec4c58ecb88f391d42b9cf9db62a8d05'
            'f45f607c5b3a4bb411afc7126279160e293f04cbb8be4a9a0b6e62f431a860656eee7e57c6761d5709aaa80b244c48c026d294ba54214276b770341ff225ad3b'
            '47dd90cae041761fd58db8a9c9b1c97e7df1933cb6f2e36f11376d683cd7f802fcfb74d8887b5333222484daa1e6c925608d54a4ec30f1ba8d6b234dba324407'
            '35fc72b7894b7a678c57e8b89332a3478bd8eb49db01e8cd74f9a347466f577ddbcfa07dde487478e9c120d462ada430b0a569ab50114a0f603cbceb8223a137'
            '41abd5e0a83bb8da396e1b3f469be9c89a09aef74f2a6e9ee7cde27b8d09980b2539d1c36571b65cdafb1bbf765c671105c519db63aa33131781125dacdb3a83')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
