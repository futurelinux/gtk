pkgname=thunderbird-i18n
pkgver=68.7.0
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="https://www.thunderbird.net/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

sha512sums=('303669b6a8e27d08ce40bd6c5d70b9516110caf4012559263166b890ac37c94873a4377deacb1a888f2e2407ef7cda75c16e06df70e95323557061a2035ade22'
            '0ce499f794fdd0543f8d45c3caca50202f87edde1accc6b82d2f560fc7559772eede3700242040597af7cfee8252a9b23d5c2aa534a53cfc2a634a9608081c0e'
            '4504169a324374be237b0ea42eb40582f29f076e852a052ad340b43df0c1bf63bf5eddc513e3b53bb56d064af814a6ce142210cb605ec57040b2878d5c2b1b52'
            '1dbd035eef08f2f0ab040d1211c74cd7206f41eca2ec390554624c2f0041eb4fc525b0596693fe46ffbbfd31b1527cfa94ec83c9d70ad44c22c241cec10fd890'
            '28bebfd4afc5cdef8c8dfdabf54ac92a460438c9689f7f50296374f429cf2974a8d7eb2317d0961181774bdbe88f6683999d76879b673191f3d66772e66a3b3e'
            '152452db3a828f9a28c44b23ada822d6f7728aebe5c18ff906fa00db9f32270409365709e8596eee6d7ac2a7ab4248678f8ed143aed4c4b1091ef8b81a82b7a3'
            '90ecaef1083a9e8e281ccfc52325da1fa6ead8b3128df7af9faeb8b5138e0b587769bf87328c3a7080a2c45b8981242b2431ae70a90abb76dbe7462cb2cc4c0a'
            'ed35da50a58e4d5ed1855f1c3d904384e52c41cdb9a434a9d1e27664aaa4598d52ac11b0dc2761d6c286edf3896fc0ea0ef390c17681bc48a8abfd87a20dc79b'
            '68ebd94aa90938eaff18354d03384ba09e54f8a1e7a4482ccf274c38b1e1722304bb22a4cbb809f97a1d272e229cfe08f3cd905ef2c340400dd23feb24d587d6'
            'f8dbc7074ba0e4190003096b597ebfe2bbfead4132b3bb05ff705705af99c25dd1ccb6ff5248b28f7f278b1893dffe83fc595d3b6c68c197ce8d5aad6e8eac95'
            '1cdacbc0d3d18100cedad26cbcd76548131912379585f0da1544bec7a8c3133cfafdc1add89703493f8c9166d6beaef5ca11d215ac4a441e830b43d232154d0a'
            'b88817e31d3dbe019194be3b3445eb8630437e7fa3b23c499d984a04a3119ff2da681a51c73984032eff6e82210ee9e04c298ab55d01501631380abe3dd36707'
            '648a5ddfc43af5a701040a3adb91af7cae43ead51fd1f86c8d219b2cfa59a6180221765f6e7c6b78f94360fd5442b27a02e17e6c474fdebcf5beda8370aeea46'
            '4c2e3f871f29e78a491ecd600ce3e8a7768acbf2b678eca5d064f717018cfb259e5eafc546ecf0ba019695064ff0a57d9c1f8f1dcdcf40e7934bb5418644459d'
            '63b90cc2e7c68209bc914d286b1abaf95d91ce5b47ef4e521a8e6a6ce540f864c55cc981552fa9e5621b496d10737a47060eb3963822268561de9edffeb84381'
            'be8e52ae697e51a76d39460b7753b499424c47877aeff7916cf876df609c3594223286c93ff71c4386a49838d394c757c63162eecc8b7a915736ca45c86fad6a'
            'df1f5837f1e75587ce7c1f3c5e09c9433e6e75ebecc2c1399cb781cc85e256b79a9e8c26a006229fb570483d638991aad4741aac030ab6d51289386578b248da'
            'a3561476e47105ab6d8b36e2375903ffc37515c805de7d75c26af7e59e6ba28df0374df660c51b4d59930df055de3e9bd8e5c3ec991b2895f86647fae3d0f54d'
            'f9f103d5351ca49cd3bb071feaa0042d52a8728125a1a5029f97056506d6a41ef7089ce51c9fb5e900201e99a11ef1a12af857e4d69d1fd45330b79c9d272f07'
            '9283139da4ed518b3120b28cdebcd80df31c886053fb38c27926d8c437c606bf1be7e6107585317630b2b077f95bfe19813108b71abde64f9ffa7793a2c18907'
            'c0a463274b8a70f5f2dae080db829c1db77236e274d4c912b5961d12b65dc70952eb38ed9a69cb46639cb5021019c512e158f1c6183ded58da368226e3ed2aa8'
            '6a70d8cb62e3f9eddacb2720c7c8f3839c408f2801507c60d069bc9c4070b2c0be8f848c55fde5faaf56fe4ffee259fbc8e80f3f6cf41a95a4ab7ffeb46d9937'
            '5f485eebf995a788978113bea428c20bb205aeb573b56de5a020b28e757e0c921e1b5349d03b858abc6531e8b596d362f219ada8dc04840d2c29f94c853f8b5c'
            '1b595ddbfa0e775f7b1e2b0d271c9bfa790647a7cbfd0e5fc8d93c07dc0d75c6860477c69874a32d635f68ffaf8fe4718684368712aec3241cbd995456571ba3'
            '2d528981a6a697d15ff2fb6ac47e195bdb5ea0f29bb32e10dd0c8c5b67473aaaf6adfd039b90eaa52970caf38ef3195ac4254818ab588ef2faca82772beb9c63'
            '693678b62e93b90635fe8532759cda9a743d87f29e458eb91045a7ffefca9c3f10b6ebe7974902cc6d3ae3a05c4cae622f7a3fba25fcc91e10942b9fe4f94b06'
            '8a889f989d0692bc0d0db23058dec395295fe380d575c3c67d1f903eb9d6e07dc405634d9951b1184df4b6fc235c38dcc4dc23521787bbee33ecde2b86c35aab'
            'e46a50e75a07d42cd8b46d42970434e55ec738668fe32bffc1da5fb01fe988d843ac8b61520cc5ce34568f2aeff4030f4d04656cee2871febc7d2f984ff94349'
            'a7d4ff58bcd83b59025df990042883b3aae0fc1a7e7e36047105f174dd2cf56db2c58151eabb4e0de94d456195aff26bc36a277bda4f9e75be51939346e96c11'
            '6e752e11f0a96923358600f51cc43481e58c147e3059e9d08a8b07ffc60a72f4c8371d9d6ba660a91bd7cadec904d9610d4a1cd98e60f3965da3139bc998b038'
            '16b943516b5769aef029051538a911c8e09c142af2d466547ee533457edb1d6f1ae65a903e570940636014cd021adcf1bcf8b60dff7be5a48212c708b772eee9'
            '9358697499a0fde859cb72d27bfbbb2a039fe1c121690673bd71a9624adc50858b7930da6e6c672c5f1808196ac36b93cd650fe69ebea1f0c8e12af9fbf635e0'
            '3e22160ed91c6ca601133f387dd8862de3f3ad5e22fe50e3b2409efe97f0e3cafa089faf78511300fc3cf9afbefcbec8848f1be6dd4e2eb9800c8067f3b6e6a4'
            '659cd141d31cd1049582df95241b6c021a1fc1966cab8b08042cfbd29489c9875e320285c4a302d8b79b7b9ad1ef3b3cfd32fdd17529ec129c6776a136a735a3'
            '067a8ca0cb87d77972da0f398f5abd5ee29e0fb9debc7f117f227770ee14ba4613b5e4866918a0138dac18d5ae5956778e98771c89cad9fbdbbe8a226962db5d'
            'c3e00abe1b293c3d041d58f59a1aa169a751ec78203665a45e062ca9e567b37d3eec1c9964040015a0d95453c9d634f2b4e1a6b3d9e66b67fc39d9454fda296a'
            '142c7615d50b5366bf287670f1cb041696ace347613c921c93543d288e38d35f8d85650e1df19e61e60d4d4615aa259981ff8afb5c9989f803fd2db93d0ac864'
            'd9217e334ee225b851d2fb1654d1885e861176aab9cc59d2e5fa2b7151dd6e984b19c2186eadb91f0f817cd05fcff472dabb14113074e7ab5933ca3530efd062'
            '2a49ff18711c3ec0b9da481f7470fb458ab4acafbc3f7780fd6f2c0527eb95a82d3de052bd179d8b35bd783ed4a882087efd49cbdff9609df6f3c09f2d95f790'
            'f50109c7f248d8fcc217fc7e1bebcd67a4d0b040c36484d08df6e39854af074c59b1a5b8bde720ec4f965330659ba24e61752f0363181df8f6b0735f00bdd863'
            'c087572e999364e469aad4b9b2855c23d25a8074bd2faa9367ceb6ef6af7c07381d31af2226014ba15d2ad87151581a626c3f3ad4c7b2441ceacce3ea6bbea42'
            'f9e203d01a22ba71e09e49cad625f6989907b18a0ff65539b0495276c3a1242313ec3361f84be9f804017e98282dd61e086ae0fc1ee0532afc6fedd71a7820ab'
            'ca361550ffee692082c720d0383df19f8a69295274ecc63b2d67b5273e107930c322a0409a9cfd3f12d2afc3bd26cf15d2e9f60130f63de8477d97ddf747a276'
            'c13d850fd1d7729ebd0a9fa49de2047e8545fbdee6b0ba743a62f03768852f5d600014f51f6f703a34abb0b83bc640a08b12df7246da73ab6146f123342d5d49'
            '184f3e5ac869339579c87679e58c8866ba58695d15fd9f01900250cf0302c7e3f0033542aad9ab81b278d64f1926e30a1e3f05728f157306eb193702aa153f7f'
            '90bc8bdc8b4787dc69eba196a42f848410541f5370566e3c26c8398b64b2bae41af98d613eb44947fbc361fb73b4dc96fd3a30b03fd8feca1274f05202bf812b'
            '8b949a9e7d80800daccf0984b0e735cce00023a31120a217b96561209c5c559407a89983507d43b9348440c650a80e622ae3f52e974bf0d2c6c1ad7f044add1e'
            'daa2af4736bdbe6640096a86034a9b1a5959b75830f107beec915b43331472e9760d6f55292715338505f89b03084927981dbd9f81360d083614c9b7ed0580a2'
            '2d52efb1106fed0df969131a85c907de14bc6deea79f30cb2b65bf68e22143a9311a5b64d3153df51034df5ad0ae434b9b9f4ad3b27b3c10d4a81acc7961cac4'
            '4c37b052ddb922a23d6e1c82b7b5767445c22b77fae64a2e7c85d19d4cbd4d0696a43d9085a396aff8bc594f2de28705ed97c8d06e6f1d29a8d6a30fa18bd264'
            '4e4ce67c43a636579f68ef7e13e01bbe870faaaa21b91f263ac02459c81882e2897979856750e1753e3e2b02202319c5b6f3c4e90e4e5f45efa3dd217bf6d3c1'
            '0967f17ae34fa75693c8e963865208c776dfd5a384d14f19ddd5956deae69c0ebc497bac5f95e3fa1a27bf7c7f68c6efe5a1b77b0d9e7fd4933031c924b1608a'
            '08cfbe2ddaba990cd4b714e2ba51a6c472f26c7ecb4ac2a81b595de23533cea686f4ad03f7bcf408d0ba8b6b867fb21ab08d5b753ba3add253d4efd0af676724'
            '3c3f16b0d9514be3ad53832ebef7770d9bda8d700a99aa636355fa48a7bcf5f73f544087a8e8820a3a1de1a645c02dbf2e345a3729a42c67f8dc885874204e17'
            'f1f94129f28eda53327a49b509fc76cf950fe0cf75976cc4ad83bce064b0002156d5002474fe3244f6723e8addf446448d36828dfa3aef9e55abc031859518a5')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
