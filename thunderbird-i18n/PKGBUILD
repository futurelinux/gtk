pkgname=thunderbird-i18n
pkgver=60.7.1
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="https://www.thunderbird.net/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

sha512sums=('92803d3afbc90733612cc92ff3081a909a6eb761d76ba72f9663c43e0bbb0ccc3b59c5a11278dc9174d839db7182beeef2674617119f1ac9d01ad8e85b753dc5'
            'efd41e5ded3b7613271f19ad77c0d6122667d499327aa0fe79c590657239647761497c562f13ba2ca4fc931317510846514b491ff86260331cb9e30ac488a03f'
            'aeb87cd19cd8502ce71742142cc9ccdb2afc8241c164cec74ce64f2881b0fc1d50b6b2eabd91c15d8f31f779186ccb0c42a802a3a10c5b375a2d5d5dab109064'
            'bb6db33a7fec0a9ad7381aad865e9877056d102a5839bf051cb91292d449c09793455277141530e7a5cae72b4d64293f6379f5dfd96e38b0d3121ab8aba35b76'
            '61eab689c897fd5476438378ac9150470049c449feb6207c5710de697bdb54b185c7dc9f4bb0f899499bb6ae8526b6b79674d6a79f965c4cbbfb253672925447'
            'd83aaf6ffc7f661893282e92470136909b2aab86cc1e575249d1591609cbf81f5b83f56270ae06a4c9bcefb808e8fb75e734f86519a593850e666cb70ad21a3c'
            '8a1d376a54b537b1bcb15f6d51f6444dd81997f7c9223cf33fbafc5d27935947e223f1a5649fc1cc2a1a3b2365be1c51f8a58fdad1fc21ed933b971989d8f1f3'
            '28a10b69a5bc213e712fa4611f0605a1df6141a292faf2c1d191e46112b07facdec6218847c26a8ed2a8f4707c4986031ba96c1817a460326431c3d09aa7bac9'
            'df12c017462e198a30773fc42e9ae00aeae150b3e6760cc496aa8acb52db4f3c0ece2a7db2731fc944130e52db34928c74ee118dd01a67f5bdd8336147816962'
            '60f38eb1d21e7c1d57938803d8822282e79494aa8039c7b2d4a0e00abd49008d18575e4e1630e03671690112b028057391baff5fefb0a3da0511fa620d08a6d6'
            'e9f751a5aeaf3d3edd6fb85b4ed556bbb9422d48d8710addb26f8f7efa7d8266087a26753eba7a8f674418a15ec3f0088652bae04ce2f64c9aa3e9be48e05b65'
            'ee87c5dcfb60571c940c6359899a5a59f172a794f4a6e1961395096215a7b46f14f2a89e17acc40ce6bd2f0a8c824ddc49643edf823018179f0eeef4ae6550a3'
            'bcdbca661911d918d908ac7855530444a2a9fd7f520dbadab881187bd910da3f8ae7db35af1f647c72b0fa2a6c3d9a338630688edb4b0d488f32d2aae35b11e5'
            'fa0e809bf79d557685c5fb3947d85aabe547671d7a3246c011cc77498dc8e6f76c5945526c9f0dbf159a73869499c6f0f3ad8e1f9e95663edd16fb06ec625b4d'
            '2b8aa1dc08fe33e1c554f572cbead67efe7fae5428089b5257f25866d3814d647f552ed9a33014e0009a7a344d06ef9cf28ba2962b5469e96056127b3f413722'
            'fbbc92c859654329a6d06b177b721c8d77747242431da77af99be0370de41d9d8954042a01ab65be46d545c3c3fb89f21ae5fc2256cdd56015d3f2fcf4ccf0b6'
            '9c8abf32829bde2a10cc6c4c20f0d1678a75895e0194d517e7b631ee6dc20ba09a64a4d3c8ccb945171a7789dfa629a3689b1e496e595e213652c63833afefbb'
            '164f7d079801d1719df7ac0528ddab1d8c820a0d8083bcaa7bd8177504b6e79dc8741c0cae376f512ac0f55ec26b2eadb9542d69e4d641f12e6b7b588fa54134'
            'b6cc97b781265e8d9d4135e8b5517de9661e9cfb09bb07dadb706730584098bbbbef81b4d7a3c03e5691248ef4069c6cbf8235afe3647b9c2fd4a7faa778a573'
            'cbaeaf3af09c07dfc258b978bbe14dadb36443e2c375541329004f9900258877b198fb4183a51bf5e09d00caf600a2e5787a94e3b678fdf8c60b12e0bdf97232'
            '2584afa6f331f0a65963a1dca4b13428c21946a95886da382f7e7dfaec2f6d2a2761f78ffe3630b326952e3726535ac13593516586b6c9aa956f2a4ab5bd655b'
            'a4bd76bf72b9aa41699900e87e8b3cac88fc6e421b817ddea5ecb9d88dc3c4f644bedd5a3dd4aeb46ced4361350c51a0467c6d45242325d2c9cf1df7e7e72ae7'
            'ecf27919dcc96c3bee7153d28729765c3afd7b4a52403b13b5da2223a3825cc2df5281184d6b027a96e864d9b28b170bcdd50a4bfb9566f04ce4c0f55f92ee62'
            '8f147e6c64d20f8e237bbfd2708fbdd80b243b1973ae7c43456a2e71305c7fc91649c7af90935bcc4d63bea72375dc46a2d1c212eea4f9854d2f673e05165a14'
            '1dd5d3529889428e3da4105b5c66307d24e6c39797ef74ce9fa34a520d1dd76d032d42b4978a2135b903127f062452d3092d4c90ab7669566bceef37490303d4'
            'dc620cdceb28bff5e290bc42fa52e45e92fbc63e21e3ec64b14bcaaf66a983418a069ef1979f1b881d356a93b3b36eb42ebe66150676e7d0e63941f7b3f4dcc7'
            'bab3e3bc04568f7c010ec7e7fe34f2b22bd77d1984d3555b490e5784f71e7e7812752949bbe0dad770c9a529331f521ec734022c30e7b0b4e2cdf974fde56a7e'
            'b6d8712d27481e7bc0bf2b7239897c481a71639e82f352dba4e18285c37be45ccc9d12bb9eecbb2c2450adb3c22f4a4915ef67d0bc910406fcca3d4b59bc1f89'
            'b7e437d1fc596296a21ddbb9ca99a013cccc30a9b10eefb65de8f0261150557a4fec92313c553a807cbfeeace969bc73ee02f610609ddc7c640a30235f5769a3'
            '12b81f41a124ae5445293ef9d48c3304c121783a5dfd0966b98e99fdaf22ddc85995d48a4e429a884c54db97b2662b1dadb9f92051532a1492e756ca13c7a1ea'
            '98a546e62dd7506898a5fbf087f06d5f82be5282ac0368d7dd7e0d198e6c8fbefb9a3f2b8399b96c414c9ad6902071079a15dfccb610441f5f768b038903ce8f'
            '2eaebd74efcd82009132cafa311801dad90527a3ff18e6abe7a7a87610fb87980ed5c9e6e68cdebbc413a74b053e0cc65e85ca168c6e5840a0a55832fe838d02'
            '1e90af9f7d67731ed316660cdc6c0b6360cfe7fc833c414484c097cc71d08679dd536debea67605a92be8d1d72bf338d12cd4593431002ca2f64eb9fc799aa49'
            '6c10e20bc61a984ca504ae9f51a873e3277263943957219e45932533c51ffac9cbd55292162b173778892a6b9dc9031669403551751688e64f9231611106e31b'
            '051d3e7bba5492e6ff7063289546cde3ec6f7b18d70247bb6e0b39d943bf2f622292cd4ed24eae712f0cdeeb3e05975e3d39bf42164d427bb4e519f9bdc65fc5'
            'f6e6ce0c8062fb6ce150585aeec69995a9d023700d8c3d652e572c01010c925f1edfec696b063a950a7df1ed34d3ee2f0f2298527c5426fd8faef6bb6beecb7a'
            '5b06abd65341670fd8ddfa440c94a14cc5623f8477f3d027758c4dba70e517982ce26e25dd135053906d56bef46c387e264dfd5ab694c8242eb04d9b007119fb'
            '13307e070679e283b31f811033a608f4e98c007c4f08e6df9bbc1dae8b920fbf451ee3b58ec65deb7d153339f6364221bb3b8d1440487091ec6dbd4146aac515'
            'b2bd274b8798f127ff40b2864315d5975513a98f71d2095bdf57aa373fc6a2fcd688165997986d57ff62136895117ac00fbfbeec93d23f3957193bc35cda185d'
            '103c1d47b9c2852cd8b048c14e9e3fa4b55112a271ca236e36415090a7bfcbd4bfb7382ec772013a2dfa16c06a8e75228c0fb0e7954bdced71b09c55272c1837'
            '38f4a7fcfad31762a7c592f9da1ea9975989dc7856095327ae61bf1a8d30706c67f163e8c407072005d4e02f210654ebcd6c883553a22b170e6fc9691870a490'
            'e043efce207b2a311e79b6148327e2f1924b72a1c7dd8a5d3634cfaacdeb2ad4cf467e019b97a411ff1eadc91a9c3341caa3d4d2bee48c78427e8fb3e20d988d'
            'b3b7a94501f5bde993be50588ff8e7ecb0426ce996aac462c1f7364d7c06d24bfd87357c0a1d030576312cc9bbf0ea905fca99be435d3ccd308936c69f504567'
            '26c04f8c429030e39662cd5c6d9fd4446f83bae48820930976bbe74b05ce106485ea9b0de4011f079009d1ae7cf0a2035eb44e8560791569612792ea340425bf'
            '6b3aecf014d4d471d7c71e9e658dff54fae3d12187dd87227363612adb24ec2931b16b84fd7f9309d4839dbfac729a1edc36f9e19324a26ead0c8a00ad6a4f2e'
            '15d4ae43795c1fa9058def871034fcf800e64d29612c0d1701964e972809d2ec477b90ebc09745d844aac94eecd571264e166862338dff0a8530dbaae1aa6a7f'
            '664994e70158e152cd49d811a26dd8d313e757fde80920139e8285505c96b6f0d58a11763fa4e3340b5ac655afe32c02f8eb90c09413103b7f45f3ffe76f36d3'
            '0d17db303883bbdbfa65e4525003f1e3c2a5faccbd8c4449df8f343de6a792c99d02b363215867644de4c0fb5bb012446fa5f739e051bfb441520101b5929de4'
            '694dcb553f5783e2d0969bbacdd6033d12de018a8b7e309e90f6251fece27242cf3e6090e14aa06e4627904f6c180df2ba0a0c81c9d4eaac5383b58857b26c1c'
            'd4cb29bca278699014463b9aa749b1d30b4a0f4d5b65e3f8b8038d8010e418c292892cab9a680ac90098472d8e65a2b0922b102a2d251d685bd8618138fa7dc0'
            '77b4f22ad96c5755720b2fc2988d84da4d1aeac27944223a80e73f7ee28fbf8886c017947d0d1a95ee5e52d1552855eafbd551aa9e0108ccc592f0b9734cda56'
            '5fa143cc39386af2544c65b5ae94bf05ddcd4049efae3705840639b70c60f3ac646228375f9ea70e97a0c7e58675bf097c8aff996543a280970c951bff54e556'
            '16d0edb61b98b380abeef70991571097fc04c88aa08b10c24c6643abc4b46cee0a9682eb1744f1235b44f5ac1d9c206c28dabc6404cdd6d4f7a60d5e108fba8f'
            '521772f2b37cc8be6a684193a210ffc7769d20344e33931e97dd6ff276032b4f4bfeff34e12216f3a3d8941d7ec7101d06eb03a9ec1d40d11ddcaa3f08acfd64'
            '3b91a1fb2d7ae4066ecfdbc69f321d74dced15328b4c3e8b5a3581692184d26205f6c82ec416795cb9aeb09564ab1264d043fe484cda3572ca1e4d2e00171b12')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
