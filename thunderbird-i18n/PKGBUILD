pkgname=thunderbird-i18n
pkgver=60.6.1
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="https://www.thunderbird.net/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

sha512sums=('76a92d776fa1efd6db1a312ad6ca016ca1cd2b70eb62ed3e309417ee02a2fb78112295d58a0d1e092cf1b36440339643a3c290dd1098c6087d08fa39515157b3'
            '66130b52317bce1b92ca6d1922d56c062196bdd5e158239640e1d040830b5522227f13e86b1286f6ebf569a8de5491ab37b4e8d7af7c5965b2a7e5b14509235e'
            '95a8afbf179697f819704668951907709033bb10d7212e7b6741910b39960a7c9800e70f343022185d716ef689c1c43e10718d5245c64db4cb5fb128a3b641df'
            '7c64c7b1363c6001d854cbdec400c28d775bc8fba500e7c743eb254604d5babacee3fa1c3bd49e48a523d73a5343c07d1b7f25c4d2580f07c5f899e88eec0aee'
            '0fbca5fc5a2f959d620380831c37d8400da26f9bf7f190a0e62c6fe1e92324bcfaa6b3650d2a8251faf595c67af7a639147ecce70e1040461ab0cd7ef077f8aa'
            '7bd0c671582543825e1bba520cce6a86fc8fc43a163aa66fc87a2e02a27b4655c296510c069e54969e1db58666ac136c8a3f98d18b7eb6a562ad91e6f1a2de69'
            '1195c6b4aa8d80222af7c05403bc32a0b61f3fb38c99361ce1da0face6ac9346eb2817bc27b1d07008fb05aef0f680a11cc43369c6494fa37a7330356faa857f'
            'f9e1e3e41e5eb3b2967acd6c4af53d608c3cea47a603b31b0f95980801274a9378646497b4831f8feff48d8cb5f58734a8bba8a319c7138bc23d23ac4c998d34'
            'be8c3e97f757e5d1a136b4426937091cbedcd8e4f8b34a0c4528e4135840c6f2bf21298547f7f0dc520cd94322d072ae06f57907104df09604fe362fc1c3bfb4'
            '35aab53e32835a70b78399385332497d9f3da61837d02cec4a022e467b1898ea856c62307a943fdad48bdd0841ce50967525adc935ef3d612f1931ab86336f95'
            'ef56b50690695d280bb2166d1755b7a2bfe5cb4d34725286ea2c3d0eead653ff8dd219019a1f32faa5ff2818171b58d0e4195a58109ffbb6a84fbf303e2c1b30'
            '20a432ab1a333d1d00b05d9c51c8ef05dd0b647574702dcaff53a30413b751b651c04c6d170906dc95619ac8a6cfc449790d8a3e8ec518fa4c4a04852715426d'
            '428b34d4f4c306b02d7fdf0a9407592f09ac7df28cf92a11b20e465619ce390777613a251ecce2f58f9e6630b805f5aaaab693bbdb23212fb4070eff019138e6'
            '9935fea70deb3d753298785225e58b260c791baf71470f69e30af7e87d36839cf3434f13e98517b63a88078451f1d92886cc0bc82d2f87a31888f90f2076396f'
            'c04b8818b0cb74621519de6f26691171c9b5a962ac805947b377a59a0947c4ea4e1790aff820de0dd25f75da951484459da02cf08ac13272f2789df7b3fdc6f2'
            '6770519f277bda76c9398ff6d5b5c558b9af91df16813bc7669c418dc050dec0b590cfccdacf90a346f0aa7dc980272dc3ddcdc42a20c678d730f48bdc059ee2'
            'a5118ae5d512d67efece65b5850f8409cf6f368a49170922e8fd085f68f7898686b78448db4d299fb6f5e36b71e309ef336abb5c22cd0cd48b80771b9a1d675c'
            'f91323065d5d504cabbb35bfd9e7e58a743cae0e6aa170d20ff37223f116ba943d4b0d4cd1253dfd69c2c26b53a481e7b4f68ff8cbfcd062bd09d8167b0868c8'
            '536ff18fa4c70b27da626161ed3c9d6072eb0d6eb33845a41a0170525bf8c2606b520fd3fd7082dbbe16a32dac21f7feb967f2e38683199009bff91dc0fd33ea'
            '7f9a9bd291041fb953ce60a36fe508dd64014e39ba31b0de3f304f9666ef1993ac95babce8b0c4ee7b74091228408904ee47c4719d3569293b9904c899fffae3'
            'f734d8ef90b5564be66a8ff408f48ef079c2281b4f86e17ae75a890b2493c13476104d3af2047b7b1873f56e1695fd8aff1f88517a37a9db0dfc0119cf28d1c6'
            '1666dc8580aadc288a9d55b45472bc4a0b142b028e7b618467256827caef5b13b8bb35969ddee00f438092433b69c87e6fdc50b5a0d6d2f4abaf09c5279204cd'
            '5b1a1459b8b86760223906e4aed08f8db333e90a0787c440b1a6aab52e585074a1fc7830e256cc5100633bf9558cadc6c724cd0743d800c2a1c9b96706acf685'
            '18d697932c0d876dc73509ad7503672e3cd9e4a02a24ce6fd6fb3dc952672b912bf9faa4f83cecb7163f1b61b378a317a109d34b82041f6fd4dae5c8e5fbfea8'
            'a66b5ef0762b8f8e5bc5e3a7eca502d1f6f8361486cc9b7f553b620a1e29941d0e4a5d2469345b74227cea7803d837044ef591464c63762deca22e52b2635548'
            '02560a03cb36a7292f7b62d542d8da4e38ca19ac8a10708b79e9d8fc277fc4bb40c78332ae7b59b678368417fe1ca0f7ead7a80d16a99aa9a7f5b217a9e1e394'
            '0797df56a44d4f6668b98b8de8d8fbe61ce3308f68e87773110d37e4ab57fc04a6fce525bd6819e3fa1c9906182dc2279dbc3d7949d7a5d314506e21f42214d5'
            'e8a77b8e2061e341aa4cee80ab54dd6a0a2f3b616d1772965b8b1b78d882dec8932287a97dcefecffa031b8737d8aee326cc84f7eaeb8dc2b91a729fbe70c666'
            '717f66080450dfdcdd2a92cd7a2e433b1d70b3d9b86c75f9878b62f89d9874b197e04faf30da3f1f4b79b707144b021111cb766117b838e7d79156b4de709655'
            'd493e3af62839d0496f0a1706eed4e98872a4a34861b8fa3073c97d137ce241994e1c4af486b61a3b5025fb732b455c4f1fa4544f3eb4ea03697b13d49a62941'
            'c2a6653b96ca1461ad3122fe46912fc03477dd4d389527f33ff68d0e0b259dc9db516c0dcc77018fc13f77082b082802fa8b53b012c22fe86dca61658d754375'
            '882bbd0ea3e3bae627141e401c993fb20074b35b8af8c88f243bc8e96cac8a1eff8f52bb3fce70ef1ce795e9dfc6fe9e22886bba15b2268fa7856f5f9d7d286b'
            '9e9a260c793bc24a672993425d9c79595d9f60d77e471ede66e47655f188651bfcfbd792f6471ae4a919c0995ff3db13664718d6a093309d3a2c5ea7f198fbe1'
            '3b5e468ef74c1263ad39bba3782c782a435d23b42396ad9930ca2ee1bdaa4ee63c7b997ba5311dee713a698cf153a3049b256c00a5d426990ea7fff9aa9c5537'
            '6ba6e39b76e475b69323f6884011a75c96996db298a0fa33d133926b5b8195cf59f0a77e77e175c76d82219d4dc316b9eea461260bca1d78387565fde6c3f8ab'
            'c99c3b848b1b2679b7f9efe991e9fdab75347f0b099024f87de4513aa2788c7f1ec8d5bb2d3cd5cfc0643799243c34a22fb953874181c7f26993c7ea9effbbbb'
            '33ddfd5a506a172e336650d5a4146fb60219c716713da11f351760556148d6244836fe332ad746bdcf4ce016a20c93023bcce98933f114fb360c096180744598'
            '2ce727232396c2d9472fc8064defb45ec851990f08091d2aafa8ffad82e339c738877c5992886302ab52e3fb2c554802008f84e11c11f0b5dae8f19ed2c148c1'
            '26466aec061073863c4d3cc4c41d1671b8014546158e9a823d070a0012b4c6d9189d9be0529d376a65e12365d2e5c06856ebaafa0302bfd013407c7d5fa2c225'
            'c67567cc20300f027a7849444a39e87ed0c84aee689d8acf0a5c8075fe9193987b777e64ba92a1c4f2169575c9ab961b5c09823a83d3cb8088c39876d9ab366f'
            '3acbe9555bfc133d55c6b52665d6ad1861a49bb2c48af30c05b6bf280a58430451f0e5a633b3316b2af0a8bb42c7d2899ba08d23e1b478c66f5eaf32e792f194'
            '3b261775cf3fa4c49e417cc197afb1d195133e0eda79357ccb8b8f72ca55ae19883846b94791c25672c77c872a4579867b71ba10c5fb5ad81a6967685403458b'
            '9df01a511f05835ba9e16325a2ed7560b950c1838b9fa4fd02c3e699462a2fb87cb5657a0f5ad6f8168116e8425a20f15c5be2c623ecf1fc0766229e298e2e78'
            'a54deccba86914d8329ffef7a88e3df713f5ecdd6f8097d521dcc3abc8c998b007ea3caebbb3a11d1cbff5f919bb3f6865e95a6159f90fe8c2b919194e5380f0'
            '05535fa042e4132e619484a0ed26dbac4f7f994b963247c09c80a77fe65bfeb874ad7ff37ce55580c9126ba31a2cd9f8ec1890935e73a4fd970c81825aa08f50'
            'b17f9dd8da97747ad68f67a1dc7fdb16c7bf767f0b4ac48fcb4097e919ed5a6dbade8fdec13983e8eca28ed9c0e93b9bef5afc58c591c13f997e882e71693a8d'
            'fe8e506c59e99c82676df6e96474c3cd59bba3d4921de8e71f197901560e95467601b46131d16e385d50d6126d074171de4577e358fb333491c35b89e5d51f14'
            '25a624120288739b3c3294206e520e6e37fd7ffcf9852a4b23174ddcec9dc54f7c86f8301841f0ff2c7be90f8695bf00e029fba9878d31a51fb23fb649b2e32c'
            'd8205f60219c3f2be1213c8cd7cdbae15c7ec8324f32153037b30369d3e195a4c5f18cf1496d0b0b1ee200b48ff5108921ad396948a00212a26e5b2f55512786'
            '8bf32c59a206fda2b2536bda12b1dba06ce2e63579211a05396d516b49e6daed0b989f706d246b8d6226d85616c48d0e1cc61e1c0ede41c5d7049fb28df56203'
            '10828d6ff786a69c5f03e4fbd54df052a44b82b74b8b13b0237d225225e957c431ab8f782dbee4ba12b0b236655111bf10223ff33c28ec646c7560b1ab77a334'
            '16ccd2a079a9219af46568f2d087e35cd972dbf5dec1f67d52fdc1916b9c6a60b7b4c566685c9026bfdfe9b3f73ca03eb6faca9636affa55852654a22d7f3567'
            'a509932fe2ff82f7cb9bc9407c4253359d24fa60dd44795ce211a3488d1e49c4c56b79405dba240eaf0f60f3f4ca4228c7e30b064f339e7e53e0884d1be4da16'
            'b668158ff20baacfea259b17b9b0f1993d59352b3ec47fa22b5fd337c8733fe966e75142b85fb65d6de30dfb5fc6be48f3fad6decfd9f0cc467f68bf8c49c884'
            '934f9ea341619e0eccd83472bac778767f10f3676c2d072f42301aaa9cdc0ce683a12fd51d9981fffd6b26cc8a61da0ed13b52f9b97914b8309b082fc4f8736d')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
