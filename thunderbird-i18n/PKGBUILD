pkgname=thunderbird-i18n
pkgver=68.3.0
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="https://www.thunderbird.net/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

sha512sums=('eef8b1830ec2fce91c1adf8c3c6dcaa632de94d7ce7e48724d0026c4105a4b8e057b5bac62207ae24ad8733a8621e0ae9a13f1cb94d92d84f7eb0423eb23ac8a'
            '08e6486b25e715991aeb28c3ee47f0216b1183d7aee7883f314e6b24c32ef34a6529dc960ea8452d2d3798ee7f24cf588a536a69d019d1f6fc85a101dcf5610a'
            'd5d2cf16dadb1a3db3d4b5d00819142cd1e2b9fd6e2b908739f82f85c89c7af8813e68fbb3a382cd319b15107b9f948b54147bc777245db9ccbf1f149db72dde'
            '99e8af121c42fdcd1fe734ef472e4eac6b5d1df8ff461f89dfb8a055a7fc8f7663cd99c0b2633ed719028014ebc0ffc80eb31267061ec8008874bcfb908e7dea'
            '5b44fc79fd7adec90192b4b426e5a00d836f61d7c2271ba3276d4adbe761dad267d921760807316300ff74651953ef5be93bba80a3b24955e27e9fdda9d21e8b'
            '0238989d3f310784cdf53a95b6ef1c873a241922f89cc8c66261e1f002e9f04d7f25d3234cf42979fe23841200af6f3af871122a471e4b8717ec9db5538a73e2'
            'bfb30e99456197158c1a715d2f468c97d990361916fc82f79cd28e94433ed2d669645d1285e8f614d8b19c9506a861ee9258fae0a28f90d59b871ae5b1277be9'
            '8d5ff3e083a9d22f03eda8d1e987f180d93b80c35920fc3a6596326cf202e449c808b01cfec2e9af84fbec496de679b92d53797c6fcf94f7c3bbab3b025c1f97'
            'e1e1fe202bc0331b6ce6d34b590bc3baded447a4b1498e2219ac775a1a61403db391b30e2cc88bc3f84a29b539bb007880e194117c4a3779eb6a5ffd5ce4fd9a'
            '540a3d998a9e075dc0de3a82268b1c7e892b407a31be1fc4d0ac0af368306194ee4a86c191ee12ee024cb3268e9c77aed8e48462e36b4aca74dcd1be7d2b6cb5'
            'ea525700fd5cd773610fda2a99f1f671c67c8898618fd5cc743f07f60fbc1d98472142e653d81f0040352cabe9c8810260e43b433db93084f24a2a3098f1b6d8'
            '222687f2a4dfee344d06c3d66ec8f3718a9f59542889e4092de7e75873c03864b2fb820d8a268669b28d9e73532a35070e214a62bacbe47d1cd82c00651d18c3'
            '45c7329aae7456e8dbb2a83db398e191f2589d518877af7762bb60dda8003cf7a04bb25e49d0155fee5fede87847d68075e8047b1ad11e251358fe7f8851b4b3'
            '90f1f4b0712de7deb4372be0e4438519230d22d97037e554eda99d80c9ba01d7a4c992fe220040fa951092bdd1e629d68cbb429839413d6790b6f09f7dda76c6'
            'c344fba459bfaae9dd09e89990832795c7f96335e4a15387bef172971e5952f231198a374e3c113fdd47be3d06c6d0101fa9dfd56cc31e592fef2990425df4d0'
            '118deaca4f293e611634d18d91662423573848b5e7a1cbf235f5c99b1914697c10b225ce2a72eb8b68f79f2416670b9dae1c0c562ba5c4f48783a4cc3c86bf92'
            '8e1e07a3d824bb2bbfd5a1c631f561dae133026f853525bac9c4a6947a84ff4c287e724c8799dbb59cc06f73d90acb2a5809bb8cc279f20e7c90d7e8cfcef939'
            '6986925ba9292815732d7e905e621011abe86f6b38605257e9497855033595a1d3175885cc54b6843d515732630bc5e4f4990ddbcfce371fefa1f98f8e80553e'
            '2dc58cabd19dfd338f6e0331cd3b9b786096c368e706172a1863b06b9ae70cb56b858910e9da7e64fe33c4ac99f6c7fa35cc2beb138c1ace382b40cdb6e65792'
            '5e9504b0285b2b5cf7f24a5080af49ec6826d65c528e68a3fae8114296a08b0a27edeabb0b2e023813ac07bfb81a13bcbce650fdc0e8e143f0226429e4aa808d'
            '221a25f721207248567c85369cc13956ed0383fb9e5d39ead8e8680280970922e33ef719d674f3eca2aa6eba2b38086a9e4d17044bc9e6e1d0094f3276817b9f'
            '544f1c28f0e3b92b32a999d08b98afff592f5266c9ba6bf2d1e4a9d931cf8fccd0eba0cc302ca60dd792449ee7545e153afa5d0d02247630675cfa5a070fc97a'
            'f501fb064b42e3d76e184899a8e5844b529c98153416c0496ebe07ca98bce90af52ffb6a7718587b8c4eb193b48a5f414f718845bf021a6dd2068d9f44560365'
            '383cff75476af0cb186254668f41d5141f8f211e776e26e5acd63a004ac798488774149c6218908b002e29e8bf0428dca82e6980200bab3c2e56ddad6a71f247'
            'df4d77f6b6a71da7e4fbdf0599fff72aa59c2f366880018d6733b8e5ec02a520db2b9e036e02c6d0469d0a70ecb6d68746cd833f61c1d669a0ad403ea1143ff6'
            '1545275fcaac9a6f76de634f6c3dc87579df8ac1600fb4eec937fc1425107007cac500225a56cec696e3d42d4fce4f505a277dcdaf31d04189c19f1912147c84'
            '51f4b53b82bd091e78c91e4cb1a1d7912ff01b9e28aaf7cb8b72ab2d6769bb147c249236563764532e44e42dfc733e467fae4d1277f11133cf00c5ff788aa20a'
            '3334539638c7bf627d71163b1d2cd22f23c380c5c041a2c1da613dbdb373b8e77deb1fff4ad5ae645bde3d076febf7a4287da1b2db7a53f87582f89189ddec7a'
            '704d58e597809ebbd36f947be136044e6cb00e0e1453b1308e53e4bf6f81c3be6ab021b2877fd6efd25cb9b2c2429a3c0def7e530420975e221bd720f68db61a'
            '4f611802354100e7ddc2a8c229deca1263213c33dd03abc00fb156af8f88a63b9f4f6212bba5e9e92ec9914f366af9380527e7e9c4adcb28512e1ee81cc60d9e'
            'cf2eb20457709c4ef3597945efcb4629737fc6099ec5a40d627a36a4f74981010c9aafa2b15951319330f2a11c393f9092c909cbeb603c75edb1e3d8f8495b9b'
            'c6a2583e5462b00846779ffc0ddef2833050ca4a4b3ad00310eca9169102e7e8914f482facfdf8f3c466d0b0ef49871a66cb040e9371cb54588497276c548153'
            'd267b54fb2bd8448d7af659a363fdb9c622ea2ebd52377a1ca2e590be968350e9f2ac3d654821a90c835fb0f24454335cbab14d8088acb43ad3f1d9abeab83a3'
            '166faf8d5e8592339d2f5fa357f7853ef903cb9f95918141129729a8831344fd8dc4d1aa7209b99d4ad71ef01958829414a0e77b94cf1010a98752b073e556f5'
            '06383a5eed292280c32280e631d72f9f26f451689651fd2f559c47205848b7b092ede326fd31f86bdad4c9e1bc093e83b6e3dbd8a02a9f0034d708736f61b77c'
            '5ccf2e9e75f8d4b9761f7ce74305334ead26d9f44269a62f71c4085166dd4ed6b1af9e6147e3362b85cbc3d4cca409b1ffaa66b73682064af2113dbede3b9787'
            '3d0e0ec787e78d69e3126dd52b1732f2e8e28c03d6173e96fb098cc24efc275a0706ff7c2dc58c275b934934aa7e24b6682f37067408b1228029439fd0609b49'
            '6e1e094588bfb1fd79188ef6334c5a2bd8617f2fb244ad8b8b14f925d1ba91614a565c6fcd8db56dc1d0404294d815d4411c096fdce7f464ba3195334aef53dd'
            '89b54b8266e18b5696502d1ba6cab8e53bd1444f9677270e6fcbba597d73f0cc684b6f5ffe17f37064f4205bbad7b8ce559ae16b18e2825eb009cabc612a1fc4'
            'd215892fd20f4f74bc9408de37e0caef2b53d4f9106fb8a9e751c247338a79d6b54957f104cb0172ced70ee86f199bd546d46ea7a38b98190bc82099ef123f7f'
            'aeeac645c17e62c233a737a1d673e229655d0f3e4768a52ce2657723b1874852c714a2f48a76a5db558870bd4645457afd9b38d6d3b3580450114db889e14fa3'
            '62f35e9cfc070f211a06c863e089365f773e40f4624905704c6a16db64a312e1560691b90db0a27ac029c41aff58c343af8b7441290d241eb394a53c11891376'
            '3eef81b97a7f5cb1efb84a1685cc1cd023f2c2bd35f8a285fdb7bee56eddd0a12750aec38d3aa067a79dd32807ce997bb6694bf727eeff9dc55f2faac3d5fcbc'
            '31ab532dfc99df92f97d0b818477f23ed06fa3967de418f756c26c02a4a270b501560fca359bf91c61ec643e1ac3c185cbd49bb74f6dc194a9856af4d6bad76e'
            'a2cb64f388a3a1f43585d8ed213718d10f88456a7e98ece05999850afb38490a05f7c8ee6ebf67565b0054217260c23782928370e6830c02c5abb869226629bd'
            '148d483cb276d145c290789371a7473fc6df168866adb9c19ed9ed77c01214ff164271ea799021d2f50562c51703e0dacf5f4ea2d24019ab77d539440cc71fca'
            '982989131ed30d2765a140861208db58a8b87dc04c89da687d8e1e534b3221980a470c8944875bc4dabeec42258b705730ad31d9b7ed7b3bb8403bf8344006ae'
            '9c154f646af00d5ffe880f9bb32e185746cfa7edc9163b9081a201c4a94bf6be77e6d9d8926ffa08ea42987b7fe3c81d4927b5a4b7cdeccb66120d81a3be75b8'
            '70b2aa3be55fb87c54e3d1b5ac237b5130784261060a24f824f1bc5df2777238b1d60f9493cd381876c0faa102414f6aff7ecd873f767e9cbcd1080d771a0815'
            '54132d25d21f4703415f222e1cae92f70052b6a59b8322fd14fae39a3bb34e4cb88f76011052bba583c770e14bc98535e45f79a50820da2ca853b7682d71b3b5'
            '2fd9ad18c6756fafd2227f258c1511df9d7b34715640c4e6b2473b4e3b0cdf1952f995d5ae1caabcfc7c9d3714e03c1d91a2e7c5cecaa16e4adb485bbe22f0b4'
            '21f24d163a8c250b3d329f152f0fa0ff8a5c69835810a81640cfaadce01a1b8214f7644719f1f63d531eac7cabee8e04d3beb55b826c4829033b1b01c98a9be2'
            'd6f9fe7daaf2552acec59c924daaf55bd5690ef83e0c9e0b1090c73bdf85ea5675ae5ed58858ec90a04b347c224fb13c588cbf25d601b9ddbc6fdb18ca780dea'
            'c42ea1b005a40ce56d8f7e40ee66e978f5a9fed68087ffc1e14f489cd585ff0522d084cdf9c1be2d34b615c23b97aa1e392775963f85c2c1a5fa9b06260b5024'
            'b244d06d4a30ee404caa18cea07882eea3b3ac87315b376a669b4fe33129df641f9eabb4e7a304dbc2c2f8698814ab19471ca729f02fd8c40269c09d1cf85a2e')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
