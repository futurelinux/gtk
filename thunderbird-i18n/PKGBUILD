pkgname=thunderbird-i18n
pkgver=68.4.2
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="https://www.thunderbird.net/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

sha512sums=('0df1c7fac96fdc7dd2c4814e17ba32f03151b071d0b5a72a28f2294534c6765744d0ab3446e7158b19028fa71bf2e358d62162f5156b39b5380d2cd22688545e'
            '96a34eeda73650fdf6080b49069ea19caadf34e33fe51f9b3faeecd50c2f63d3e79ee71d9c8709aeebb269a5c2fdb9e6424df3d4a4145879297c3f031cd6f6b2'
            'a214048352fb4ce73de59a5bd8cfc3344b7b1f30da5da05bf0f4dd7cb30573abefbf475a8854c0553ecadd8f4219cba346d2d5bcfe56bdd18d698792e8a67ccd'
            'e9e09116aa1ae12aa8b44f326cf3592f62bec8938758ad02dc25db0d96b028d946ec2d6c3cd2fb61a32387c1ac4909d9fbb72af94ec7f4188a238691abc6249c'
            '30973f106cd8865017f0c0e6ad999d668dacf82fded859d0c97de822857f4191dd36d9a68edde7ef9d3be34d3bdfe324b49455b2632ac9928ed0fb282a006836'
            '9d939f26cf2e6e2466677375e1beb3837a152c399376bd7dbb517e4c17b4fd2ef5894e716c629e28400800d01436018833eea2a3dbeae5db4c4ba0e72757c615'
            '73d5d0f9a2f6be098466ac246277e7dee3046863acfeebd838221c9138cb4e1a0c6247762a1e563b2f100c8c3684be9c1089b4b0bdf7bd5488b541df3ca1cc53'
            '3efe01e383064f44a2a1bba7a17b31f8c16e73e80dfc89d61b05ae7b8103711a55d541f58916ccf982052ca44dc539e93d52e8400844c292f37a17b0a322f4f2'
            'effe18da210d4ca99d3f6f23de473474eb0b37e11c6c9ec93488da6c9710bdaf5298f447c96ac2549231e9229012d77a05c9cdf0e346463133f30648a39aa304'
            '09c8811eab43b463c764dec75f655021085d922c2aa1d32a302818951bed9fef4567efd69f2e1a7fadc5c0df8680fcf5598f51741bdc56d265c75179eb40444c'
            '41402bf2ad5a409162df8e836f2d34a645a4bf47a7e858e206a32e452caa6a023cc55e697270d4333637fffacde5458f29cee0a39d0592bcd96410cf0229cd31'
            'b9d20f5368d0d4b9ca76a2390107a6014707fc71ce86b57375f2e8f67b1b61889a3e99672a4eff512100945e0b5a977a8beaca0ab50e01e5ec168046913f3e34'
            'e1e3cf10caa190393250468ac647e79cee9c79f570b1d31106e75e3bbb3e13a53917e0ccea6738eccabe2fdf3130eb8f2a0395d685621cb81841e117d91a9bc9'
            '5a666d7a5b6906e7d43fbe1d220d98702024cedfd40972a1ad01fa90b077c1ea803b44b38b0bc381e3652edbeaf1fa3d1392cd60114784dedf7ee5077829f1b8'
            'f95635dc14881e586817b02e2cb5b5127c082e03aace90c558342be19a49265165ad46fb636168c4c587fa03bbea53b0b796c963b3fe51222ae8205d01215556'
            '2b55612fd65d5d2dee57447a4c08217bcd9fee13b298f37338c3d2601e90f7fd63c621d6bcdeafbf49a135e554c00eacaac5fa9622ff8cfa0bcda7fe34312e7e'
            '2f4410bb6f65d2b06e79d1c3b791f2a68dcd0e4d1595f0cdbb0b13aa87af08f70c28c8c99dd81e9e24f461143c6b164930a5479fda9198a3cd6de676d41f2a0d'
            '86bff933ceb2681c36f04b96afd775be7ffb2405df594f6d95c263ff3ddcf6bec759d1d094ab4907d63cd4c0bc6206c1464d3314c6b140cc3eb546ca03b37c67'
            '11e9f616a65e3a2955fd250cf21bc96b8fad6bc177e1f2756f28c01dfffaa4c9e3614cd8207416ad9b25dc8746b3fb59e81a4c8fcec1456cdaf91b64e957019c'
            '6f38e0c14c2dd26dbde3a3ba2e5b52a6b7d705cc0eb600091c7d060d40c97bdcefbf3d711c43c4f1bc93a614694b69db4ffae4dd1914b43aeb52f7b98ee337fb'
            '2f47116181b874f05ea2cb08a55ebe96a0e336cef33f66186ab3720d50dd8c79aa97cc829ccca56caf0bae16abf434d016b9b2a6d1d0b039aff7bc6bd9554f25'
            '6f5d1d1319fe359a554dcd8a1542dff7603c02c26dc83558c388bbcf0b205ffa2c118b37fe4a290e3ba5138c53a249e24606f508380c2f055524c881d093c008'
            '0f6492f46dfb2ebe941bb763395b73a5b19b7c13a320016a5a4be92f07d1d4f7481ab8d3ce0d978818b2070f6cd8889b0ca47a3353687a5b2bcd364af9ba6b98'
            'a44a3db4bb9bbd4c2a9f7ef01700349bba87cf732bd284996437a44549eb4623f1638b64d209dfab56f11b08d8d8ae25bc81df941358b775323757e63164cf8a'
            '4c66728abac99eb2a5931d861ab21618f5d5e5a4d137c57e87de1a53e69460aa0b7c21dbe84919c7204b5f7d3650a030885b4c5c98a317a3337efd59ea68d4e1'
            '4e8b5b8fab2e033f41c461bba511d14906d635373a3fce25c4ad32b504ab12f8ed27ce2c8079b44da95e623d3d8a19195ed6a6d4e86b2918df42d1ec256cacaa'
            '10dcdd72454765e3d10d74ddfed76097127fed03cd7bc112e81ad2199cf87194da04c8bb010e0574a93f32c982e953c2420c5728bb12edb3c51c89061b81ea97'
            '76fd2b99aa553f02910fab54419f6def8c912078d226ae926e6cec90317c5c4384900e6e553c42a70391534b962c1cce38e2bff48775fa2c3a6e1df6d49afcc0'
            'c6266bf93028521ffeb4a33d20dbde11ec7fb68c5ffe782b36a4a11e0c7958deb9e1b1f12078b056298064882f61967a9e88241cfbd714517fe63b6f3d3f2099'
            '38f410527be776dc1c6a138efbe162b99fbe3ec6f3c4a6053658b1de0965a1bb7fd47d998f5dd9b9cb949972b26b2c7f8f0216d1591cda9110824e37db5b7adb'
            '8e5f0bdd5db04d027aa592c789c098d7a94c7c6f2a962741b1df75aeaf6e971782db27323822279f971c90a00fc7004d39fc0169a0e8f82bbf97098b94bbe7a2'
            '9cf9d240c819c8ff87189f00f50a03d9c5f6f932a8d8e181a42949f4589b92fdbd314d79f67af47fe8f44afff06333756936093bbcfb93ec14d47b556d3d28fa'
            '04d90d7b2143e5045ac34d04d526aa8c315e0df118e4b634bbc341d96afd302195ea8d04b07405aeab2d8aa72305e3a0ec9b6b8d9473869bf56e12f77ea45207'
            '165b19b36a9fcbbbab8474297f8263d1c3f1dd58c71ad5a43803b24a7e3450b5fe41583111628e93a22edab37a35f96330553b327ff4e34d1f577c529f2b9a67'
            '1d9b05b7f882a46556a0d3039011140c512daa8c40bf1405dd88a6b9a36424052335a869d476af2cea135345f18da4573c72ef2a92811a24ecfacabf719596fb'
            'd093bf6ce5373b5ddb1349c9ee27da6402a6e75a6f828a6d04a11b40f1b760dde3a14933b17fb2798df1ad58f1122f7e2eea240844cb870a810d57f20f901a38'
            'd08b56695c98f84b11ce874603dcb0df721f97493500c66038b4e04490737b953f4fc71bf5080f35316ce97f3ba61b98e2103a5413daf8129fdb5b5836c014a3'
            '79d1220859d82788f7bb96a375c33174e418319ec5e0925c71d516f308195cb1f27dbd112e26e479fffe56e0bfa0786f4fc9c01a2bf966f6171473d286f9220c'
            '9b0244dfb221bbd47358f14aec4d845bedc6084696f1fcf7c769e8cbd2f54e00a15fbc0936c4d1984cb7375545abda62c77eb2260421095e49919b35f0dcaa41'
            '11a432eeac8eaff92d8943d60bb3716bd79d50c44d4b666c09b4f05127099190619778cad9d2dd08ab3a12c2795cd026c2798f973bf94e315b85cf10bc59d609'
            '785a1ed6070dc49b25cf322d390feb5aa04f6af4516a5d96f4e76cde6b25ff3bf17e2cb3397e5405e4e1decb4cb65130efa6140d9999d47e818a9430ee2fb0f8'
            '1b2c026b4831b6d91a029a7fece728ee3db03a3a0df902d1c3f3be1334f123ba4e2b22a4c9df7063fc8e68ec9b31941d6ec07555ce55af0437e74a4824296af7'
            '9d13e85fa0ecc5784dc0a50d89059af790a723e886a875133df9413ae2c85f12c1e4b5be4e67db4b9f3fdb095cbcbd7d92a3504b1dbba35c904e85360bb00926'
            '360fff287cbd20779d14fb25e5c89989a88154fbdc87cd65213a68bfcf72e131c5d4937367180d097d4b713e6972f4502da63567c9a3776603279690c5b34e55'
            '1f970aa9e8566b484c853560c5b6847e97bfd57baa5f01d5f0807738fe30f626ba0f717d28e2fee544231df784a9673b37d51b3e241e6f1dca5b21df954a9b81'
            '97ba9c390fd1b8798a2893f1057f3f3132cdace1c38fa7d1d8efbb66c02e20b8bdecf8044a38ad33388f04241ae4e6d8a3d797016b1c3811581806cf808c4186'
            '8311653c552998e5d2e24e6c9bc2e0750a41dacc288809bcb7bbf5f7f51e1bd86826c980434f7acda7e5daad3036c3e262fe19ded3a52785accbbfe7fde0d035'
            '19160021edb1b54c38ee50b8e8d23feaa956d4f095f6c15d04b475b8fdc221db41f62933bcf15707ca0f3dd7cca808915a003ab2867260cdcae6c2be17ccc607'
            'e2ca9c94ff07a0598d65962604a6d980dc6b318849688613334384319d34574220e7c7a6b682eaa66b182e5e64b7ad0509db8399883fd8b58323ebaeb18bc5f8'
            '84709e8540e75b37bdae40a5ba3f3f34b2ca020a6796709db2929a3ae13e47f486f9305099a32ba097375ae56d2be4df8c014a1938663555d3500cbf877864dc'
            '9e6c890d6c8916e79568f75116b3086956cd43252d95c1634e04083da32c007854d96fb96da52ba1c3ff1d07de9300148c2ac715945112930ad265f87e5df3fd'
            '3c6032b4c73797a9e2564e238a7561e21d0b6af242f12792aef2d8208ce722efb85a33aaeb04dbcba17711f14b3af00969212f9abb89e9a365629f0cee4fd36e'
            '0db1b95b2ad15c7c6c76dea4e3d340e68fe90ad8b1776b5e5a77774b4c4d39b552ca317051e8e9fc7f091f30297eac8db932a28ef0b2db09067a5187643293c5'
            '563d463ee183ea5b268ed0281f7de9df689fa09a5acb4847135fcf6047f698147c5d5d8c1893ecf38723afbc929b5f1fb96884c3fccd4344d7015120436b5ad8'
            'd482853f15e45c174f4d42134af91767df9e7658742a847090c6b06439c0fe5f8d9520162718e759fc9f98fd70493cddf83d05e42ab39ba5040865cbe42b4643')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
