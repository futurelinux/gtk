pkgname=thunderbird-i18n
pkgver=60.5.2
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="https://www.thunderbird.net/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

sha512sums=('37ff00c36a272fed787b313a885eb07b16da06cf74aedd83f0466ab2608c4bb8b18f0db27b15482d597c8a03f3032949da31195fb45482e21543db0b99788ba9'
            '0125df40602da85a568d9fe89970931ad2d2af599b3d3d935cdc733db300646f428a35655029b950f734708b9827f79e5c2802fa52eb75be64be3ec3812c4470'
            'e3584cdf3234de677deffb9f4033ed6e6855620c891ed4ba78d0451352b1ead56c6b01fd9844da56cabdfcc87346aa59b72519e41f5bcd38fd4f53db3388fd7d'
            'd632908d90938336363cd1e97c6459efce7098bd0a15700b1e87984bfc8a57dde0de42ef13f87fe3e1af582117e8a9dc35b5374e9067d7bb296a07d16f4a9682'
            'd5b5a392991e83a52b4564e7f3f4f9c22a1d81dc8312fe0043c36773a23108d8bc117a6e7cadffe2b1461f9e2ffbeaae28f887a8f5156c48af1b57877ad27be4'
            '97a7a550e3411133c1a7d3416316ec94fdab367d4cb769c28169c6ea00b68fb6938a2deeff9c48f0cd50b96a60e545e28d6862a1767c259a3cb9d1619695c8c0'
            '49e1a8e7c396705a311386e4eb17683215aaf0fa2ddb0254cc1bf0159f19d731ca76405405fc591693ef1f8064cd33046cefef32645b3ff57f79fa03047effc6'
            'df07bcccf12d489087668378968a12287e3e435d84362b9da1a0dd45e4c8e59ed4b2b32d6b12172bd6ac280b235f6d3fa57bc265a354ea6935429207c6403bc4'
            'd2539e1dd899861c669fa14dc6ee68e63d0ed40efcc2eef3c415373493834fe1ccb7408dd40c6924c95c7848712c84b49ce8849ea5ae6f28872a103590426084'
            'c0286ae7b627d9fadc9041509d079ff0859529aa444826f5f823de593a1ea4cb552ca47ce2fa3c340ec86c0836bcf8c1a5978cafa7f8f4bc1ed955310d387b9e'
            'c61557a4f5746128426a16d6f6b344a702e8830da20f97a19246c05697a97aaaa9b118560c7163d490fead450e3f0f8fb12277baa08571a395c77e5bf4bb5ea6'
            '71f639e672791ca40524641d2f16c0a784d0230d1576044fb2269ac62846869cec3aa59486def34b356517e02f6159382a2c22339e4316020f4bb19367a705da'
            'f65ec4027e387d32e48f7f824dd8fadb353892896b86beb7d7ab06a563b34f7a6ff197fa14001450d30bbc068b9029db8eb3660aee6b8cbef35c11ac94ecaa8d'
            '664b110fc55416e19d27c9442e37ef9dc3e12399f680f8416450f631ca81e702742f2898b75c95b5238468f771644262f8a012e275fa73a0076fd7c75468ebe0'
            'a8cb19daaf72f03bd180d79bdd40104ae2ac7c39a5ce766579b31000360b8b8f229eb4268f13ef13aaa54503056ccfa62c1f9503e6397a06f27fa3a49962e4a3'
            '769fa1f1da569ec9511ca3939ab54c85999d2984061490f2f0b0ec1436888ba76221b055e911f108fee1a958b47da9a793db5b5fe5fd6a01dec420d64395c43c'
            '8e5c9f39baecc5510778fbd0cd25f277b34ff1c6b14936538d2210166b4551df8df3ed921d724f4b425832717f16b64694dd58f54ba91005c05ecd15917f5e5e'
            '95184bb879e2670070e0484af2d6530079acde528c9fcc9d6f3b48f018620425131578ed9613d8a197d815fe42cb03910727719aef3d1bbe61423c9433ef94c0'
            '2b1ac714073eae1b3d084a2e660389e105eba71ceff41a1883c89c767d2f6f7e8e611b6a5eb4a2b5747dce8ecae25e7ab50a896063c66c273a89cd3410542449'
            '7e9363c21799bd2e9e8482899f6b323cebdbab220b748b6bbc6820f1233ec99a9042c0003385576c8a61a3aa85860c379cd9499cbdecb805e2fb8d646f08cd46'
            'ad29a0c676549db1ab1ce70a8d486e31963559fe5d0ba8afb096e7890179a67ed1920829bde3693536dd19a9825c8d89df7c617ad9c86eadb41ef77f0804527b'
            'f9f8ba01b62371a21f0749302ef80334855c87fff85a75ac8f8690a10eb2f674fee61d4ee4fc62d9d3b80ba640aa9c2ec822e44225e5ffd82e94b7c8ae13be9a'
            'a9be64f55b23255effbb37e7f8e528c1afb7f0e064f4a94578bc7562e55f8d859672f1535fa157726fcdfa23be1fc4701607f5b7640f4ba17e8ca482667835dd'
            '04921feeb2c4cf03cd870c63d383e3627b93a28e972f3a744e5ee0957b5cab4a9a41fc7ffd57fa48e55a00838ae6aad849985a76387f4f6cc01dc1a96898f61d'
            'dbca895ee44dccc71e9cade506b7759a7a1c241955406a1698897aa8b33156c9870f4f52e860cc39916707084701c32106873f8c5636b4b2667950fa377f42db'
            '7dbdc2bb472dcee7d0c66e66f8419daa40691f115b5b567c82481662d6e2af429132a781f6b10c03df1dbac69ba950184c405d380d348ec45c66bc03edd46df6'
            '156e5b047b3448ffa9da4f5be0fca47c7fd202e5ff6a978e85ff049345298bff456ca2c824cf0caae41de9bcd614fb45be714e020d2266a9470021143ea20167'
            '6eeb24df9ee179f2c6c5ff725f4f34b9c2037a899fae5cb98ef4564c72fe6f6c3492af08227325c569bb160b0443988707422fe2d2c4ba1136b8289cfafdd0f7'
            '73136da1a107277905ae970f29cb01a325e7747cabec393cb8a0c0229cf384daecdb1c4adba07206530cdb77e2e6acfc8e8dbd4f9332b2eb1da325830c5880d5'
            '84640c7bf4c2258a7d106d3f0c0ba7ad1739a27d5c734dac3e1370dd9f160de9ac5a52a539e502cac44213b402b00c208ff02be1ab3a1d0d0e118bec63c96f88'
            '00efb0f9e1dd26cb1618ba9ed1c982062c421d67b43e2cabf1df08bf26e97d48fb8fff5e784874aadf3530fe66973ffb8491bbab43766006c600373ba79c088d'
            '618023c224280f354bf6bb634757b21d864e833294b0fb5397eb1cc872c7fdf6101d33730227b31395f48870cb0a0834d1c1f457507c9cf1a622fe6143579cc3'
            '2dde47aff5140ea5f1b7b66cd94673161a41df5bf39b95f97a7493d4bd9e61b83162b9473f3f6851af8d28951829aa4dc99b4dc837284200c7706d68b757eb90'
            '6478218b89693bc6ab6e4240e626a3aeee130c3938809d43ec4b105275ec709f8d26e9f00548f76ad54a5b023aa55bf45d855a2949a7022b3eb9dc4fe4a014c5'
            'a788c1d25da48c17e0b4ed0f294687774c2c5ee91caa8cda0de14c5560c056dbda4a5d859c4040d4625e737c21dce39bdca7209fd9549521a87f9088d83fb10f'
            '6d79b5d0e1011457b1f19935f666beb9fdf7b7bbff7c9b525f1f9e30289246b4e64ac6268330bc89a840c3c99e008033b154f156a9f0efd0391b3180e10b27ef'
            'eb15367996a464adfc7689f4c30ecf244fa59d5e981aec6334c8bc1d0f4f1ee93d0f03ac305b65cdf032d26cdc9232170cbde379dc8c3f9677271532c12589a3'
            '607c29d099f25a7cb12e8e7c2eb14d96c911eb402c624d3f300ce224a11f6ee80e8a7837304800091d08efc626ef7b91e8e7c9cb4caa52767b93379cc79f50a8'
            'ec62aba601121a8762626ff5ae01f06c6cfb59f20ddf4c145c79fc5daeea92c3276c9737eec17317220c7d335426d567e7a7220b535201889ad287d0d4982619'
            '875b04bea1f5cd9c80962c0000db9ef6fc72d02d8a770018885ec8191f7bc15e2f4a4f2dd2a0833f0046471344a4455774b9a383a9ee0bef74ecb5964746b91e'
            'e2fb184dfb60a68a29848be32ade59be8e7ed5fe4d50a917e55cb8398f77c5b38ac93a012df8c6f0dc71440c41d3e929f110fe7b06c672ff8f74117051789584'
            '92e159e46fc09a0bf13861312c248af34b88dc9ef9f6e2d3a566ef8adf388efa484202aff4bc6e6785a032b9ca3b4f215f16566c6f4aea21606952aadc7598ad'
            '63f9681887ef8407e42cca3257a2372f7d2e0640f1696a5e11f18d902708768e2f76ad76d93090eac8d638f4df5744a68d148adf2e414e0d2eb9f59bcc0ac80f'
            '0cfa206358b894f45c2a794c62bdec1e899beb53ca94e474064fbdaa92b594871f9631b4c80eb1987ef5a821f3e100aa0e772e1361011b019639977964b0112a'
            '493238e01bfd5e2d2f2a551f19c656fdc43ca05189bcb7ac05308289b2ff1192b025764c1fd07eaa16195bc7e691955c6f6bdd4d7dfd89df89ca8c9f787200e0'
            '2ef3c6cd1ab2a520b0a5446bd9e5d90e00b94998fa158b2b3b0b1993c5c1cfd2cee50f676f1d3b9ec07d898b93b0764eb104fbb812ca771195d5590b2503da1c'
            '25ac21bf338d05b3ca4e2fe5ac315b7e4e15f89a53d3f64bb44e44dd5feb153b1f09db56d0e701440c33e2fa2a9245c74056478f6684f2fc7cba2da4c5b55fcb'
            '2e12f8febb1d7c71654d93439cbe6c52c391fd602503187d6adc1934d9c8fc4c92b44bd3c9b3b01c4abe16317ef5d183d315ee44cfac453ed5576305574d0361'
            '0a88ea24708c21acca2bade7744f10f7a39c7d1c0af4af70b2a02a19125d3a224eab24baf7a0b96a36504b963276cc04271930e1fcca88a21698b5df313c8b79'
            'dedaf44b97b3980b80af0ba2e66c8ce0adfe90199bbdc5c0279cfb7735023c3794d811a5734e05112c7481d35ac91521e1b9d1293c3e43c8063d42c69daac042'
            '1983d8e696d51aa7d1ae2cf621a877c37a894a3084d02b4adf9387dd6476b5c838f271dc9c6503c47d967d20e9cc4ff5cbd6accba66ec36100be9ee8cbcd0855'
            '758c576e7c71d2b30adf1cadabd15e305c723304cc3e4da3c460aa9fd71c9fd18ee6473212fb2f7628d93216932bc4d5c03e63e9beea21471c8237754d347c90'
            'd1e414d507ae4aa00d1319e2fc0262d651dae334afe84a9734d3bab9595cd4efd1ae545f7d809d186d0f6ffeff1bbb214f55619b5c56cc0c61c154e22b76e0e2'
            '728c6039dbfa79d04291f06cd38e01e66d761df6fb7982a3961f5b14cb92c07bc12fa02090859d3f486ecebc74463a86b257a65dd82070018a26928d9c002994'
            '7b47e91277f9a24aac0e8d8f5d169ab8f9fdce44fd43b090dc45e01a3d528f0b4028f027dddfefcb03496a85828ac1bfd3d5f567341effe85bc832605ecf7cc6')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
