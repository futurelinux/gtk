pkgname=thunderbird-i18n
pkgver=68.3.1
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="https://www.thunderbird.net/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

sha512sums=('ae0540082ec73799e73cedd855ab054ce2b1fab9e89b13ca45bbd2c5960143427921e5681da61cc6bf869ad1cc4cff27501c8e1f575e7c98dbb41e654cd2fab8'
            'c93fa6319c58ccfb229e73781a0de7d050fb03d503e2ca91873680529c138ac404bc46850f32b549a6300d1b91ab809d7525fe5d3db20cd0d72bbf6bd163f9b8'
            '02000332fe0471b347023d130b30878806d7254dbe20b28f47e52245870db9ab23970fb9161c87c7e9143fb47720b6931ff2895f3261e89e5d3f65639b5700cf'
            '4539a13495cd8eb5d7822322147f2db24a2a17bb5e0fd23629d27b3ea7e1fba55c005722ed77e4cb053df1cc6eac170a1ab99b4f44951cef1069bb7de8df5b73'
            'eb07e1374984553aa877f4c99eb460041d73b5d316a45a5f8f314c1166f2479b1d7a32baa1c4599bb635b47dffca47968367041ebdc109ada2d7708aeb593edb'
            '53057eda4068d8572da349536a6245d241b690bfe6945d17e723e48b4b3e86c4258f4ee2a1ea734defef2b9a0fe67eea726368e12835de807877e7521d1d22dd'
            '51042694f774a9909dfac1ce1869850f0d0a0048326559d722a851d91aecf1955f09619da1dbc88ec0c938ffaa91ffae6727f7d32befa05b1b6a01897e6ebf03'
            'd34a2aec8f9c31befdfad9aa44e04e28e8ff49803d74e305d64b9013a1df2e1e79f3da3709ee38bdc72eb7301eb28d723628c7a6fcf151ab937c30de11763974'
            '0a0f01a73918b63a88b872c4b3c975d711a559287b192f2ce1be41172328023b00b7655096f41522019e6d76d625b0a5453ab096c6f88465299c14d77158fa91'
            'fb94fafa63087166a538e82734fff444d6f54390d2f38e74abd3f090cadc426f503d98e5755b1dad83e37a3d2dba49847b10faf19956befb951abfb8bb08c104'
            '6f651b9f45217de51046806092dec814cf3479058edd73a4621e9fe55c5dc9df1591beb53ee15472beff14b15f11f573ef153bab42c15d9eb9bd0b9f0c22af51'
            '542f73e33c7a3f39e982d0b67a4e6dcb8ee851eae5f03b75875f1b79c55851ce67d00bc3f0f1c0d36c0a9856a29e94e3556de091e8aefb32f5ebc7900e98c814'
            'ee4ab262bb960969e19d73bcb47b9f569d9ddb4314145573ba34c3a34f744e06b9f0bb54a9529b4b0b06ac85b1e4f5599dff495649a29e5f49a2d4ea0cde2ca8'
            'c46341b12a23b5c3e1174d7d45e5fa7a16c63966b068da2111aaf55da8c9c9a052c9417df65d0442afb3d6420b79861409ad25220ed9f360ba2279b0f8b49350'
            'dc4fdac2ee61b0514e18140c3cae1170fe63a495a984b54e356a402ebac5f50853a67208d64883597863bf03b4445e528b4a8c622b0f24a8fb5e23617a35052a'
            '668d8720b91e3f088377835b445850820ecddb46eadfc7e325de400c6424bd30dcdd08c35c9056551293bd23f400c23c14dad165b256f21fea3295fce9bf8166'
            '02cfab746872cf03aff0d32202fe55d7f1252554337e5e8189edaf2b3e49e4a91eb9139915fcf991281fe6da79ffa7a83f48d06a822850222c506336f53b9b7c'
            '5a4713a42218940c12163cd1d83ece756cb3dc26ba265b32935e53581494ff31b15886d036970a371a4cadf0b4414904164f1859ca166e0ad5c8c656b4b1d7ef'
            'f410db97997f8ced27dd7701788d58130f2e7875356e6140603c3a9f2969b86e3b9294cda1c85fc10655a21cc457252b3be855d342c064571e242e28a44e5a39'
            '9bb2fdcada34b5135ec7702acb1dd9330346f8b0f955465cfc3ad5c41028f29c4d756b80453c791bdbe0354ca96abc1591be4cc194c17ff7b55d5e1c4ee43e76'
            '07fb7ecd722c1760a55c7955389b169ba4af8d7160cc7b94fb1c0c19f80a99f8e8721030ce59fbaff4d28db7f1c7b9a16c78481e6dfde5aa7b427e06b794b060'
            '16d9a60e2fbb27bfb44822abcac8e7f5fd7890bb54b171ffc978ea0e77ee625b4a15f05334bec623e6c804323d8de22a6271c2d7a38052a00e0f56e732a2dd49'
            'efb3efcea9dde6ec6dbcfadedb38d953a07b0796b27b8698bd6e02d59f5a18cdfacbfeba90fbe8547dd03a68eb32083253d1f7969927699a969985dd4caaea09'
            'fb22509b22618e946d289a0831efb3a7fd313ab42514909f4def5859ffafdfd99f5ab6df1971b18e0926a3b4b9e840475fd0c7d1863d11a28b178af02c27615f'
            '1d26607ec07491d9ca828eecfdbbae3f76c952d582eaaf7fac3d80520a80103db2e6508b20accf1793012c08d240590627f4ae2adff7b45f7887824897ea2556'
            '1259eeba52bd1866d65730fe9a0648d95b01328587554204ddf32a5e964aa37eff6375122f4658b9a70507652988800c9bfecf8b773ccda7d5354acd6b8b07d8'
            'a1bf7e850efcb2c3ecdecb6c4bcca2764a427112f6cb5d75f101204e34747390cff8227a3b41c80dc0f2f98b6f3c9ce2941169eea6cd69d8eca83d93e130f9cd'
            '26aae5b9fe2bd626039edac18fabf381370b962854c9d6dae4bc083bb04032ae54bbffc1ce6074521512beed9763b0fddf8ccf189caffb8e652b876cb3ac392c'
            '5b9dcb2e4894e4c858c5df4bfbcd9073b91887b49fab13b0e793f0d2f523c62bef4892d9e977109c8957da01b17ef6efc2c87abb61c4cc29f8f8bf5a8921a5a3'
            '1ec7f1f367a1552561fa2e176bea6ed5597b3565ff839b80d50a07084e2ec64dbc4d58ff75611f41a86507a9b01d7144992dd75fbaf5248a10f5253126769b79'
            '251b79e495124a81c69d779684734ac9970a178564e53215c7daca9673381995b8598f85569cf1e984594d741786ea6905da7223feca22ba7d9805ad3e422a86'
            '160e8b7111c850d4908d370a77aed4f6d389253c049a626f59400cd3b7196c9f6142685cf670acdf8cbfce06b658699e3ce65e7626fbabe5297c47801f722c43'
            '517fbf1e7fc609e345d396181913c1dc15aeff59c1165f014ba7027b7233e9bb1463a16a83fc110b9131f7002fce7026dc3d7716bd1e3ed3821a3d83dc44c5a9'
            'a237328f6a8053e27af31cbf71300493b3482b08630f20663f4f6d4ccc2c5142928b2e02c2d9136f863a476309a95a142db2d2097d8b6606df2a168500889fb0'
            '0a3445adb168bc45e78b1655d6937970b2666767924e56fcdbb537da9dfe289dfdf281e54d88aa7656b1543fe4f5efd490d3fb8587b541d2f43d372d08fe820a'
            'd810add1c8ea53641a7749571344499676111184a5c33440acdcd4ace589a63a109a01c6962cfb5f0a5e00b766a9a37cf3eac3b7db9088bbc6b715b953f35bb2'
            'd2b372de686ea90b7152b2e65359c1d4c3578ccbfd1c393fb5efab182d231283a17de0643db761327270329b1551918810719a786db9aea8577127210e6b3c82'
            '3de15eb90afcf1da756b042324d40f4a2361d45152b4ed59af15fd967eae098e6a69e9ac9712c9bd89e733fc569043b1fb73f2b977386f3ccf8c3b5a325358bd'
            '82586fec065f032fbf9e9a43372209c178ba98de164de8f9997295778a30a177925551ad873816168e49ac79832adf68e7a5c1ec712afe80268a8a33302bb5b9'
            'eeb4ca95feae849751697a24a23c89ef3c42f1b785114a6b1dc5658ea074ee3eadd04f535eeba5ea3b059abd3035e400f6239d1260006fb71c3548d0c788bae0'
            'd190f4a7ba3e1959d894c8d4a3125802d036f266775668e2ea6dbcc609dd0e254138fb9f79e2abb5a3555ff82815e41b8c631c8ea39bf964ff0d74c30f573d43'
            'b21cc8d77eb36ef21e896770768ac6f3073298271e932b7c3050bd0f57c31954ea9832a01d73263166d5670f8b31b5e34a0414c218e4df80c6a9a2f17f601e8e'
            '4e1feac588928773dced285844d347c77f7ac32b07059f2828e777ff42b8e9d2e02a3357a6453adf71989203893c323b96182848712bc7c8d02722f1fe87edd8'
            'eb2fa165289fcb8e16ec45e5e4bb9ae45c887a8af3dd7d7b3f45db9e91754e21fb27c547f355bab7c51d1aa9b357f735c52f1cbb6dae6ee1227311aa499e53a1'
            'e96234a7e8863704f2e8bc1695e4e89ac8fc0f362d4c99e064a1a1aa96a243ca56386db46f349ac865768379984147dbee75524af21e27b9f950aca41977589a'
            '5cde418609787f781f9d66e57cc8f43e3a20e5fc9ca77faf15944170b078a0d5c8e2417413e6a88d122c021e752eb2df98281282996783c1779a0be057505c4a'
            'cdf28f1e94ba77258d89d6aaf9a8474ef60a70dbf7865f3ea68670d7d962d8431f4e01a0a713e93c3bb77e691a2667579b35ca2ec12b2fc1c06c5b22d661ab6b'
            'a4918f7ac008526841c4d957b1d3671ca7558889b8b9e054b9512ed04024e93463a4a2bdb3215ecd945fae0f128d89fb10a136baac16c6e92086cab61c9915bd'
            'e3b3216f531792dcd8c034d0e5675e5d9cfc865b5f130fbabe227b0aead4c6221c94011ec9bf91190d5bacbc00936efc51b1dee11db44060138cd16c9ec13e1d'
            '24f44c35d21815870be3971f0c77a886699eb8d7f98f40e18c00d675a086723296c44781a9d6797e560ae98c8b0984f9788b8a08e69dd31a6a7c97cab5b279f5'
            '817fa66f5dbb59e358a8b61f96be00a43863f77c68ae62a0a2ca5b777a6f3e74c7d66cb0ad26564e8e9dce20fbaaf553f38c2d4792dd1e2b21469cb5f6aa4a91'
            'cad22417ec43a340b36293421741892bbf2321b3b53191eaed1a90bb6c38cff2558399971565520542eb8e1a1f7bd9e3369210c35af780abf979fcb7f15cf63b'
            '5f052a01b83291fa5c045e1a8d122e3645e8be7a307c83b73a40f68731066d8a5b6ae0b82e0591bcee1c905afee99dc0eff6a38af7f3ce10e20b446114eb704f'
            'bf12406a4a170d7503dc8d2bffb8c7c57c6e110428398f175c0095ec36aac30f6f0b208543fddabbd9d7891751e1fa5c9b136e98a73fa2d13f7258126ef3dbbd'
            'a17d91846945a5672d452f2220e96fd23957ae0f938d2c7b647d90dd8ce3940935384ec872f2c8104d21e5908d22bc618baa526d19b6602304bb63b5f05248ca')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
