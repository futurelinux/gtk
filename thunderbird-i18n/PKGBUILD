pkgname=thunderbird-i18n
pkgver=68.8.1
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="https://www.thunderbird.net/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

sha512sums=('140dd39f43805c07423a3c747731a68ecceff4263ad3eed8d0450c7b52d4ec841947d7e2411b39a4ae0ebb5a49943463908d8ef91ec59e6bddb83ed7ed2af048'
            '94f76e0d67c889704599658cd41cb58c92f500d22c8c3c90fb9b0eea63c07a3dc48daad331cf9654e30e2fb3a53d5d34a821741084f975ffbf225bb16ef07c83'
            '23dd5504775cb637172a828be8d31012d673351274d93f309ae7302a05ea139fa860933e4f18b24c17d0480bfa50c02f0528a25d2f82c128f20d4e2df10b0a74'
            'd118e47f7cdb26c05365c891d87c03f2bef2896b2b5818ec688e4098cdb72ade6ff585ae3232b91cb89ee2d434ebf2e3ea7efdf09495914f881a66833f95fde9'
            '1e39f934bb0a01b6d37f754eea4be883760cf4d186c0383296018943b1e35a2c8a79222473a3be43cecc07e9285f1330605f8565d54e27713a76a7f14dd2c558'
            '02487bf486bae8e154a45d73c3877b23d0a8ead8e6b335d829ab5d11718fbca240bd972e6dfe99c5a93cf995cb6e8e3e50ac3f71a01ce4af775bad481318f39f'
            '4d6ba4681908e7a95b464fd3461388047ed372f70bfa0b39fd05f9f05b9c8f9c228d6e929cc29ff7d050393f00fc98f4e90264f5770ac7d4b7e3c554f9352a20'
            'c74643766be993e8f12cd48036c4784bf76200df35993e6857ca64cd9be20488d5e1eaff6e854582845b4561482a003e8a70f7fb86ba2feab835fbe7c0a3eeff'
            '22de7a06ffa128265c782dfc558249aeb16f4e7edc1c3cc20dc8d05ce33389a3e12b904363b118cf93991a54988e2a9ff0b97ddcd1db862e90b50c45a585a5c7'
            '84f68db09c5f7fa51e36b1b6f36db53f3cb8ac5451411cf1929e912806e451fdfd0853f098335c58294a4e6ba8a51625c5cf696630fadf23bf16553378b4b46c'
            'e28a7060583c06dbdb50721fc94372449b4d865780d0ea0ac8a4628f595da01d404cae08bdcbfe9cc8e6e0f015cf1a720966971aa8fb12b0b2dd7cb8f1cac024'
            'c631e414f81f2294ffec211f34eff558b4ee2a50d254d3aa854ba582aa8c1095ac16d9f7814dd4f7e7740fefaecf6b44dacd9932be3b0ddb952575672de3899d'
            'dba0214379cc47bcb1382a02ade560176a84644d59ab968c208e1fe08b4123f33defae0d1a4b7fc89fd9764a975068b4421332f0e2e39aa6bc7938f06f968b2f'
            '280fbed9401f55ca76537f8a4aa9c2d00e7caf6178af02132fe0409fbdb41815a6d4dc93f7c3c3851c0bd839aca86291142b86a9211dafedd94996c0c1487036'
            'ebe2e50e546604563c005ade6d2ed3fe3c9a6dcb7a67973057e814d8632244af9d2eab3105de62e54d74116429ada193bc79c9619d3370574a2d03b57b251c7e'
            'de619425ee7dfd5744997fe76bd6918e703d99c666e7d2d79e8048a4becd3a62bbd54f45561bc469324b4dadebb748f8be4476cd80f4e10f93ac2cd2594dee07'
            'c46d72808313d9688cbcf3493a9d5328a603897e0785fd033187843b7a8db0d09da4428989bef75628c3f581778a9e67dbea965811c2f986d23de9b2d5d8716e'
            'ebd97db85adad98bc10077a390d03a4c8686d2d0e12713c5d7d37f761fc52e2cebb29633003ef50869b5166e0c2716b96db077d4b45a7333f0850bb9fd404a39'
            'd3c0e891fed198e2654da5ae8f0458dc14aac58b27f05965fde2f631094df4d55685e4dbda989982bb8cadb0eeee0892bcb37e5508f009caac690df30c70f8c8'
            '35373679db5be0b78132505b083b37237cd88be55911a7536ee061fc3deb76fb5e80fcba160dd0beea063f45e6ed5247c76794ee73d7a0cfea64deb131499f36'
            '7f4fc2d8ac13e65e3d5bd7dbcfeaa51d87b3d71b218a7ac2b51a2fc09c69259c6e328f5f1b569787cebdce7a214d4d6fcbaf847b996344af2483a792bb7893a4'
            '91bf876675e480ab939d0ac662380d36a51d8d101885a68f123b661349d0709f864ecae8cf595d10a787c401ff475265af997c15629e444cbb2683d51d8fa8ea'
            'daae05b1b978ac3bcbf170c829014e4dc2bfeae23e0cf24e0f0867dee802b50c11d40afec2c5e4da6254bd2116efdc60bb6edb3d09c7b0560f1a57514c393d05'
            'deb5c876cc375a2d60b83a7c4d6f17afd575e1cc1b377837a6cbcef6b5708589f9af242f6e4b943e20de68f02d9b6f73bd03b9d65fc25c8d151840a5365cfaa2'
            '7f19b68b7915dcb671d2a08094ce9528106fbc1315407dae03681dc00eaa0ceccc43862de37f7988aa8903c630ca135e0412579d57cd9579c4ea892ebeac68f8'
            '96c8a1e80cebfc6d31eff0fa0d1e4bbb4a316695fcc27f6fe63ec43efe642eef0546b0f58beadf634952eb2960730b4317a0bfe29a19c099880dfbf439e7f436'
            'c15fd63d2954d514a193c2a8ab6ba121025fba468757bc47d636975318bc2170d69380339c975c7cbf9d115113f5aaef6f2ac183e61cd98c62edcfda9813876d'
            '8ad4c119c41b13a9c2fcb296e21ac8ded9c5972600054ab5f295dd4a1216dc52482e694188306f1df37a709454fe84330a23ebe2bad21aa251b9f74d0f1b7ff4'
            'fd415cb25ed8e5f04a7bc16d92ba497e8747aa248fc9997dcbbf1832575a6d6adeb89f787fdf99816006357674270db5d5ae65719d555cb5cbb1a156f9459804'
            '34a09adae9e7b23436fc33d848c723741153061c54baf501e290ebdb53212d6cff4d283a3d9974f4bfbc1fd0fe7bd0e19fb0529a85f9740706a40c6a115c9f45'
            '0f22756eb14ec9f73cbe6ba731f3c6196dfb7188081663b579cf29519a05f77e9c2e1e7919f180ba30e1c951f49ff7ed59aa231bc8bac11e7c880e1a80f8b87c'
            '6d63a2844516a19f9dffa9d1a61bbda86e1c53b2ec4bfb315c9c769565dc55dd13116823341d809c0e8c6de39cebe015d9423622dc63b50d9de6daa6a80e79ef'
            '8c2be19cbc069a1244270cb6447fa9e4e8a17a877ba76b1519deb29cef9cb6c7b1662b36bc02cb62f0f5e9f7bcf0832d3a7121a01760140ae3ac3e90a86d2b74'
            '161159af10b3e7bf050f50c4f90350611e7e5d1b574c7480b5ed461da85b2f46e83be5ff7601858fddfb15585bd6c7aa977feb5dbbd6e4ada41870d8998f2761'
            'ca39ada0233c3ab67aa38ae0e2f0616b3a9262f90563470b374946ce40bd126002fd402abc552b20c56687f71e181f9557c34dbcf3d4e1dab8ec0bda3e529e24'
            '591db6d31695f405201715b7c11105856d0fde703256115bebfc4c17e114cadafdef9c67bee31d8112922377b5b9de3906242cbfa8ac908838e2ef0bc51aadbb'
            '5448e33472e12bc383bded71a7ba22239e840a0d2e85befdfa125f3012f559d8c673b3a7319506e4d126e614639c68f1e1841ef9b411c44337ee7f05776ea3f7'
            '277fdaba93e11815c9475f366fac2aa8acad5224936b6424b4605bbb6a0c73a61e57f3a7d3d6c0c1772ded7700652810a7423a446f386a61ab55186b264236e3'
            '27b98562b280db394035eb0b359d7dcde2e423c2ac41f7f41417fad0a91bdc9a092441b46b6ab4449b4eb48437fe43316999b02dff8bcc3518848b34cccf121a'
            '5ef5470601ff1c3b40948683272108a041cbd8a880fb9092afeef822457ec7fb1f81a224d4979255776207a36e1c87202da538a97f15b2aef60fef5261fa81d1'
            '18bcbe1ab95b78a6eaf70aff014a19461123ca64efdc27b6a799db00a90b9a396d71dccc413bd72ef84c4d6730f91c20cfcd444c2a3c93b50a8ad6454370cbb6'
            'e18e81ebee1e2f59cc15950a38993c376f6d3a2bdbf147bf753a7dd96cd5272108b91823862ea24b9211141fd7b3e8e10fc96bbec37944b20236fec08c2e4648'
            '8aa3010f51a61e076d1fca87f44dab2e56c27bfcbdb1507fa604a2723569a604583e29fa1ba0bbda82e93b0b69152a1212046876535e953b33517893a5e403b4'
            '0e56a741e685959f66141ae96893f5b181ca43d2f6a05df7600967c990199805ad985029727c641b0120f40bd55757d2965aa48065b5ab34c947e9ed54914f42'
            '6b62d1e0b5e20fb657a6b34b1dbc89b9db579bdf50cc70905b5561014903ff313a7dbd9e4fe06468c60c1d9adc5d46c8d070e757cda81a9ba0d6a7ae8c991531'
            'fa12f45cad36b1fe651734de183f8bfe9608e7a7f9665a344bc3011594a1028f17cf74dc21b01e811f5ec337a47d353913f4f7822aea9d8085783fce7f2c984e'
            '81e75ef9bff2e099b0d66c0378ec03174bf31df2c4243d6be214e5ebb920658d110ae2120eb0e3f2e04c8d334a5823e3ff8b9744a195e3afd18472be0c988190'
            '9dfa5ceb5c771ba22ecf628020cb7e4003ffa8e322b43478b60dbf8b8e653aa1993b5f89ba5a1043be270b24e23a8f4cafd33a0fa9716e1d7573221fa63af7cd'
            '3f2039940dc3e5e2544dd31839b2fe56e21620e2b526a0487a50884e2a3ffc51df9fdafc54fad23a05927c6f40c4ab29fd6748d15cbd889a54157f0c25b5b349'
            '9d8f56fc66cc342f91fe27dafbd1591fa6696be40e504666eeae1a7962ea39dba087ccad864989bd490acc2a46fd9dabb5fcdcb0ee340c5da7e14183f710b9e9'
            'ba6a524d30efb09507b2ea7f2c27ffa6e467e79db71006730b4ce340a82f33993c8151952a6971b15387ffdaa522d264e0003e8af53f2a2beeb17c9ff1bcb6a3'
            '9ba02df425aee8061fb1d8ecc5766495bf214e959073d08a2b185ff4b9901f2fd12a083d3e4345308444450a227f033fe16206dbf33ce2e1dd6d4006a2533499'
            'f01eece531222e17ac7a1550e7f0d49c0fbf0e7d68e636a8cff30787bc6159f0b9daf5619041ae9c7894ed9cf3fbde4d0958e2b50bf69ab6464459dffdee63b1'
            '2120492a8cbb18e6a07941b24d307734aa88c7f68832b5616961056af49e422864627498eb1a93a5a17ba6785eda03815496b763b79501b72376f838f140ab5a'
            'b03988ccd1984852e002e93bbf9ba1a74617156098bb6f928238930e9a92545c39be10792bf1c84acc8b880f9c6335139c84c9e47969a96b2971f3fb889f74ab')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
