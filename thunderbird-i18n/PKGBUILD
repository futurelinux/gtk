pkgname=thunderbird-i18n
pkgver=68.2.0
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="https://www.thunderbird.net/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

sha512sums=('1fec24613ce2f46ce1c6b61ece4d6bbeeafe69e881846c0885709ac5ebffb07484568dadbe2126d82dd7e909e9c335a4d418a66d3eb205d8b775514cc44c2bb8'
            'f1a6b1cfd38f42aab141424491362ce3e10c7a04398bf3860c23ed2159a0e870ecef62d9a30ee70fb299ef89c2b9afb06867e27c557d2f576cf9bf7f7f185a55'
            'c083a182921287892c085b791ff8201d56b01fab3ea0899fbbf6cede5f6132e3eaa2c478507a187f4158064caf19356537114995b9aaadc9f0bc115d4268ea11'
            '20a13db5ca32f0037e2b28398f29e8c1f07b1f0f06994e312cf5cbde2e21ecab1ac611df59dbcfa1920d1995d7a73b6bdcb6b27b5509c479a0fa038a1bcfc2f2'
            '9cd2b32b2c095c8b5fcdb2309788df2c998edea3ab8d0470afb8f1ad4da40a6bd54dad4ed934d076615a7661380fa59b68b975f0420cf463bad0243de7f14fed'
            'b58e5704297369871d53b763c2f92ad7a9020748f28bfbba119aabd6bfc71a8ce032924ef82fd77ee163512eebed86a649fca766b26ecb01a420e755a47ac3aa'
            '1fde394a3ce68215544715d04ccde8931873d05358d68d653d8740a095631611acbf1769ec23431fa0703acd2e0f982d995210afed85f126546356a8d2061220'
            'f7c8b802ea5030e17243a0f72d0460a5feeb8e13cef79a7e503853071918d36cd64218d168ef641b0f5203ff0a08acc2ab7616a70b74f94b78c488bb0be1f6d0'
            'af2d8d861aff8ff4617335eb774713885c267462227f0f95fded5f40bd4007a5ffc0cc7f2e8d8b48b48c98c501c191e8a608ef626bcb55c2506f8197052dda46'
            '848974df4ab0373bf0b6582e57e4d1dfffa8b8176c89e78a74f4019b8a52689a6d4a6932f1e7cb86f1a6886bcca9c9167ec3785d0adba6f5fbf0466177591795'
            '73c52439485bf7a268ccd0155d673d943b86fac44248eae86ac0a5156a64f6b18f4f955a2e7205ac7d06e23fe6281e14de8b42c36bc8fe77bbe37d1680f7dfc6'
            'b3d9860e5faa5e78f2134322a9a10b38015cc44c8652c0ad92a69dffdb72b75809212b75ed4de8e8beba0c55ce58b8146713e839332e6309a776db152d348bb5'
            'ec5af923625d32d34fb56fe2e448a2597f459cafce7acb74f2d57b252485e40f3af979ddc203538958193a08986bf3772ed9696cbbe5e5f96b1156158e72dacd'
            'f47ad3c98be44ae91fe8607960120f382bdb3262e4552313d27b325ef61460b54c61a2b524fc16e8a4a4b2dfd6f3c50eb89ef7e102b2467f43e36bf0c65c6e66'
            '1aa54747099553ca51a1f7a94734336dd857d22de7a5c140e05f50366136fa3ca83694002c9b0a65d0bbaf6a67b940c4df1328661b4da6f752d87f747718d697'
            '8049430710c8327243a9a2a2fad638b7a4ec33c0b25baaaede201a0f3010ef1f891a9c89081e520cb426d3314315fcf420f2569f85edcc6e110c9ec857e4cea9'
            'fe73e7ad6c3b93d0665270817116ab51ff8a8353d400923bbc2cf074a6b8e60f6425f4650976db9929b57eca48a71b183b7ea05e26b679e45193bf46e8fd858e'
            'e193dab991e5c9b4bb073ef22e0757d8e4d4ff16796ba450ee60dd22a15353d4de305df38bae73a5939e4362ea62d3a0dba688df78c39b3bfe84d60d49dcf796'
            '8f3e7f104bc1741cffb97b7e0fa2e0f71e16c34c43e728083dabadf10436e9d8412d16be9afcc3fbbc8e3ed272616a53d146a59be58b6d4728667e393bb6288f'
            '1191176b6e15391a46c4ac9f9b8ca0f48973b484a50d4eeb5d65a4504da646ce1e4d90c8786ecd7ba5dccfa36f0b9ee1a0951b3578406e4afabf94399d5e8019'
            '3655a0b45d5b7ddec1eff8bf5cf75dbbee6675f566b30ead5eca007bbf0f198811bb91805d8ecdb14620937c5e1731bce36fc45e9bb2af9fa2694d4b5bf75200'
            '7959aed6a8d49aad3e5f68b55bf48fa895223caff752dc5e1e678571c2031076dfe98ef63ccc69282cfb748b4a4f0a8f203073e46b7c40b12165b7b17cdbe498'
            '63c765aa3f3ac9232c21917ac011a0d45c3437aa672a1f326e9081e968f053ec31ca057d91869f7e6675b434ca4123b076c656dbd0a6d858b3b7904104bff093'
            'f072e5d4f810fb4410333dcd8e4e38d99ff471f1a8702554fc2af211e0934cac1d2e875d2532b54f336a23df40749bdd43b0751bd9b34d47e315762e628cbf58'
            'e54499712f207c0355cde96943e0a42e944787d363cacd4c1467d5cf8576c885c2629e95a2c0679171f473a510ec7aef0063bf36f9c03924743cacfef7100cbd'
            'a61729b0cbe170d488c18450c330091d97bd78a0a70a0500c60c3d752ce3c1ac2008b897b2773f70b9cb0757ee79b2f60a1b4045bf52eefdba39307411bb705b'
            '2eab483d307deb10b8d762156e1683def0053d94671cf464a95da184da6bbea92a393dba52f2bd8e98a66eb00ffae1c840503c48e7ba0f445a90eb53e56a7ce0'
            '87091e177a36ec5cbf4543d5b629debd32abe0cd8e970862f1cadd3211b784c01849999ece6ed69bff5d71535a4710a4504a52bb5b92798139b60680128b77c5'
            '6afe8db4d56dd2e90c05feb706c678afac3eef1518048a72b93653a8b68e4697c119664c49b1f46004d12ae3cb7821ac2a65ef50642bbf1ee69536c42cc48bbf'
            '729cee80f7bff4013b2fa48a4ac4941a4319d344e32649456748d27f5608d2c9e5d44a730416ac2d6442b79e85b8bb466c5e95bcae78865aafe142e48200cf3d'
            'cddfa8b0cd6238f56a6dc65b671aeecac0a73641a1924b50c7d31d6947d5477ebcfee9ee97d31fe10d25e8d2c23edeba2aef18467c6ce722e50fb589bb97d0e2'
            '183256da4d4bc52c057d0e9c157201554950d4e34c03801f0e0412181d4aeb527900a2d74b6ef56ad81775d8cb2d65f3e8f242291e6c1d79892786d5f4a36b49'
            '7f4cedb58b4da31b1ca0198aadc357563ebf16132e0e039ce29a4bad59bae7223c002ccf099ea67306db8de42eea811e8f6fb9a97aeae10cbbdbf930f0885f8b'
            '4c2113529b35b7cfde35c664066a65f54fa0cb2c7c8e61e1fd0c5c70c105be51ec07c9ad64539bdd9f4b925645e34bdb2ad53a0bcfce3b3d39063c8767f230f9'
            '5aef2ad8e2b98e8a1a73c337769d444711ed4130edb0ed841a68481123551fa9a7a029f572d2064bf3f2ac6ad539f8e1dc2bc6bd2b11d576c9806a58b0a29905'
            'ec554bf9f72e4a30268bbd9fedfcefa8fcbf4518b97a415e7dfc3ddad586bd4c2cb5aa6409f31b2cb59aca101a4cfa80d79a80ca9302a07c50193707ac07a27b'
            '0a86d856f2619482451aa6283305cd9abbd2700e0431c8fe8c9852725523a9c101bc5d18061460d13a92c5541630e3d913bee3192d87df3f412b7e4b1526b8e1'
            '857a5fcdd2c19ffa1bc32b589fec6fb093f40c1ad6579ddb28a20c8a5a8e0efea5136bba37297019592e511392cdfa420369c3be968ce0cb11074ab45efbf868'
            'cecff797b042339d20eef0efb80edc6f25392cb13e2fc9a9834c693e752d49df0e6457ee14393bffa439be2e314c4eb07eb24d066aef0c42a04a25ea6bc2f19c'
            '53a3a623d912273ba42795aa0b6e4420c17fca41c138e8890ea873f67d0f29487a0aed81dfabfa5ea4ff205bb0b76c6c14218aaa866f98e493b53713c0ac622b'
            '50c9f8e9e719dec0fcf59c8d2c0b8f5f06013d01d087c32ab75b2855879662b1fbd3f61bfb39d94f9e8933862c828b25596b30616e561b0836a820304975f1bf'
            '26d590ce7aa753a64bfd25586b02fd859b46ba7caf02cbd50c0ae3459871b463dbd9cc621b896fd4b80c4deaa6724f8383522916807c0481163839e1009fb1a0'
            '9ec5682daa29e094c28abcce89910e7a84f366222ce95a0410c7dc73222874ce70318b7099d439a02013ca83c2f96c9164d09b5d43bb0a536651e7184b2c2cdd'
            '94bae5cce1dfda964b631fd2247900e840eb8d9ff06d73633ea0071fcbe4eb6131c67f1898c1aa852f03322d105967d2a6e7f9e5efae7c741d23ab1497731b68'
            '14c06b2b859717a46180cbcee88900f3d2ed1cb0094ce977b5adb7140e011f0548f71fdf79e0c2f527e3ae6de01165c3a48ee177b91de884c0ecab3eaa753689'
            '1eea25f000f97c2e840f232e216c219000560e2d6385255e01ad93809d6c65bce17429432d8f862bbd3566ae3b405fbd062d4f1b67c187a73f98162c1031e729'
            'ea18224ea3887a78f15211d91db2d9dc4b39dc9ba82420da0817c8658efe2830ca07604eb1767e6e821d056b2ae26e90bc51b83d941ba9b0f996ade9dceb79c1'
            'df336d62d0aa3d5e50abb987fde5929ca9bf52705bac4ce3815d6138499248e92dd3a5daeff60654a2f25e945b0d487924889f14e159d02ea1f40cb5c5aad4f4'
            'ecada5af5c8900744ec2cd42c14c9e358cb83451ea6f500f0f6f49acf8cef1dc0f7b2e382372ca5128d6c57e32a7b56faccc3f69595817789567660c542130d7'
            '778e0432ada9cd0d74b4cbeaebf569d52734309aff9238ea6f489f5460cda2d5421e7dfa2bb4b10540e1e8ea0015c80691398462027ee23b08e2aeac561a0978'
            'd98b00a00d6e866cbc9362ee53caed108ce7826323c6072851ab81f05f4a3f2cdef64ec0ff1e25d1425fc724d7c28acaae8c4e227e353f07a942e6c964b732df'
            'ec265e3c32ff2dda081b0865cbbd28603f38622ccce553edcada8c17022ba0d23ddd8e390cf3b877091d0e7acb151bc2385ef9d518278e48cf6aadf12ac4baf3'
            'b46c64b0b800731bc43a080050514ab7e073241847fffe80583fad24db970819969f1b54ac9ff01dc32ec8f99dbcd3b5a251250467f2d4dc0f336436aeff01c9'
            '094adef9fc03536c599cf25c30de11e509f82d12244d61ad1a6f4a791a8b6d6ca09ed37ca1f18c6fa27511966b5a50e305b30b1b29deb8efa1679b144546dc3c'
            'f75c2c0951d1e65f3826827dc5fde28556d64e0f0ffb9bbfd87c1ed740df558ebc3687fed166b36bbed95baea59ccebbf5db31f2f4273b7fd97c0c14c0afb4ab')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
