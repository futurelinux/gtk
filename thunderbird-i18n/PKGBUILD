pkgname=thunderbird-i18n
pkgver=68.6.0
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="https://www.thunderbird.net/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

sha512sums=('abc0811dd99aea220ba4d2fe2feb4a5ff20a237289a861cf612f7c71379a24dd156cf20da1f717c466482204cd5c890cb7fd1fe741d4be403cbd1bc8ba380df6'
            'ca6a2378eeb938bbb9527d45f02dc52eaff8a0527d5b7b687af95264ff85a0bf48630e8a8bb60a43d9b673702454d00cbeba2d1a86e50802e10306b66065903c'
            '6bb519a0804383f9872bc5fd8cc6489201fe68c29ea8a2480af40d5dcb476c6ba3c83ba8671dce0782715d364776c048e662121a60caec11e5a055ce5ac5d12b'
            'fc2e89bc91f893192a6a31e09f34df2a95b3d20c05ca9f32f798921405a6eba57f4e938ddebfb46b80cb8a3bddfb4c207a6a92aad84b2fb99f5e2970c16fe9fe'
            '6586cda1498892dd1ed42090705906eabf9e143db55fcbc67424f05d5a8986103751c6c7be79fdce4a2f441addc8577729fa6c62a14edc47974cc3d21a26d158'
            'fe63575feb74f92d9e628dee99c8ce204276d5641b866633a973ce802de31b976ae4fe3ffb232c14a0dc2b020482db8ebc39c0aeaa3e7af2bf878873a23ee04d'
            '42aca6079cbed98985fce3af577853f078752c54aefa69148521c1bf36eac9a6fff8765ebee1678b210d21cd403d8e572d522135654587225806c7bcd87d0f79'
            'dc7b08685fd5fa0f1900cbb8a97909a5d7fbeb3eb01cc529239aac829610e605e8b1b36b25e3850ff42b127a7e74eb730550fd45d3558d1133bf3f890db39671'
            '757711a15b0c4e961eae7671819d3c10d94fb6af93a3dc2be79001699c134b2dd85d80ccc179bbb18a11b331a122dff6cc06354c8c7d781c55b36fa959de00de'
            'f8100c657f5f4f80447e1291be579debcb41983c9eb05f0b3bed2838fbe72f5cd26ea0e23adc87697b1667686f0fe395bc88c313c62ea3270d11494ee6519e85'
            '639f88c26cf6b9ce2490c951c879b61ca5229e2f8f1e2ab3c218f044b7d63985f2edf551ded18504a2842f454ce0914f9fdfe75009c9855cddb8d8550a5d0d46'
            '53ed071ec8c9729873637fa8a63ded9952339c5a30b801ce2b1450ceee5e6ab90e086e90eb97ef82aebc19216e0aa9d2ce5e5cc11905a5a1cd95d7827378ecae'
            'e9fcf8910dfe8d8168b876493613150d8212a6346846637ab56404c223caea4002033b596e0366c1a3a4e1cd10b1fd753f10fad74fdee4dc45cc2312af4824ad'
            '54bb60f5e8048060d45417a52e46a5908dd00634015f057b523b99f6aca8aa7f779b6a40f731c4e08b0136c667afc0a789224e915116df863c5700a77cc2a927'
            'f2bbcb80555524c9ab734a9dd2c33cc5d75c66feefb24243e5c6f2258434c720c2af66948252a0b36bd61fc27d606b337b3dac37911378b55b52823ceaec4756'
            '53601e91c5e1d82120b059cfc748e397ac6d5f359c975cdb153d6c248cf48a360c07d3a7b51fd19213248fca1a305389a28b7605244ae5285ea09d378171602a'
            '05be97ec4828b705733991dac75c6f9f98a2a06e2e29246cdfe8a988d4b5ae107a65ce9a9ce00bb0acb11cae178bd4ce4bc04a1fbb5996612eb4de3b7a741380'
            'd59872a6fb05cac301bc3b0b70aae5695271afa2df7417e3ab558ea4096c91beae99f8524df79329f167de336bcc3c50f60c3b8bb37c1d635d4f805ebf81ad0a'
            '6d4c8cc0dea68876256dcc91d0fd4ac033c6ce368160c037f0d18794c8aa8ccbb68c763bc0a2b25ef91fdea4e3066cac97ee32be2ed1311567ee5d66b97465ca'
            '1db0b5b31afe969e389cb4175dca9e590b907e7da24d5605f79da71d4adaae5e46a96bbc72cfa36870ae947f6c829b9106e27d9b329c5ab2af449795af37a28b'
            '049086887f57c4089ac95e9338b3964be9a4f4db527bef09acfedfea11bba80cc5e7d76712479017397f2c2d02d245d8e5f6beb07bc158e64a817c7a735cb22e'
            'f3d678a6a4ad0928aeae8d9d3d02678321dc2df510391fd7db29c070395f302b9fa48979ab298ad72a3f7508974c2a5b516e07184569f5866b8356658d7cc523'
            'c07d1836dc50626204269d3d971aa6a26b2a3c2664a17eb726e7bb936867993b28f238c8896dd43ccfd12e8a68025bc219d1c08809f357b928d4de228131207a'
            '83674fdf49b68c5d1464d74c47850c246b19c5e17e4f4500ed5de6e5761f375af86e767e80aca8f09883e22cbf309b95fc6ad81c33423c1a74775a83f4872d55'
            'e0bf4ac5f343bbe0124fc91e6b98c3b0508b83651d8bd3fd58692e94eeec36c991dd4e665a89411af259ebe1a41582e6f4a6214427ba2ddc25b81f10fad3e314'
            'f2d1d8e5875b5aed177ac8b6756aa323f10e708c47b3c2e3be92305bba31e4e97a908b73d7b44ac04766967c88243ab28e948fb7ad6800e05b404775df1a9351'
            '6046bec73e322669b91eb58356459e142019a525729fefb71da04b6899f2b95c21fde0926a8cb847a5ff456cf84cad2643ca3c28ce1661bdd7ea520e17be6fd4'
            '4b9a40929898147881400e474c77a1b02e19fa4d17d5309be703b810621c4fba87e8dfcffa0663f9626d50c93a989faff55c8305e7a9c83f9d9dd3eeea7805fe'
            'c1a24a1d25e03bad4b2af319dae43562876b1a181b6ea5669432d10b294791f67fea0249da27b0bbdfef6bd4346e81caf5f771f443f5c16b047712b75f41e1fb'
            '4e861d25c041084991c5bb7e2bbce9dd5e066349cc7ed39270b2991257486f9d8d5fdec22ee02ce9c3e8ee7cff23510c14e6f4b019ad5c8c9374584812066317'
            '5afba9073ed93a521d662a3da18952a0cdd032a9af257ae0b244075b6a18cb6ff158349d1ff353d478919706550c349cae06e55083b6db9c8e93e30fe9a12586'
            '427686204e43609848c70b1a2e672d4f00930ba6faf3ceebc998a992c18e0092ce55fa8e00ce128cce913c99b8787e416ebcb58e5ece99f9f93563ae30aa8aa1'
            '20624a5686a96ceac2e64c535e34bcdae0f64805809ed20dd6464f7261d34b96e81a4aa76f30a1c21e09d2e3e1ea6ba2c180b5ca2ac03658482127d034b3cef8'
            '1099cddd0438794fca1121d4e2a207ac21ac736523876150617e58351ed47c1cb9e16ead079cf96d7894ebb8386bd6f9890a11007a9b6b221a33d0a3acbece8d'
            '473b5ebbacfc2ef049073d90909f3bd91777dc16adfa08f4e90063642c277b6bbbc5e8cdae2009963602f99210c5c8b441e8ac55121b5b5ff5facce35665058f'
            '9dbcfaddd4d24b39f2d41eadf723ffc7a4509d909fa3706b0448892f02be08c3e74a55c4f301b11bfb06e4b51dc83675c43b77eb8643852aedf9845a8fca2d6a'
            '5cedaef8edc1d63e3806eb36114da16e9b0dbbd1103faa70ad7d9cc3549be9907d262dbdef06d92491cada1f138faab2569639a65a9bb35049a2c2a3bef05ee5'
            '56c7bd2b019a9bbcc445d7ef2b1d4ca198cc356a14798d2f0c732e5585a19446cc93a67c3429dbc9c0186b7166aaeb53d445eaadb3316af60f1ce901655147d0'
            '9f8d8ddfdadd95e4345965487d875d6332c1b4bc393c2ddbba47064cd195c746455a940703a01c8ab5c591438a6239c4fb3da2ca1bdcc8e784b9e32fb73771e6'
            '4878a308ac73a5b00234444957435016507efc3f53f4583d8ac56e8f185712e83da63b26b4ac21232d5da4d384a2d121bc74074905f335a50a208b1b91708240'
            '144dfa3999df65d02f0b95bbab74691b7d44e8614a8cf661ea5b1c6327a735ee09fcb92eac25feb5006d69a61eb619829f37dcf40eef320d56dcccccc90ce531'
            '59c78c5c9dc9ed3e179ae84ac1d55e95dc419116b8224723efd9b4f62aa0106f2af676aca72fd2515f9d2ce9c2257e58dbaa4782e990cda91e95ab4be7f3d736'
            'cc32801ecc234a42e9c7f71ddc25542dc3248db318f9aef22134ef5eeb13d52d5281d1f394fdf1c7fba9254dcc9c4e4b5d7983486558355ae285ed49700a1a4e'
            'b5322eae8d346b94d9ed886a26c8fc245863070b0b499b018e65c39e1dbd31a45bbacb31ff8266300ad4900d5a5c87da910bf7beef1983f102238a4fd0bea076'
            '2d1c7ab69231349ce36899e9016f478f5020dba8fac19491ac94521390c56d8e03fcb3d351b9f95b934c9d8b2cf0b0dcbe37a41104f9a7e75c2da7a6ceca4128'
            '44bc2a67698667ad3a5051c375ba83c86d0360bdbe7ac957a53d6433384c098710ad0fdfca3bf3f42fe461611c8c04e40c0200f082815b23b7c744d703025324'
            '2c5ca40f4e9474a97f49d9fa03e956710147761c5d46f01812d31c791e9a2dbec3eb2ec2d85d0fa15d524f7484e963e4db9fda2ae3bf0fcd0ed15ebcef7d9d84'
            '17b40ab24c92cf92cbddb5dc44b32bd4c2e175b0df52d4a9211d079f7d7f64ebb334e756848f20a666633a1417c03bce587975bac0c2f0e426be42377f9a65a5'
            'd23860ce69c8efec7a97c017b19034980b071c3d9052bf8869fb0795f70ef2c31f96ee6140f2855fe3e3c83041973ef7e3c03363307515ed3efc0e4ae0d00977'
            '6ca50aeae25dbb54a94d2cb4e2eb6ed6b12ef4f9a70de3ca82ab2f6ecf900d852f4c0c7a1bcbd2810ad466455bb56d1156cd5ff0602e4ff59dfa350d72c0f904'
            '8c03c3d9f1f74229ea1bc2701de92e07f866aff61daa0031ed7425e80b5853cd94a62d3b34330088a1fcd32627d1d136b2f89fb9a555453699e888e4800215fd'
            '0fddabad83ade542c545ed793a0b1deebf3a862b28367c00a9082977a77c231840671c0ceecd120d0750bbb9647894b0a9cb60388a29a624c9fa3d0e451e0ae1'
            '5b338f2f05c704554962a14864c41120dbda185827270cc273e90118eab966afdfe363e610a3a828935ac275865d29eae8aaf3cc4d05501804a8e97c370c8fb0'
            'e2ebed4e9b21e073cc0c09e2e7a79627cf5d1dd5a3bc0cf31892eec339a3763bb2e80e013940fc21375495d861b152aebf4e045ba905c2bff9a2cf21182b0a56'
            '1e1ddecf4dc8f25fffeeb4ca5f759ee243db84cb74c9aca6af4dc0c39541e4e4a97c53f97bde8132645503ee8aec2fcc24bedba99405a2e4206d25c72e6cdee9')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
