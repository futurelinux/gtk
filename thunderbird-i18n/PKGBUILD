pkgname=thunderbird-i18n
pkgver=60.7.2
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="https://www.thunderbird.net/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

sha512sums=('4aca808cb725aa700ff4be091aaff1d6bf02bd446b67bd318e9d24e5b77ec44e2050a39d34ae9355ec8c267ccff3a8a9550115b13b6fc61f014137ecdf65cc2b'
            '8f0ceeec768b03d44d44013700103e1c1f072fd16b78218390bd6f37bb30d87124588dcc72df057eeb6412e47db16e01e194ef406b0294bbc5f245fc2cc3eb10'
            '10f6d7ae046654911a7f0992b806b92da9cbe995da7d3f5a3fbefe29aa8b865ee8c842c8fc909290a1e2f8135842b1138d6fa1203708e919d07e43f248e4185a'
            '8325403d4284baf2d4c5dd1c322bacff932050190d7701a075964512503cec9d1fa325b9fce7968954e4bdf5feb3d094c8757d5c5dcdc63546a47e9eb8bae89f'
            'f38f68eba5292aeda34a9f76190eb860d5d6e3c13fa6f7130b15564df922a5afb451263d26f5095b206942daad3608f9061fd48bba8d3c0328eaff25c448fe98'
            'a16b6ed229c23c64f25d7cffd5ceeeec6807ecf9d78cac3e0fcb0cbf63c820ca2b312b97a8b1218359d1583ce36969a08d4513a47bea98bc4b1e15a6f2287ef5'
            'e9d77ae328482e17ab022104565c799ade9dfcb80d22037b3e443fa6794cc82fb6f13db5af25e02f449af6b08e734e6148311a14a1b0ef6b4598bb5306b67d2b'
            'd937738db0da179384461b0b0ec31302a19152ef3579adfe6c76c13c87617a7eda82eebc4a917b11082b13e8ba16ea58cf4f20f42cd80f52d5ebcca9c1cab625'
            'a6b3e24f490b9b8b6bd90d94c3bbde35502b0e18fd6949fc844b64ce42c89def0eb1bb52541a2811233b3ddc1695735ca78d761a8eb99adeba5b1c6010504327'
            'f509193cf16bd504f13f3d4c8a9cdaeb3dbaf0d6f4479f3bbbbac1abbbca6193eae43d79a8b2dfbb32b8a8bf09f24a58a6905372589f0968fd3e7c97ae27eca0'
            '69f3b730d8b5ffca12f97f951d3cc6eae11c45a5623671be438b8e10bc0835867db7b8dc18331a14fec8326ac15c5d35a542f35f25aab7e89e297085edbe9d74'
            '77d0a72163e14e6e8ecde4cbf1fcf519ef319d709ebd798c73b38fcea327369896218a90c5020ca6ca83257d21527e87fb23685d80602fc5c76ae6d26cc680f1'
            '6730d1dfe7b0f63cbc71b4a3a02b7d0be3cfe2d58123073eaf2a3befc12b3a8c82a22b2bde87170cb59f0c2d34b2402beb27dce652ca457a9128571c13791a57'
            'd0917ec09593decf46204f76ef5a27f61ab41603a8a36ece2bd04ea7acff9469d05a46e3d603e5172344b5efc8280b2537cc0571e7da9623f2cf2b330e4a263b'
            '5c4a575399c9efcf33629e6579afb7ec6c5dbab90a3c589de77e9bcb678dba72817c80749171e699d3ac02d15745b153cf6150a8d4a9e6b62478250efa8ff98d'
            'fb54f0ad9b6047d2dcbc9d4a77a2c521dd9c51071c5db31beee12b58005b5c3e1632a7fcc778b0e1bcb5c22912982af57d204cb9474949c1b64b5ba90b9ee45e'
            'c89eeda232a6276e6bd50d52d13afddad59bae7386267249cc1085babec1b0fd673714eb4112184a9ebffe3fef5b9f6b92e073d6ca991dd45c6fee3bc8996167'
            'ed9b078f303d5fdf58e3d53bc1de3026c2804ca1af5f70e09222b256e6fd1bb39422e0e761d6a52faa8563d79a11fbf41d0af66b2504a859b494a5b14d174d13'
            '415c00736382343d104170bf51d9a324670cf55167d2359233b113baef7cb2cc40862301872b494f0dc61ecdbd183b531a62eb96a4b481792887b95d1c57c049'
            '25120acdf64468314ba10ad625e3bb520bb720351d7f60c626dd148d551eb679353368179224e27e22fc649056a7ba6680b4fb6538928227d27f40a2f6f336eb'
            '6153da7e0026e10b391d51d8a904920a0e0250fee0f152ecf286830a787491b171d5b11b7e1cbbbdf8e3ddfeb2de71090eddbf12617afcfd67ed0001900e843d'
            '86d424e5b9879845f2c9c37038cb713845ce1f3d21986cf5c5bb12ad9e9ee275d6e89235e050c60b0b8331e3cd54c86ffcfdff31ff5d5643ab80ad50c5a81f36'
            '8527fe0d4f48806d902ce360dd633fb42c0ab9460297fc4131682288f708f26da300df8613d687c4e5129a592e8a295045643e0f0401f15f9255dd0dd4c20967'
            '3aa9631d50fbd40d575b04d5150b9344d46b3ad3f31665711f6a0309f0449daa3f8374b0ad563ca637a2c5f951e897b01251ec593f14cf2c2383e914b3028881'
            'ca8d12ff2785f51ece645d97ea608139d8e72faed80a366d0c49faa78da67b6a8cf8eebd2fb9cc6b373bb455b74b3263ae438a04ef9596f46e7d09eb909d88b6'
            'c6699d3bcc938eb866cb07f7092264749510f1505bd01871be6b325fe18708b3478e73fdc2c814b9b0c71d2fbeaa710baf98c8598dfc3761425dfd5f1bc839d9'
            '092125c43ab329cc8c6904152860894beda20af11a8a8df9a681f1b61862e0edc637fc3312db59cb1f03870811f72dc0bcf369f00ffe2245c4ff260be43c84cb'
            '0ff5a0f2478167927f19ec3016ef67b9fdb226ba1e7692b5fb336af0bf0f0e249773ad2278f41646081337de0e97120ec132a8b47960bd7c98ad86b3c4ad0fcc'
            '632a68f5fda792d0d0cd6efbd3e3fed7a51ce70d05a184a63ad124412d6d4347c7e4fe69651d64dd837294fd2a5f199166a27df07e83b37026e39139c22523d7'
            '4a5c5a3073b92cfc72628bebc50e5e71c613ae00cfb45a61f580db1be19dbdc83e555923e0d29470e08c9c07c0a4ba7ac0a340e3d562caa48982617503cf29bb'
            'aaea3f9bcd07da7d6443e4867ab5e761c48226c3018b61f36c2ba5ce288179f3d2be67567d91c31c9643fbd18d156edab810881bc510cce303b6828d020f54e9'
            '225816b1853aeea433923aa588146a3495c22d17f79c3a5f3e6f38960f722f87f1b804aca4a0386b150e3329b34e1a57dfa2eec9413454f2291adaea4c32d200'
            '4a17f939e19072cb79b0d8dec7701815403eba39bd1ba57a989b2441aecb4770868b232bc5ec44cd485b0ba2292609902a90dc660f7c4c9bf4a0f1f313c3f92b'
            '562d05d5456c10a5310a5fe976ed6760898f71e3ce57cf0bdb9ab65701d0d08d3c5fde1a9fd51179cc9ff94bdb9396337ff8a32cbda5bb99d29cde011ea71a2e'
            '044b2dd8af4b9b640f009326c8fb226f4312744ee8493f7e5e22d1ef255ac114dcc3eb2c6b624f6c90eb95c097600e373099da9ffd12970ab617eebaa14da803'
            '6cba8f4c2aa70c76886eba0e66e293dcb6aaaf1571f24407f6d5751eeabb140069c4e3640ba8915272212bdc3aed3ad32892efbb5ef4ecd244d31087c1093dc5'
            'a646d2d4e5bfc51e7553316222273c4c9378e9270eeaefa7937cef4882786913fe7a8a66660462f43da0aeaffa19dd302e3e7534279c886b2031abca369e73d2'
            'b42e8c465e18d4c811ea351093e1c771330277611c99add60aeeaf142d0804008f61c92f7a60823d319dc6a7e9d686741b060d27255672835f5934d7df18dda6'
            'f1dca27649bb92ba45d8bcf1a2124aa0d0fa875020c4550b22a83b81f15bcf372b2f93f31112f1b2832a523bfcd497361c8cea056f6803e0b0de231d4b99ae7d'
            'db290e4ec8821158751daa8e95fd11a5b931e4a28e4e5e44c22203c84eb58a74287eca6c1d1450df6155f608233df9c5575fed6320682080c2d7e814faf9d51b'
            'c4038451b60f6cd2ef15707295602a3e8dee484a70851d8fdf1a69eaea52a3fdeb900e03892f8fbb0a53628aa7f01e2332ed86f03007b6ba0aa12c9bbc2e6a95'
            'a8d5513a31e0b8c55b4ec50fd22b0e7c73e531916b43cb0a9c89b8fc1ff13077f5fa583d7bda1cd5d0a96ea14a9a3223158e80f2e5b449684225654ce8af9001'
            'f5ef9dd61bb40ff78a755929ce4158d8f731fce035d47fa5c1bb35e3cff81760ec35d126575d731a68e3dc09f1db1dedb7f839e9ca084dc26d8375d52990298c'
            'c8e820391559d2755756a28bcf2748de54333d2c64b90f420adea5b9ee63f1e3e5847426f155c3d33744b31b2752326ad9765309efd042a6c5f1bc334846dd45'
            '5de326cfa30013d07ef8e343a6cf8c054a8eb189cb79a9eccc0e2449d0059727d4e557db4b649461c0b2bd0bd7d7ecaaefa52ac5c68bd169139821ddce326de9'
            'e02f8c2659c1ac1a8b70d8a4b1f891d90f9cb1bc948e2fa0bbc062fdf4f8e035e71e39cb8ac9c3e48c7e9f7eae7e179e8c2d1072e79102bc87493d42785ed826'
            'd544d3a57b3d3c21d43804ad75e9add2a6c1cc1ab15b0544c2a10f77fcd9fffacf88a263efff5094d6250083fa0d04b787980dce793a8de8122b4262a537ea5e'
            '8aa10288cc1aced6d6ca6da974f1ffa6ba1f1cbe5f1435d0a4779a7b06d6228ab976b7b1db219c8a650c1df5b7bfdc5930effc909353092fdd272fa94872a6d8'
            'b2b1e5644c7d068fd6a9ad86d8b50833fdcba83300ec09ca15ce02eae456dfe287460a3641929f8a040168737e7e7fa56625ca93624836d5a89f1530201e2778'
            'cc8786143dec43b6b12b28d587eb68df6d1b5c5977d1909880251a7ceba7c84d7b9dce9f8f3dd8ed21b046392dc4bb4f4ee79306e20d5f7adbce80c029cf57ac'
            '24ff9bf278ca96eda2b61dea8a5f96ec2cf19a0e4a0312a84226027d27d8c09b9359344e115908feee1d3cbf442746f55794e6a4fa007ab9b36d90db1dd0cf15'
            'a49ffa3357865b9dddee981efd3479c3f37403273b24bc9bbdf00c3980958ca178b2612f38b6b6ebe6133f647de365d01e1a9f23d76fada583b265121f189719'
            '5147a2a3878e74081de7a3f935d9a2f17b3d9e94b33abe3de07167617b482c0265b4d66ecadabe88370c1be0d24abcc67b0e9eb2b5fad52137cfd6b693b21fbd'
            'c40f59109a2efe8cbabbe2018e17829dfa6dee6e6df54abe7b70c14eb843ea0e35974c5b19b5aa790d7ce2eab159ed9562ec215c595721b1102e4965149a5c08'
            '3a49b28fdf5681f63ec9a2dd4477ba4ad43566e161090413d3d0a4711c1fd7804e480a3c848130281ddbc023e4d878928ba637dd57663b5aded75e0c10631efa')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
