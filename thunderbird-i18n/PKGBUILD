pkgname=thunderbird-i18n
pkgver=68.1.2
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="https://www.thunderbird.net/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

sha512sums=('99774b0dbe320978f7889160162f6d4f46496ded18fb24d445c99e0365a0af1401d5e9dcb08d0b06293bc83991933d16079af64a4eae9cdbced1de52d573f694'
            '9831f58be97dd1fdb222ca5803ef8fba5aea0e768e5bfb854a300abe236a999ee6593382f1c3bd07464a0b50fb2466c4a6ed9fc9510f64408cfc0319a13ebb3c'
            '453f187913e70eae2e5477448046ebfb7cb0bba9064b9a084b8dc77f0b1a8f921ecb9b7f426505696c123ee4f9f9a3255c1c91635db5d0a256c61f014f345c53'
            '44ba9dbbced1681ce31fbc0257c8964d6fd4919e5e6e3977e552ca35bd4ed3944b1fddfd0b69b9aefcd406d8303fa5ee731e756e217a4fc2b06df586c5ad8d35'
            '466d679b37e99224c8b305b4de8f2ec2ac45587741718c7b6218e9d78ec88b334d60582fdec1189a505236d3890b3193cb53da1b0ab5ab6467a4fd554cf67e2f'
            '05e5b40194ecbd6678fb8fad2c163f7e31623262033ed696610d36db6a49daccda5f8a1bda535c34721670f5af23d53179c63640a2081bdb1cddfc91dcf06075'
            '43c3cebb565c81d0cb45bc1520366f15574f45c3335d3b07f69597fc4e11aaaef0ea02508a5fb2cff6a70a585a5d6cd2b9c28f7f9f4b38eefd16f16b3d1971a3'
            '065954ab9130910d298aee67ea922bd2f6f195d0760daaf3ad053ce141cc9dbe89161d8dbe42a93696e01494489c1b5020960c88c2c2b5c0b09ace97317d9cd7'
            '18b1860db2ad0994af5f78e9b8f5155da0fde3dc992189fc240dbb039496dcf2e554468188da6499ad08a9d17e514b6aae8dff195839e0de39327dbfbcaa171f'
            '20a926d71a424626139368ffe21408d95c376e8c3e0e2c584574121a165a572172fc5364fa2bc14c16ef41a2d9ebb24dc014f90088705d476dbd7c263db6e4b3'
            'e3d59f082204edad8d11e599861d699ccd37418e4b72987f43e59cb68e81b4e834733daa1385f61fc28331c39fe8718b6ffe612515c936add80a28aa41c5a1de'
            'fae16a5637720c908a0f02acd72c88c64cd0929a3462f21e9277448a35083f659219796a1f6ba61094c47d28e3b78fe208203e8654c63c32eb1a4b0448a6bd4e'
            '6a9d0adeccd749b584f832a64d91fc34adc6c20ff29ec20b24e775c83ea5069cb64b213c5f2557ad46ca895a33a51bb7f373898e400ab8c38774a13ae69eab71'
            '2c4875d9f90b73b24c725e035befb3d5a0879f8d94c50d97de2821504163b3464b1ded3066c320b10fc628970f395324867f3fd86149301d7c256efedc751a2a'
            'adc36fb0d62c6d5ec1fbe0adbf2f74b67b8cdaefdb2764b2812d8a2f2cc09c0cd4222860c7bfebadd1b4d10537f34063bcb0907cf2ab604e6a76af459486497c'
            '35a4334e32a694e9053704bc47e450a3638049159452888a6cb4feb019c74b5be15bcd7096964bee7bad846407918f656490ed4274b165bd0da249fa54777f65'
            '7736919963946bcbf4d857b1c55300969296bcb98c05704d9b7942f794bc106fe7488c5990891983879f65692712bde4eabe1c5a18d260868a445726d539abed'
            '172a23c969b271bb86a295eb3b93682f2c5d8a6735b5fd7867ad9cc732277a5a11627a9a83c33d7d1e3ab2b843fcdeba5ec2d98e278ab5c10fd842f3e6d7edb8'
            '7762d45eac64a83fb1d6277f8619f0da38fd83e1d14781d1c814cd832bc3be0b85e8e3eed9460f7d727c079465cf364eb90f8c330f104e851b844d99ad673f39'
            '199f850ed0b6244e9329195461c8abef70cc700f750d60395bb949bf578f93b3bf7938132ec41fdbc00eee1c74b6645f22126ad932dbdaea41d06d9b35c2f1b8'
            '020f9c1108b7024c2f7e82572ca5c42c0d84a6a3c859128179e1d1b596fee03a59441409cce85ccd4c27904361dab305ed2aa5bb18725f9d7ec3df68b22d5a36'
            '0137a44dddf57044c6d4e66270e0c1f801ea6c7387531182290a4a03cd3a1e0dbfc69579ff942eb880bf2875c7a874d2cb4751b07b65edf16687c70a787f24a4'
            'eb1900416e108dde65e895e289defd9ad93df9ea3d27bc6c99edce9d51031452e0b085e822a7021d54bef1c7febf180a3aebbd3cce7517471398f62c847329fb'
            'baa52096848242b4eacd347863360807d2d8a209f581ee6d7f731f196a74f35126599ea0b0871d40fd09d9e35d8873d5057fe26c4cff037d8ada2fe0317a2dcc'
            '6feff75affbfe455a4f7a109d72a2084a1a17ba7e9bd6093e78b770bedd3de47bfd7772dce8b363f49e390f9d7fa55d8b696035a060923d68ad32b6dcaf67655'
            '8e85370e4408980429424acd7bfba91596212922203881535ac53ec3c90a43a2ba5d93df38f094c4b9100e485d1e55d70cf8c43cb76c6c35db3d964d430f82ac'
            'd807fdb93ce57416cb262279f779bf4d121706f99b0c47cf7a9937087399a0fd4d11c74a52f7ed374b277cd7effeeb6159b884b27038cba71b76c3c9e83a7862'
            '6e1e1bc5d1335f568b0c3d4e197dc331e334686e1643c5bd1c34c919c6009a702e4f46d962e73440e6fd3c70ac5b1cc3cf25d21677a6f458dce08dce1f4cea92'
            '9e04eef11ca5350c66b124838f97ff773c93cc1d43f4c821bea0d33f753e0aa5c2d977a0e5dbb451fbb67a90a3477e7cc46a97f94330356ccf940eab722b539b'
            '21f67f342004328cc1d239e50904b6d698f77b928ee5c825b5cea115eca4ede98e0c6e366f04efda8d19561c749456d8a7bd9d0bf38f5cf1efcd16c1f1269ed5'
            '8aa5c6910db08f1089adbebc0f7a8cf295f870b0f293dede648f7d28061e839c3fc5894910a09bf01d18b425d8dc842b4aa62cba8aba73dce3c522060ff92653'
            '33bba9a3243d806fa73cc9e672974a63134082b7b1b00bf1dcc1e0f873c3dff23e734a73ee8a8bc8d358e3d588de6af4a39d6e822d764760fd0b210286799704'
            'f9e15a14c65804334a432e634f300f01578eb9e1aee04d0036249c216a6e53db8f678a79fc2eb19f99bb11f34305f840da048d4cf1dfd696f8609064e6ccf3f9'
            '112455f704e9bcefa22e1730c4d57c4542a6a3778ffc82b744aec4f0684363dd36e16916440b7480dc61a9d2eed27cf7e239d94c6d702b51e2c3dc96403fc08d'
            'ae1bc36bc24dc9b9a27d08ea963204e507469f3af433b94b9943b493b821a6802098b946211f1f5a232f7cf1301e69be3055ddb0f99dfd26b0b1116e7ebbc8d7'
            '8b7aab16eb3dfe85827c4fccd878ac5595e07237399ac366f86ee48c996dfbc43ddef7f1457e2db359351901240022903f99d15e09185cea64ef66d019cbafce'
            '6c9614b65c2bfe56e5352e74fee1def751a1b3ed96411edb9a495d855a0e0f9a264926c5d9b096df804909ec855d9329d7b9531fa998d4746e8e74295f3e7596'
            '9a195c80f4ece4b8a56e7af6b93981251ce388551d9158b778592edac5172d2f03a2f39db73187ae3c5c165c30797c05110247d83c91ccd5eb728d451550e52e'
            'ef44cdc31116121fbab7fc54c37f4ac1f95efda6beee69e95ddc2f9d0ddeae8d89a6c752d710d7286ce8a0a1b06d694fee861212eb9a20ca39d01fc79b48de94'
            '2efad4e85a65bf4d55a155aa58961950f3f833f71e0fd6ebe533b9411b61ef7c7cb72df6855b466bee7c12d310d475349929f4c3cad07c71bac381f6183d3f70'
            'c8aafceb28971ba4b7e81011224348ba09275bb8d148b895d42403e4d3d4c7f2c72b1171b326ff32e377baf523f7621cced39feffedeeb6e8ae0595101f2b248'
            '31cfb91a2a1f1425136dc807b781dc072db022b238c469f6223774cab3df77db02580a5d3b6b7abb2c228b1b890e3f53926f94ed00056c2cfaeee3c876f9cda2'
            'e30f240df2d0c3ed4d134f1b7e618028e557d4206b0aeca73d1faf019bb5d88c8b6f454e22d670447cb147756bbdb30aa4ccf76df14a285fb6b5c888b94f7eb8'
            'ecc1416fe26411f3078191aa3a3c7fc4c995e14dc6ef503fe684b51f0ba5fb486c7f527485cf1b7c14dade4d4e14c0d93bddc74c2cb8f9ab1f23de44f749a690'
            'd92ac21556471454fa15f6b0309d169e5771c60f135e678fa430b1ed180adca679e750b7822bde02a05761fad29863fd5c16fe6587ed973d15ac5d217ec46901'
            'd5c3e5f270f1eeb2ad7fa4ff75f50d2d84cb4e2f6b79ec5562c9ddc350f3a0e23f7cc8c78c46d396185b2c19af8d1a3e448b21487b2885e6c076e40dcef2bf0d'
            'e5f96821bd2fddb217da0a6acb5761ad10b8ad6e5183c6347f4a6fdc832c40b20b94cec9a4b7cc3418d3cbc784e474497c48eb2d8f3297fe4eaac7371324ec71'
            '32ad0c6d7bdc3f19f7043ef35e9757bc17f0d705818d504ab514e1bce71336e2e1bd2f418e3f5938e36c74e1e1177204f92b307083036f98f21d7cd8962e7f45'
            'cad87a981903dfc94b27de7a2f48c74b56d395bbf4b3005aa314d89fb6acd34c36978bb567a999528174d6e9c94a5b711a7e47c8b7a4c1cf983fb6663cb5b1d2'
            '9f537e79c0ebfa9ea888431e185773551f53b2020a6eb77f1a04fa16d13597283cbdaa51f88546160c4f91b898bd85c961460a35b9ba3d8c4fd29dc3cbbc7deb'
            '7582f92e51aa7d7fa8aa7c23e5d381c57544163f50133450ce211e4ec1c71ee5bfcfb82bcfa59d41a9a9d8bc7341be43295b5428008f0995836afb42f6c76bf1'
            '0c477271460d148eee59aac03b7894b4c944062478ec58569af43b3821302912d1ca0023008bf1327f334016ee19cd68d79a43ec507c84157bb66e5eb7921d0c'
            '391d4802732aa7fad47b3508dc48d00ddeedffc142c6add15ae817ba9be80f2be2a26eb2621828cd05049cf7f3114a0d4d47f26d45b8357640db743b62a0c294'
            '4f487f0678944bd688fc82ea7859bd9deb82816b63893a79b441f661a0a236dfccf6afec8f281379cc25279efc1755648312310ccc673594bf43d5e10a13162c'
            '4f7f989e7bb575453ea62fc4068be5f930495e7620c69a00bd4b14e9db8232bc2132fb5d063de6a951d102e52e8e30b8e49897e25ef2c3694af4fe3acfadc5ca')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
