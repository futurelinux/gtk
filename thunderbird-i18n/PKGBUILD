pkgname=thunderbird-i18n
pkgver=68.4.1
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="https://www.thunderbird.net/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

sha512sums=('a805ab02f3e7b047e1ded7d1970d9f7f8fa4372a2850c63b2a225512667c0ee5b0cc6267eb23fbd343025667a9ccf1042f689ec02e7a0560b1a6f731a59436b0'
            '8feafb855cb83011bc9496a20b6183e026d71f7c807d533814f103ab8d8c67b57af18b40a9279504a66930756c399c2a75d81349d95829ef317b4590884399e6'
            'b8fdde6cfb5a363983cd866fb62ca75e3f8b153235659a69be0004c8d655cf30f254bbcd722bb6f476633a8a1e4dc51e9e1faa16aab3331666610f155ed63536'
            '2693b6545abbef7717505a8b250581c258afbbba1baa014e322c49e1f9450fd8cf89f3061e65cc2ab311776c316833be729912220e62749e52db19939608aaea'
            'e669b4ec3a4d06454f0a7487b50ed3594c0e207803ac3a0ad23b0ba96e5217baf4f629c7477f126ec5845ee81a75ead4c2531a7d30fc2c05d2de91f8eb09f4fb'
            '394582b25d04441087f6192e540718791771f03a729a43fc0cea0b0efdc01931eb8ad6ff3415d606111d2dbbb0b8fa6dc81b11a7648eb7c48b551d4d48d2f643'
            '10bdabdc91c8802506998a2465b6715cc70a6740a715b6d1fbaadee7d5310a2d7fbef7407ac458da561b2156051e6e21eb16bd0a6578807240602308a9d2f55d'
            'ad08a053c5f166010dd9eeb39653492681fe3d3b10cee3feb0d8ce4f8fe0a7e4c6cba410e86364e1680b722190b7952fec29a651d38ec537e6f24b3cd12bd766'
            'a9e92e7195a67d7fd89ee4bcedf34593a74770c0667efa7a8cd51808e626baa671bed285fd4314b20040e92e71f2b1d495347b001330561df1dacbef1cd9cdac'
            'e8bd7f46cbba624d81626d3290b533c6105d9dbeacfb35b5ecb1fda57e95dfb01b12661c5d5201fa69bf3204033b2514e5cbee0b72bf3f06f87ea0b8de7cdfe2'
            'a414eeafb2a1620b8150c7790d90d915b8a3bd73301ee01fd03cafe3bdac8b62d34952914d047caa2fa102a66cf63b4659dc9843f6cea4e372cc6a755116d37d'
            '6bf4dfd5e218eb1c321eab240b3b6b4a8e6574318ad29fd4a97faa28f42050d458eed94bdba07a3f5393226da3cdb4c2cbe0d4613bd678badc9c3ef361a74739'
            '0b89f6f575101a80edf9c564b53af7d884a7247d53955ba0aece5307c0b31a00a0f04f2e6f71fa261ed5865cecadce21a7fa17a16d0264a8d6e753a5cca60285'
            '39b19d701bc70125e870f42355d62441d9ff0e972ec666d26c6a5adf82bd259bd23a69d061e7afb7d94a8838112e48a503f5c7fd3c5da6d5bf9b4deb7f502a57'
            '78efbbf2bb5105d12ec33ebff31ba6258d154032452f62862f174c4ec3bdc74eb8fdc5bb92391276b64d38e9d61c41aa02b7479f7fbada3a9dca5572da9adfcd'
            'ba8517f180adab4ce35775e38ac65736d136a567f0d05c57cb4246c9eec87bbf3b97c6a221c3aff62dbda78831fbbb820940528e3b4be4d27f54b6edd4ad109b'
            '1e52260ae3c5660000fcbfa3fc716a83c3444025dcfad002ef5e10f6bdfdde28ebc606c5f416a3e10f59aea1822676b2bb430fbc5f29f693d5878549e3b98160'
            '73103348a32f31a5930f68546b5fba2a6c47940c15c0f4a7ce43839723f130d5770b6f2d98f856f1693a7b5753f327778245b6284b902bfab3f9a79728622f70'
            '9380164c2173bb1495145986c5fcbcfe983974b890cc140c919bd97285c634b169c818110138184179dd45a0ed8a0ccac855733a69e91f2d9243197adca1b019'
            '9866a32481be4df00a0f2520457de1fde39ce3061a724d4db763ca5fa98250e46551d6ea1b8db34a2262a764f03ffe73250540588d04d559ca78032ef2753475'
            '443fe9b0a1acb572f1f729f573175653411cf57d74ab7f77d3f9c16838f2e928f2e789f09b3577be8de51d74fc820d1a12d6daa23b1e668b91d5254ddd69bd6b'
            'a60f3638856697dc4bc4a12873e4eca158bd567f5a09a4b03f9346e66428ba4d794efeed7caa3d8ccd9d395d8805d666408e99a18e40f5664e190386026e0ea1'
            '1874bc6f53b5b2f0fb11eec617c5302bd99f392856376326946a2adeeffae90bfef93533e6fa3c6afb480bb1986aa6c2d60ee4390c46815f66bc2a36fbc37a30'
            '05a5bbe409425427f7cbe915d2bc232d65824e5e0988630926a137860878b83d38c175c39b57958e656aed82a2e937f51fc837fd775443adf68f4943fed49d07'
            'edfa2bd9cfd1029e6b6c9a43b96f0ac1f544b61c2f3b560e65d9007aa03df7b59bf5f08f1a2b9ea30134159abca4f26634ea07d59778d67b0cf0c7938f5e9523'
            '5a2794728bb22e3dc599276e95e008f423cba622f8a6e9ae65ad93fd37325317b9f74d0563ad6a3eead9c04d530df46c780fa0bb876f43b2f6c6823a2ff4eb39'
            'a0e8fcafb650d47402d6ffc15368f038bf3ce8fc684975fda1d7cb0c0c38679c246202ca2a7b217edad179217d688a04f448873a8ee1fdff1214a9220ae4240d'
            '48eb5c66ff7c224a43b7d7932c5d39fc676a35bc39aa002281c687dccf34f5fdcac55aabc4f1fc15590e1892805b39fb49b706506e4b65d0f261e55d9384f61d'
            '4b52bffdab94b2d20ab80a7e1e48acc9f78496adfaecd1f89da12ee96ee23cd3e8983b5ed2227fab29e85ea480b173a9aecf4d7fb3fa1577d266fefad10e862f'
            'c940fed7dcb95fb3093276bff3069149a469b85a65df26c58b0beb5fc4d875091bfc3216be9db0be9ce0102da12059fffa845d749748245f396461dbaf2ed7e6'
            'f89c03981f8d2e901047109fb74fe834ef3bc559aca565e6b1616c3ede06c442ef6a426e908adeb94ef26f03d125a4383d0b304babe66734f900390416001e53'
            'cdd9d520fb9d188f8af7f22dcb37b7611fe4ced2387a345dbb777f4840934c30e564d609214df00d0b1205865f1ae4bc0938f883643d1a61036c7e870f2b4f1f'
            'bdfc41e4401dd64a8213d937ecba45fcb376e6aebd6fdf34cb5257966d4fa93a3102f0409045eccc24467d249ca51519466969b8370b30ca8bb38721aa807597'
            '258bc22cf918701d9491f4e105d33047a9b072fe02a039ecdb6df482de9c72b6cd628a5f7cd09b3ad5d6551d5e7aa0e879b1b75537c85da6a950aefb6e363ad0'
            'bf6e4921876212debf9707aa83f91907ce6d6537a1d240f789f797d18082ea229f16f75b484252bd99398243e7f1c4cd66d600ef747345ce7ea2301d455f790a'
            'ea197e592fce9e81c4ad752dccf480f2bc70aef9f2625a1178b24ce4b6f3db728864b6fe6823425bcce8d6e7cc82a805063b351697568252db1478d790ccdf45'
            '0a73a591d33b45b95cb5eed23783899767fcf2b3a07f34695194de02c541bc1d707721e0c187c3e8cd8aba648090dc58aa4ef7487ab7ea9fe5562a51da67c1df'
            'd36a779d6bcd7d6b0f3be63cb6da53f4509490bc78944af947020ac008bb978389d556ef27c6f01f714e5f31eaac9b0baff5246bc5b5794e7cd71eeb2246b6f7'
            '63c0a636baa339eced598c1d61135e05f6c4d1edc673ed50da8079b08c69e473ec3d165e28f6648ba764d0226baa7d491be2d8635ab5b4b03d478f3365cb7db3'
            '5b40a0ad405e08cff5f070f2eb174e9392f667456693f6ac71838a70fd06be06847ea7c1dd03ee21338b51173fd5cef4c08974c1d0a2bc6392a8684ab6ab2b7c'
            '0016a2757cac66b88ff631b98255ea5bbda4997c7026f0868d2d31a50d2be288998198f081fa6b26215ab957465b68c1db29616f2ceed706574b91a4364931e4'
            '843f1125fa9f32f3d6e937346f01e0f304dbcbae714ab716d184a7a3c8c925b21f40f47201c70566a3d5501c98e43609f84f02ab4dd98bcc5da35b76e04cd8ff'
            'a88f86c2d6750845eb659d5592b6361f2421cd28fc6bf718e82bf85e53507d7b78197c93bad000a60ddbe03395481694e929da13cf7e280e4e9702451777d785'
            '7479337690453338458dbced49d6bf324bc0226c90f5713a4472aedaa4c66f4c3c70c3d43efb51bb32d19ca08792ca71f066f2c80c75a087030268ddec7463d6'
            '109d19433901168e500c739ba0abb2c5d44337361fcb63db4ed4345a7c9c715154c1636e6a2e366618e91784e32afa1b73e203cd18f4e652926cce4769bea02f'
            'f906d12fc743129bfa22240f5eee34643b238f9970be3ca6e1c25e690bdc6f8ea173a371947b145ad44b75063ec649d05289b07fdd23da3133b0463affaa8415'
            '30729bdab58bad72d1a5ecaee6708ad62285a17ca72e9ba9b06429920226c20c84324b24395e6c4d406d90bea48e66e1ce041bb6d5e587ec0033d352152f4355'
            '73e3f10d0d597bd636f841df4795b6dc5cbfcd61b7a39c20a5cbfc3408ec6faf38fa34813869d9a45cf10f6ebce56aa9632c2005447a18de65935a01b9591df3'
            '2c025c3ff23dde25a74774c988d55b99202681b60179f648416f93a2893fa06f6acbbe964d02695f769e8888ef2abbcd6f2c984b8669a99689fc67eef0deb44f'
            '8a120498981ac4f2cdbeee9e8345773837b86f63d5e8004935d772ba5a4155f3fc96b27ff996dc33982af69152ac6a24c076b03023a453f4e39ab088c062d732'
            '176de8ec4c3ebae6562d3820c1e0a75da6b7917b1767d4c7b4906f5a088311552c3114fff129cd5b9203cde4cd7faf8877a637c59781aaa6f1a6d8060fe29975'
            'e9f5be395cfa557d2ea387a7a8f9ae2cab0756fb07d229bbb878856e5819dc92697b1d2e7b23a100b3361b641e5b69f2b8ce5fea15a672929da2ed258a47978a'
            '49bcdb6b8cb987a3d30cc20107669eeefe27b9434255becca15cbe11e4ab34d80b76299b38b368fa9b3d485af128e980157f0bd0b864d2f5d85a1a47006f7e51'
            '9404956545e739a2ebb4a08062f9f7f3a54ee73fb1a5bcdc604ad83bdda6838dc68acffd8e68ed9ec65f443114cf2d56bc467ba04222b4cf52e97e9b4b3baa0d'
            '8085ca8cb1e976c541c1423d83289f372bf439d82c7b65d81d9b10408f45768293aefe4bb30e83fd5f2b20dfdeca8b522191d5e226bed9d40f94fe1746d5e31e')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
