pkgname=thunderbird-i18n
pkgver=68.2.1
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="https://www.thunderbird.net/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

sha512sums=('39c797056fd7374260635530454ae3406b340041ef411cfc186445d7626e3a0c11d7c976369968e98fd36d3148402bb84d6c79849d14ec3cd25cb04606275019'
            '0487a998cab8b420b5ba662ee35a413bff0b4da7997374036efdb5fdc7265924ee846be891d878d4d0c72d829786808bc2e2f4ea0db5e1b4cb9d4a053134390b'
            'e6cd069f7db33b6bc43ea5962aedb6c3579981f3b4ad4490b40078936c7ed0d34dad4f44f2e1245db40a2c02f3580ebd53d0aceedc1dcd8e5e13645fa2e5ec55'
            'd8835e86f15353de8a4e43f72ac36f54ea1ca0d8d71349341fd8094f197a1b1b0e8734a07c0f8bc2fdb460ac418de5d44ce803a40f76e3a0e7b0c1d905605d42'
            '944817370fe07d5d56f35e73f4ff61bf231ee7497dec1113348ddbdc124f34d91a661a6a431d4dac8d3ef2b8182ee38b72c8bfda8fcaf060f29bff29246d69e6'
            'e5aae9535e1b04b177409d2992e59419acc4d28541c301e431b708709a1ecd0688b29f31572988d82ae29e0f79c8f4ac8f1fa0576c80efdbd2be36d7dd44ec14'
            '3c21ca64187a54c9d9c3dd186c12427360e7d3604f0de56ca8ed17c359cb69319cf11d44c9362f18e16c801acf9a435883209055962d50825aee6e2b282116b3'
            '87a77ab3ef612e21e562bad76d5bb54c64c78a3205d057452d14cc3eb5fdd82358c7fc8989c5be2f981dcd1086a5d057799afde9793c35b36ee7ef41e904b4c9'
            '43417fb1c90e398189e9fb5bab3ca3218041aa73aa50577e9e2a4c730d9e3d68277dbf9ecdfcaa0ea575af18382174cda502246f226656fe1648fe964a80893b'
            '2b5cbd75e1cc11d2843a349282b3dab52b28e640cfbbffe91c90725ff06dc6e31ac462ae7162d3f906cc4f1397f9e39c0820f8302824ffbc150f3ed0583e859c'
            'ab249550d159c53c0c7c8459d714c9ddd8613ec32980e414ffd40fcedae4ef571d85e8d481a2eaa8f9fb42cdf4edc29f412435431bd58407843043e56bc84cc6'
            'd375bba5d93648a969c8378096af79072def9a137ae698920bd6f85321494178c2173f8e852e6da1d7260d0524ca8e74fb5b2a30039151495261f13b97b16df6'
            '9d7b2949c1c0537d538a3b66901db69f1998dec2bab5e626cb02df435869ec93cd87bd0eba9e7900e036e0ff7af9efe07b261c5b26d43eed760c765bb9b94d93'
            '70accdb2c6d3d6af744d36276305c1b3d2c0ea348b2e9479992eb858bea7ac637829f3101b03eae1191ed1b23e93f93c64f2ea0500818bdd0ea3b2c84f3f7901'
            'aa476e526985d4597e9ee42ac324a5ecea039f819e3e44dda6dff8ff915b548d6093d7fd80f5948dc1ef1f8fda427d542481d2ab02090c2b967a7e9d17523e1b'
            '12da85956985b60d3548116ef286d0676c9ed9f07c0d6a41fdcb6cc86d41bc5233bac7ff1e037e9f331f16d359ef5d2920060b67399e3a9c3037153847f176f1'
            '9c268d201789248884719ddb8f903514e74fc213bf3b68b9296623590a8b7c62e2c35ad860988ce41dc7d2b1a9a11621dbc9d24a57223fc6a168244669352715'
            '6105569789f125853e9d87ffd7dc168aee4edadb4218d275b41835e6d728b47b25fe090827fca534331402dc19946a0bab9a8a4f8a796f86d2c965f4b187e1ac'
            '72b1273fe35c665519101e9369c6f9e76275d5c7a016e69d2836fbfbbd7e7671bc17880f5c681665618d99f14aec5d1ed1a3b5bff3e735ee3136a500398d718e'
            '3e033730fcab2208ad27f922f4749be40613e3d8f41486185c5b4c56bcb21f4fe57dc8bf3e9c512895d0e321383779c74e2e7863b565c090b07a9147ac889ca4'
            '12ef00815b853f8030facb65628f0854cfc77878c2e3b451a144484f5c372731c0f147d08eeffa5f4053bdeac4f833469ec776846bc04c8aeb63525760b7a52a'
            'a1e6a98adde067f449e662d8e2672923df75d31832b95cd4c72cdfea1e10346bf9256c2b4f0a1952df7d280130dfcd627c575d899ff655c949f5442fd3e8b538'
            'be261515ab339096f38940274d9d7a5fc78cb1ffebd76905aba1d19dd7fb4601e36becd2ab8912e70113f72f7d0023d4f811964e0d221d94e488022fc1b94322'
            '1e2289a2ace20342c5ab576adfcf93f86df6a04d69d3290f742f24b0965439f5adebfc7f8747ea52ad6ab271dde94b3e2bf6928f4995f2afce16a09f38d8e1c8'
            'f54e27f3bd4d7dbe08e8a82263da93076e26ed478375c0ab3327e793fa9c4689a9e56ddbb59e154a8100aa8daedc628302996f155138008da5e2bae977fd78e0'
            '6b9961a82955b63a10d3441388b1a67b07a32311fa67df34c004ca734b20622d0cb04e97696a6d3f1f7021057606937beaf9b490a226b36fc5b6c5ac2644dfb2'
            '8459be1e9a4d759693f36ff1f94e78ace6a56ec3a5166622ae8a853c2f30cc8e5b39fa72e75f387a91b10b61d5c2aa270dc455a28f4f81f18875c286a847dd90'
            '9e29d8e960a564a13832b3a6956eb7307f5babe6f84eafd0842c161daa38ec171088ad84de6342825a85efcf69a233d6f8881858463447ccffe7d2ae33dec18f'
            '6876d8401194430bd1d70325db8bab3fa75d6dd5257ea2bae857af41516b8882e24d073a8dc2ee30c730ae957f85941ae8232e302842fb7e13d53240158dc0e6'
            '5fbb334067fea501704c0d90d3ff8eb14bef3cfd9fda9e99f43d8c4a2df7ed22712e674de1a28aa2928d65ee17b5af62d2bda56bc5b4fca9d11766feace32145'
            'd40667021c4c8db463d18574ae99ae6a90a813277bc3b6177b6649fd9b3a73d661de4a0962b01ef8bace984b5e1e6ccddd5ecfd8a7641173601d679b259d5559'
            '545c3e25cce6391c62b770c77eabd28d7a22a11ee7839469eb01437b66d2965ac27d536bb7a8c04c9664b1f24bfa759dd8b2bc113886de5eb087e58e9e7e5589'
            '281496a229134cfd4151b1fc88db751b18582a5a5ebccdf2661dfa276269111bac2e57fd1505b740a96684a0c5290477e0a250edeff742c1f04fe7dea1c4367a'
            'c3a95ead593175de64a33f8e9c045fc4aaeeabe3b075185a745afd97aeebfea8125c9e76120ffe36cbd2c32b1101ab3a878d770357c5247e538a657972d0d863'
            '839e741d196670b7bf977599dc9d16303b0df0a24b5189125bb64e3ca4858deee37577ce100a8d73597004224d18fa8df2e4844e9e5156b561d3911a782a2ea9'
            '293e023d8ea71e61350c8aea8fb5c1cb96bacc7cb570785f4b551ec57d82a37c139ea6547f2036d36721d0a978f82e09ea3735beceeb0e5617f40ca22bde41c1'
            'd88a95256acf30308a1e18b849d990168805b103be1ff4099d24494eca25d2669c2cf2c5cc0b7941df68b397d4d43fcf98e82b5c1eb0108c47045ea1d01fddd1'
            'b0bc58bb38ab4dcd26d992ccaf5e3b6a2b186085d34f62daad5ae4988d13687f2c39a298e599019bb7227ea6bb82a5dab7c2fc77f36518fcf8afcb60398c2b6d'
            '2012096a7073756975bad44137f9e92842ade15c84b088ab4c7e1f8f99e2ce9ed7ed9002499aed35f5ebb26ee89e7cf33896a3ed3e5bab1673f4a4cbb063b69d'
            '4458d7e3126e51c642d9ee4477f2c51fe946fa6c185a111e693eccb726095169c987b5ba5bdc91ce86949641d390467c237c269d242d4f02fc927f68bb4f191a'
            'dfd5319e607d3132619ae8310ece89fa29830be089390d420cb1c1500f3771edc27c989ffbf6af8af6efd6bb5d10f4e6fa4b59750a79e22977f64a3ea82d3495'
            'b6b471a84913d64226de5aaf4445f9d34a7fb46794484df9f72eee22e4431a52916acf11a4855d7623772d1d7d4ebce293193c62614a5fc2fa0498df1fe6c6c2'
            'd4c803387d4a1a44e2852fdd293a36e6eb7c3190270622e418a4013ff247c0c41a18225ac929c7e15e09e72524bb88b73805e514a87f6345296c037b6d9071c6'
            '2157d0cd2ab13b8a49b2c42255887dba3aaa1c6b0c10512aae441b4b87e443bf85b140dce21cd5c3e9915f38fa06fda914ccc63040b286b8b4aa03644226b82e'
            '87a28a77921a52fd51043b26391a03b28c310b71b97542d39bb662f8c0b8ece0054c419051af16bdf375d397102fb1f0ae53c899b5e3d66c8396e5775797b3bf'
            'ce5706b2e967fd2e8d6c40fcb1c01947fd906dcf69d6c4fbe6b5ba313ff236b2a0c0392bb028ddc84affd0d05e56ed3da9d079c6ca6908f5d621fa57fbd8f966'
            '00917e60ed2f1c34af62061e675aab8aa9b5b0c54c93193a9c3edfbe1155642b2cab5bb4c7220f12371726385368e9de6af19b802b18bedff8862472bd0a666b'
            'dc1c9878335b9d9eccf24d614120e390535118d6b16708f8c012d43b7bc64dc60146100d08da2a8275e07a218febb94faff0bb97099ddb6dc5ef397960d2424d'
            'c2f55944f990d3b0eb1543494dd488cfb4e642d2fd8b7dcbbe73ab407660d4d21e47481fff74f1c10162a3e73c36bc82af52ab4ba230d9853aec2993e427f727'
            'c62bb3514bed52f6c45b280f525fb0711ca5d74df585789bec8ff6daf4069e9351cc72aef493c2e5b575d10523de3835d0b3b9332e5e3e968cb02ace34df1bbd'
            '0bfddcbb4f3fe7842c3a348648383f34b448d946f86be58216212629b7f097f62cbfd794e5241b80e599248769381af14816d5b24263e0651ef329f1f023187d'
            '1a1517098c1e50c872e100188b24250ea613aa70521e57c9c806fe7fb9adeefc4b47a1fb761c7386f374682c425297a3dde8aa1b7f21c92d130cc5039b700079'
            'fe567400236fb839a87d28d8c1b350603559c8a479b4a130c47be1d755d54d00b75fee026e84649f21617fd837ddac9a068c1012c4f9a1c7ca62e58c85ae90b2'
            '13b0c8eb61474d8b41ec14963f784229100fd9c3abe539ac59333c67dc8ed4c09ff2e0c1e349105b3400ab83163715f30a0f48e5d9498abcd5d2fcbb49641a26'
            'bd52aed2b4de2fdd87b95edbbaba3b847245498584e7469bfb304d95094a98833cf008c273fbe2b1e0c0e98e359fb2f02e037684d8c6ae69953d240dbbf4de0c')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
