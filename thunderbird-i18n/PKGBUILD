pkgname=thunderbird-i18n
pkgver=68.2.2
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="https://www.thunderbird.net/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

sha512sums=('751310b75772d6a028d2866e7c9397ff2157f1069912533393f0eec44b713d1140a754cf01ceec98d961c0d2e99eeef8c15ecb1cdd8f99390531b9ae91602d67'
            '70c39b128df9d30d109959ef939cf80d29ff26d8c08c8cd7b28e7509bff7f70059955b394fca24362026fe1df0ab93908f288736514e58728c1663f91b9774d3'
            'bd3e01aa4767e68b6e77f5556464cff3fc32e415bf713b4ccaaf20305057e988e6286ba55ed57ff9a6d80869e383c4fdd8233d777437b75151ad2b7763b3e0f3'
            'b4d6754e774cc84c62729fee44a6b8f1779726bf9566a3e83babf389d7c1386d4a843c8e9cc8462d4e37b0152c8778004526290429085d8fdc575bcbc010c668'
            'ad22ff063fa03298aeff11468f9e1e5dbc4c011f09eecb447670c7c13b784f65571149b4cdca60fb4af570d24ab500b8807f7270384d5e9f4d47b31336c3b480'
            'aa87b07d24d458b630a663125836eb1aebde27202a674e392d0b38805b632f169b75530642d7c5d9972cfe0adb2704130e06fc7df6c031b9f7151f3173a4af6f'
            '647229741fd329aea4b6eea6f22c5f87a6bedd572abaaca0fe8ebad87d0f383b2a3e68fd481277093dfe01b48e895f8c3643673f0aa1edf4aba6285c3a1afd0c'
            'f2c188c650ec4856a728a443f9a17c36424c2bd782b436a0faa1cfbf10e86038ece967a2ddadd6b6273acc665832c79ce2095d5c980ea0e647a8f2068148e1d8'
            'b68c46f4e7961a0894a5304c0bb71d57e997f24bbfa77d20a7218ace19d8f393edd484cbdb046c0c79dcfcdd2162b03a57c93c003796e4bd965a7498404562b8'
            'c6ca9374d67e5b6009d1ca070d984ac4246f15b5fb20c7bb8291ba801724c448db51dac05fcfb2c8907e1b6b6541a51abdd198c6ebd13b0176e852339ef9466d'
            'dafcb183d1e44c7fdac7133ad2bd510ea6aa095db3ca4c85a7621f63397e3bf052bb86081a844408c14f251763116adf7df7505092d74b23d41e73a6c73e0034'
            '77d234822d0a87d83b5312d791542cffa1e31f045908a9fb7b92032dbcae139a0b1b24083bec04cd4e9a88851ea855c5c9d7c807eae5310ff0d993467428badc'
            '49cd5803bb1c287ae3a4cfa374f64964adb3c1ba95437d472ae3883dc46303bc11022a4407515f1e2b564eb3c079b5c013c90f5192e531909f52dd9c37aeb865'
            '7f2ec985f0b58dafc4a9185c01cd95c48e8c14bba2368599df6133a36c65928f56ad6afb0fbc0b40f59be8be6d7aa2b28fb9d9749daa1bffeea92f72531fae8c'
            '001c4f60cf155d050935b00c70eef7d62c1a8fb330aa6fa8bbf1b442d04a19e62c3bcdc481de3b79bad2a37a7909cc7d4d33a7f73d066aeee02dbe7a60b596a1'
            '1b9f2d9c0f77814e8d39033b338610609bc91d73e594d24d091d2ffc60fae0409abda7329a4ffc030afc019711e0efc49d261a45bfe91d28fef3faa3edc1c653'
            '57997e5bca9bea1d863db0d0eb043b05c331917cd044321615d2537b0947b5481b7b714dcdd28754d9133249b4a0ebfd973a5c6825af0563d6fb2dcae68fe892'
            '3047dcbc46c023d1897b724243f4993820b0e4f9380c355c075e1237151f699359a998d371ca7441201cf4cd1060b9b241caa5a8b7c18503f7e5035be32776d7'
            'b6dcf0624c84bf19192caabcdcc4b22fc9946d1b3541613dfd23c31041e039dd24208db550fec36c5e85d4807c4efcaab4b949936848297bac1bf43049525a09'
            'acf16ebab0eed05b99ec55e0a47d6a43817be6e25b55b1b5b99ac0c766e4e9c7d1cbde5631b320c6b9e57c7274a755d3ac8efbcdde5568038f4400fedaea59b8'
            'ca3f459a782e43edd36cf8f446e3c364cd93c9a3d724f45ebe73e36e5e6fbb460311d3652fb0a88e82ca9b819e5c90be4102ca39ab33da5ab87673a539136346'
            '1cfe403df401b3d6fb0de4ade1eaf545c917023b287cd87d5392a0a9cbf802b84c7ef90a667cccffefe7e9662843b5df1e52f366e06f564ba22cb47aa63b74f0'
            'b206f8a11c021ce38bd80ebee47f6e541802b0adbb3ee2350524ced62d096db7757db637b3b0e53adf43a03376d792c35d9740b84ad10371689f71911d96d97b'
            'a1257e57ec4f2dcf27d0f48b4e06c7b2cc8e8712eb68f0d8bd7ec51d2800b8f28208a94228c010525beddd8cae8a55751d9c280c44d1184692cbe9872fcc38ee'
            '627aecba77024e47f178acacb90f47672e61b4974482a4c647d578205f22bf18c87a4701ebdf6c1912eb3c12c99129d1cf08814eb39c379b8db0e174269e356c'
            '267f10ab9e6fe45a66a4b86f42e46d5d79a568f1d237d4e0efc175cdd8754c0bb2b676a9f2fa8ac07da6fd2949dcb0ef378f04a29a25bab4a621f07e532c511e'
            '7cfc5ed7db2b8a25f30e4346862befb50d902fc83fb111040c238308a347ef44c92d7ec2f7e8a456ca024fc02d268d49ee65ad3c62e7f59bd22e12b32ae40ce9'
            '6bf5c5d7f65b1eb54aad1ac7e4bae899ed4a7b6fc3bc5070071150eedf2294f8a48eb94beed6f79fdaec819b40ec079d21f2283e0afe97b8fef47c6f7a05134b'
            'c52fdde76e05c154ac5f40ef17f040311347a367387f25bf5c7b4a691d38c9eb98e157a640ab3f3a25c2adc19c7cac650471ae95cc4c97a76289a9057aedcd27'
            '639fc48c6dd4827477868205e5e83bbd059abdb04d9d66305fa19ced20befbb78299737079267ab487581c2728ae5f0f028cef5f65213cd6f477b3cce0a52c3e'
            '4d3fc6d846b547fa1f43102a24858d0934700fb94b9c755715c040470731402d278c695a57eaaa2211669278e26aa91e1c0404b027dcfa81ebefed200fef8201'
            'b23149ee8f1bc99ad8a62daae2d5560abf7ccd506dd65e955cc4251f1cf0a5e39ca7609a070f66617883b9ca643e023bb1e45ff7c523e41bedd2b017819e892a'
            '8b2019e74f323447571686f0e97e4bbbc3e9973b25e91b5604a3becadeddf3f03c2bdaca29ae0bec88121a23c12d737b199c17efe05d3add448e5dc94ef59cd9'
            'c6a6b964eba1a9132d6c4d64d142071f8da60566373e1ff6e7335a379f6233d2935fad49775ff5c9a06934b13698022a5d9f6c015ee8dc7e960f3de495bc9e3a'
            'b5b79b34c140816a8ce31aaad0d4f6830096e37888819a18aea10d44401b7b889cf4871c915ed8d32bb26dfae45366b0228a1caeac21db78bc549cf877702305'
            '144a2c75479dbb76bb3d2a1ad3520bcc08aa9ef97373d831e552424a7ea0a47dfdfcd5a4b9815c65df6ebc73e359091326702f440b45dc79ba4a2f6c8f442fab'
            '2fcf5681efc36f73181d927b94782075a774f06cf5b5949caf8ae17481b299c8a63ce6c5ec3c1f2f9ed3eaea8e02638177b229adcdd58fb7aae92fc5ff4a4688'
            '4abdeefcfbfada72b459437a19f72f390dd03989fc057c6d375132527f4c298ed6fcd5b9aa9705976b6fb163de7d8581a7958c18c5626487b697e7e8d132e02b'
            'ccb03e1b18ac2226cfd40e854697121f0710c8955afedc32efb4182d1f846bf15c4988dc18a8a8710f3c0812697956dc890efa3ff8afdf819c6cb96af7dbc7fd'
            '6955ec5002e3ae0f411e2ef641be457a0476bc14662d24f180db8067cb13cb1f82248bf08bef70382e34d40dda02798f379aef54119de250ef2715e58168ad1d'
            '3cd8186f492b06e5c7374bd7f6974d96b0e291deaf4d74a13d9411387e71f1ea25e0aeeb8c146d8244ca69f137112ca61883a2b99fe3f978a67dd05ace3b5fae'
            'a3fe6f53206e35589c6c63431ea661f086a1fe588d6bbf33a2331ec3814dda9f0e70f1da3110fa39ba4aa6a141c3c17021749fece2c65c690e079b062b3589b5'
            '9a5ab66c2ca6bf55597c9d28a264e403a77065ee0de2cc9903343165865d5d76e804b5fedb58d07a23b0cc710292a9b193d60fccf01628872c94b7b2dbd3b5cf'
            'c5f7226a648daf6ed3e1e44d219f26cc3c991b8ef299b29a8e267c7ca4bb8da60b4e93b3a8f0fd77b9887d8803933539abfaf9be59a3b4986c526917296c21ae'
            '46219b4e19767b1cf2d6e7f9a2a00a10bc2a60feead67531c64b6ef6c4cc7a6136d0e7c2e1dd9a879fe2a3f0fce311cac0e508239c579bd0f8eccd76aecb717d'
            '6c53639ccb3d645f7ad8760b5372521204299bd2b4e477ab33ee9dd193af1ed2028f138944613e4f05c9615318183bed91c384ad9a2571030eb02021eae0aa3b'
            'fed6d4e780d122529c7164bbec07d04b81dc374b44cc156d70d1353cf4f3d321a3c3dae33f71f028069e710578a31a6287392cb4cfbe10779a241e8ea2726f61'
            'db2cc0657e71c03f6cf4668f950b4d2739ebaa7eef01a21146639225fff0a627d71fa4155b1d7830ace8008d342b282730785e89c2c11e1a1b48d0e1d54c0852'
            'a6a8bad2bd3d234be269f4d36802b2253d17eed20c1e2fa8056f3d6fea155a4027409cc6c735c3b496c84a8432c6aba0abe49d0096dbbfe3c1c932c6e589ef0d'
            'c9fd588754e99247c767038bf833b82ce8f01d288f961bb5314f0aa634be954feadbce2965f2a879c0682bbe4e82d5da4514976b0fd5d370dcbb510f278265db'
            '340ff1145ca10b828ba6eb584c98247949bec467a748e31e2d691bc3960a66b805a772b048ff0f96a69fb7d4ef1c47dd3200ab26388d8a0f5e9a03e403037f14'
            '3e6498afaf10cbe2fe36c807440d2d56ac19a4af308d7aab98960d4f992c705b23560f3728bb74a7b24794240491dae208061c6161eb507067a593d717aafc84'
            'b613ffafe4fc240d82f50b086f186e4149835a168c8a931fa5547e1ee87e930d1fbbbef90045bab1264f810aee51f7dda492fa133b0f6f89d274a4bd349171f5'
            '22991c78f7ba9323fedf8ffc3242cc0abeda05cc6f0da8515dd80ac4869f0c0a9b1445affbbef8c9f82db5039551c35982179cbf6507195d1e02bd7739f905a7'
            '3c69f5d799cbe50222ae22c30c4cab9a75eaa0340c46713bc6f439ff2c4d4f9625bf03bf2fff5813e553151208ee0cb2ed17f1e4bda81a49025d820b8ac4d6b9')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
