pkgname=thunderbird-i18n
pkgver=60.5.3
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="https://www.thunderbird.net/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

sha512sums=('6aa8f6d06d03b790890d4bb38fe90bca4f5a2b93be327aa1bf149dcfd19b548f1007cbc938ce81421cb9e4f615582add43e4a81f3e325b4fe27c9fcd3facca33'
            '5008e084f9dc26caba3c04620063a85c7db2f2b89c2eaddd77edccf8f324ee054ca92eb080a364a61e3b73cd87a314a8d41e49f8f9b27e7601fd82e1f6f1c013'
            '6232ba35db14fb99856f09c9b66827640332abc09c78ef99938050e3adbc58d039318eca3a9f1f154a2a2c526796de3d355b5c5cd789b12168c993498bb67c9e'
            'c73f41e68e671172c877aa1a305360db7caa7894361c1d0ffb9d0e0b6b1c5c00958fdd4e4068c3bafee0da0152aa5f01f1aa115227331c5e6ebdb3b7be1f700c'
            '9a17707c485c3bb8203ca7daf50ed7fe36b08376fb454d3fef958dc86c10f2f898fc534b5366cf39187740d8ced3be456ad18af9da684ff7425339630dab920e'
            '39489e3a9c000572f8e7e36e2384f03169df30ea84dba5890260975cd99bc831f2cc9c2325b8aec64749b48f2ee8d08c803c8f637ed7ad8ed7fc70d6ce797b6b'
            'd83e19d7a89ddc162fac3ebf71cb0c1213ed259788549fe3e75891eb8781304f9ed238e9b64133bc69d222f54b2ee4bdd7c5b4fe2eeabb98e8dc8bd5d1c93574'
            '9508ac8cac4c711bcaab9a41eebc4ac01c5fe09f2c501008643ae0b9df16fe9de0fb16a2a1362fb58732214232570f3578df6bab0cbb4a6e166e0dc92caf2934'
            'c366a0d7940595c8b53e69ff961f5ed0580d291b89ecdc1db36ebd9da55153e951d790866a6f025e288856beda8fb43269d8576238a704bb651657af7ade6e7a'
            '46c5405368ed6ed00c747a6449d815396a7fdae0bab5472e5b5c061acb3d8b5ffc7d08f776356a0b83bdddb77ed80bfb078253d5efdd56559838e11d4d90024d'
            'b9939d2d195d667477cd06a5166c1a2e8e1c7f808d98affde16d8c8a4f5aaa8a79dc94c1e50f8ca49ed8ee0d9f082140ac9ae1b3087e2778b73c1a6479c0acf3'
            'fc9beb99c581aa381c4488c2e9396a429a3fde0407e8b2b4684182882c8b6d1551f73d0c7ba7d5c050bdee0d13487653d71a735a15ac158a0153cb82f81a920a'
            '44de972f64b8c276fb1b23220666245611e771feefa37f5d293795ceca6bb9025345356ebd6d45eca4e306abfa7303404776cb4155d356af1dc4bceed282ccea'
            '5face527f2aeb7523c76b6ba553b8f9b12a79fc943f7b3b06f03b3f57a8f99ae4e97390f677197946fb58eb10790bd9a145fb2f2f41845d62232650fce534ed0'
            '154e2841e2c12df883ff6c381ba82b47c177c52cd831ff89d3ab809f88acc7125eb6ff7bfd4f39e7894e38b24d8992c2f174ae5b8710c5fe179ca73a6fe0e43a'
            'fa21fa829b64b7e68062b6c29d9a757f35d9e5be9272d772796a311576d792ea2af2e2f25e6cf81a246e6085c203c1e805e9d0dff1c6a78f498b31e17c1d2d97'
            'f3df4657ef1d76c9469ee830f94aff0c0309952efad0f814755fc7fd758705b208371af15ded3b985e7555aeac4791730627cbbe719bbd9ee4350a4de88750b1'
            '33bb369235c458c468a1928d3c341f17a61965142ca7a47223e221dd3bf8162ef40349057204a05cbd7dc029529ad820beb58b70a75035680c61f82b0085a9b3'
            '76c150e0549b913fd76317664a4b1ef8d0ffc1ec15b03bf44244c70bf237f3540bb886ea481f02941a2abf7e04878923d6af008cd08b4894eb7a1071bafc6a01'
            'a47d98577f346c02a178408b0c5fda39e28c09fd17da56275c1d83f8c2eb080d270adf4a7e14af71c3e9db917d201492819e679a089a08f16723934845fc53c0'
            '5b2c824da3bd80d9e900227e59e9e15d8de3c819deced24e163881082ce578f4f82c6fafb38c350f6f0a06375ac1ea1b0e04d45a3294619d24a14c26503362bf'
            'e8624d2dcc33e3dd4aa74bb51ec24f18f23fbf690b7eb147582394cb223d840cae05b8ade30dfb7a71cf08f17c7e73d110449c99a550089c1456086a731f0b7c'
            '88aed8ee1748615bf217fa86c2454145bc12e1d433a10a2e0a7f47ad75251a9def540e4b419661ef987961992aa7bd294453ed222d0371aa4747efc79d9be823'
            '206d41c81cef5a6388c4e9293affc7d29315db3ea96c76133cfce4a881e3a8e25582e917b2f0f42fc90a251df8dace46a85be732bc2736794983d28ddfd3e525'
            '72606b13bffa02aed21ca87043a72e8dededebca9045e51cbbe9fcdd378dc63e8104249c2e58562019322c0fb18a75b12b77aa3ada32874874653d60d419a896'
            'b4d417df37e942670354fe1013c56b2bd8bd24a65456293c21f9e1fadf1e24f2debc9f6ba74412726d59484fa9fde0ac9f3ab1c02d3c40b5c30c2a2af3e0f4e4'
            '029c115e0fd733d6711e1de5faa6cc08823f581193fe6c3e08b1d3c9c03bd00a9f57726b862abcccc2d81d30ceebad7f2d4b806381d19c4183a98e4946b32d22'
            'c911bf162971dd10fa644bc3df67dda6e58ca1b277e35c3491be8f52a177c8a0ece2944bb0357688f20c0597aa98584f79f237b5c73686162a7ddd0a5e0b2a57'
            'b007c0c8a9b792993f3eaaa0aa3dc875c245763b62e2ad0f1217b098057ac397dd415c29b5f1269d531dda9e3e0f7b998f10ca545ec1f12ab1074b1cf9b1674b'
            '8d8ca7af841b2d7bb69b95c425b8a94f8cb7ae896f92243edd788c21a45d0fbf08b462d7fb5bc017efa4b6e2254f06269b117abc8757b72c29bbcd027fdce0cc'
            '6249b0a56a73fb79f5886af127dc601e2a8b92d5afb0d57866a536d0e4b1686bc7ea71e15a18a76a1759885ffb31edf923e31dab18af36e710e128421af2856a'
            '212c90e55a56f035bd38d60433b36a030b64572aae79d1755ef9c0884b7e071383fd1153c8ee64482e1e0dabf699ef52031ef6a722bcb160bad02d0edb789f59'
            'a0ab061dfbfe74a0709531b011f2c897625c6782601868ea12f8a85ca49615f83fb3dd5d1bed4363776e08664006e7239a0aa7c4699c5a74a7fa403a827d00d7'
            '2ef936ed6c1650cf3ddcd04d58462a4f13d0a492c32920dca2606ca6adf4d8bb78b8bbcbbc000e442e841a83e35c6ebe3e20536ca2c81d087bc5fb3f1b8c3547'
            '876e70411b5aa11f041b1bc8c8165263248978c2de24dc900ef89df7b862368b4d4d36fe08af0d91f0b90414d48b677fe477c7addd72b5a24ad0d0be305c5448'
            'a05d9e3911b7fad6b413cc341d13cbea442646d9b8ee07c61528d8682f345a08cb7295ac42cdefc25210e46b51a7086451bbacd0bf0ed4ea4d228d5928322a94'
            '52eb896e06672ce2a2b39c4d212c64bb9d5912bba3cb6f7d5e7b2ad7cdcad4cd6e2758aab8847e470c0ea2f8d02f2498d4bfed64094af3aedb599f94f54fe639'
            'c214e5cbb314ba54951d7d6f9ef3c9342676f2485cefe1cb3aa2a0dac4b0258aa724eb3f2138c5a0243c8cdbc6369265d73417857a387e2fafc7bcfa87c9f54c'
            '0cc7e6b8d437d81c6448d815c028d8af4a5c8aa7f23f8d75c49e7fdc47672686c47889361db72fc6a301b7511e944fb45922182b01309de2e5d48617caafd982'
            '43a3379e062ecd06ad0a4ff8847d18626f334f9681ed60fa189d748307ad24b79c58d052c4f86c1296d117a2758701d27099fe28a2451e11721e645767ea67d6'
            '13409903e2da5433461e81fa1354196b17180ea75d76924d9d34cf52c9cb15e1cc45e94357b936c9ffe8c140e81ff5153bfa4460e1cc463669f1cf7c9aeaabbd'
            '700ebd0466e7a82c85445b56cd8f6496b03d1f623cec9a2eff57d6cdca7dffe5d77102e5cde5707ade532a3c37899d0aac99b06f4da78aa5422ed333712407c1'
            '913079718a98c4db8cabbf30dda7de4b95259b45926a07a76703b7a07649f176b6909f45d235fcd0c4c912629c3867bd559ba74f66d71aae174bc1c785c6df76'
            '89d276131c8bf95b67671c58aefaf1892faddc306a16f6dc656af4c33c80b5db87aaf229d99425d5f97561f2bf72788979d03e5b36d4dccac83678058d82c8fa'
            '457afd678e39f9f8062c2a26c6249d5be464116992080c2138528b02fdb1f0a5d141be1bd043a7866c2038ffe1146d31944a3ada836ce21fa22b904307107d15'
            '3c3cdbb8f9fede704fc1bc445cf5129739e263a13d7f2c9a1171c7707a25f5079a941248ff3cc6a65e5177cfdb595e04b056bbde413ffc6225a945a18fe46632'
            '1550fb8cafc7b6bf1ed1003324d2d6836253d7e42bbac697027a8e3bb8436bd2a176b4d0a832568aa2bd2e1a664a38d51d3bb36c22e219871caf9896299f3056'
            '3bd718be055e53be9fea9a83039c1b6103b24911d0a5d3710723b64ea02c4acea349a1ad8319faf6451a55733190e4c2bd87f47358725d81aa20e77ead3bc86d'
            '9eaccfba8a209dfb97cf6239422d9e12340bcb861321ed7f439f864d8834840d7e7e4f6664138ae79d4d8f865b5b72c5aec2a044aa2ab73f25a06fecd9b87d78'
            '5862c2736209128d2eb20b1cdc75bc1296aca3755685d962674c4e0a3b0b4441fc0f410da080bad85386474c5c1eac8f414d96fe2715343c81f3c4f18487a4e5'
            'a368c162b19496e83a27c28161909b87e45d50a1faaee312a50ba0cd2e2380de1aa9c512d8d354cfe1972a3e2ced24d3aa62c951076a243336fbecf5b39778fe'
            '7e33ed75dda430329ea0014caa382e3f8e6c57593d2d2178bea8b14e5cc8d8df48bc7a29bc423e88bfba083d62c338a54b7a00a0ad6112861fdbfa7c4a6a5031'
            '9ded56e89a932dfe84ce0505cc6f927dff4a106351483ee7ba309d45b4b663f508fd55c59b52869271798e78dfde907a4c38d091331ea1dfcdb709e4d9616934'
            'a83c5e9de03027ee62402510daa6c7afa58af300b9b2605f840220ccd70361492011473f1b9b39d0162235471175c50b998aeb56649f087a87fe9cfe6225c927'
            'a96dff2e5094746cd84ec9e14b88580fc3481a82d0f52f78ef970164bbd7093fef1eada4fb0a832397a39a98c7d4dbdac8a667e071483e36a5e888c0d6702158')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
