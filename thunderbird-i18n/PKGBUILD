pkgname=thunderbird-i18n
pkgver=68.5.0
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="https://www.thunderbird.net/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

sha512sums=('98bc51f8fc9f05468bead19c756a2a2e762e8116da3e5220c3fd199eab03102f0ce48a1360775887e3b74362d5943c784012aab79fc7ea6249cfafb3196f70c0'
            'c040de577a16a62a8e5df2d8df852221c766e4269f23c38431a1ca841fc308d5cb42e26cfb16a70c08e21fc433b8ee2f1ad3fd858b87c7db844330c9d99296ce'
            'f6df4a046790d587bee2f2e67b30fb09b837277b12ffaae1c0ee77f7e208f2a4782a761bd2318f60feb1f25945a7c375fc9e56a92ca8c777ed6a36264bfc71de'
            'a2a90695551a1812ca9f02ee48523002a8c5569df20e30002a9f0a9ae229c24ef15986058eeecf00b803b58514ac0834e22e7b50fc4655a56f33ea29fe4dc9a4'
            'd70684f4411064a8560ef950b70a55de8f620ebbe6eefe2ceb080b85fd197aac6e634eee03c83fd38e4cfa85259436d450034e69ccd5a2fe21e68cc5a187e3c3'
            'c33c5b00cefb512794fbbdbe5cbe33332e2f1c1e7cfa882ed6234b38f1a2ffacc612ad0503bee80f639f1adae5d09a6fe07d11a2cca733f9b94430b9ea8eaef0'
            '685e01f7b3a391e5c0717cf0a5557dddc31300289ed108df85092fd093cffd09142f033f07ad0f0758e61f6fe899bb100ec81e166c5f71161e293f8dea10581d'
            '59c7ed83f1ad02d67f7b955165b9e320498acd3f044522ab71df7475dadb4f4a87146b35fd4d714a104ccb5a7fcffff8daef2cd11f55b77c89cb831e255af0d4'
            'd33c09026879288a2c0c9cb7ddab7948d7c1bf320259ebb2681a6ca38152243d514bb0cecdec6955b4c550568cd15ac48c56e92208cdc25f7f64e700740500ab'
            '53ce926239217989b32fbea88cb7d0bb07f55e7233a9ebf2ea6176d8162f4d96118cc6dd786c393608e170bf3ab08fd44eb6e2426c9ac124798ca3d37cc9cf40'
            '243383dd09e7370df7937bde716f27b47fc88eae2755a53f62b651f89506c6ae830e303643e24dc936431121b605f0853b0df8d24167dc7a0d560004bc4e0ad1'
            'a1767cfd4ad7e2574755e865a70f6aa89b1308d2c9c38442c7c61df823b62e2c373e1d8308d8f5ecabb98aafe4ebfcdabce67191738580641f93b015824a4387'
            '77b3721b06fcf6b53956e40da8c5eec75d22396d2714d75815668fe59ce27fc47995cc68a222c6a9b6392d32ec48ced0bc24a75ce7dccd1ef446a32dd7bf21d6'
            '8031773bd320fa1455ff14798f654e85edc9defd19fa7800c5f7cab305018685bea5ea28127864a0a02acf7fde1d5b1423bd41c297d6b7a85564c1b99190db89'
            '6ee9116cf523fa9d7994bdc9869623be54c4cb29222d5646c9dcf2cf0d7c88765e0830c14c2202f717fb3350b049fb4ce5dad25db8fa458064baa0df08053eda'
            '3662add93dd634cdbe838ae530c714fe1d670e8fe1dcf7d2dce02f6bf6dd24243e08460558a378b9c091e03b3797b97497604370750b5baf33d52d268b2c903a'
            '88e04af5e45f1a68dc3b7425dc0f52c2584578b24c44637476b7f1e4298850349c021c7364cc99210fac6f163131d0408a14016d87365be9f91af8297e9c4cc2'
            '96aeeb8deca4eace8d2e5ff7e4a7aaef496c5ef96e106e2b3b48786a6175d6a87afd347ca2f9ffad9b03916f1973690dcff78da02a2203dd34de3aef0ec3c3b6'
            '1b9e33721101ba0d1601080a860914a4da0fb0fe927fac759c2687e4ad3b9444c267c4d319ffffcd8b11490d60f2d1b644eb1480b88bd8f2918e33ea267bc819'
            'ae854890fc0a5ee8ab6e18fbfcee747e2b18dbfd18b323753f0d50f159b6f1e6577e486edfdf5125047c5426a77c04fecab347f4706102a3438c7f72a9b4bd3c'
            '2a11db9c142c6611a60fb522788e4f5c30485a75217b53a988b874c893444ae240b2f7864183a53c28018906e410eb78f322b27866b130093ba1c28f527a5832'
            'd66c0cf0ac8a46e896c58b6141a29a4645ad066c6fbc4e4b2ae8798708977954db365a622740d2209588d6be09696650a125ff1b00093889a0b1b76a51f6215a'
            '8ef7173356bf1e4a570371c053dce13c6ed5e9295745b5f0bd088ebcad8f3d20a48ff0d313d8905566233e51c3f88bd460587ac468dc86d19c917657f418e475'
            'eb2c88002aa3d3a4e22739bbcd0c83c7ef2bdda13198a2f4587455d37a5e61a28e49e43d3cdb50c60ba2e97959b109b36bb4e66f0efe745f3373a21b89be592f'
            'b79b23fdaeed4a3f91786b0a33b3691986400399d8871b1ac0a59d5a68596b2198382f320713ed303169c02ba11d066e1f6d760f488cf4f142bd880dc5f5f30e'
            'c0dc68b15166d3aa1d0bca44e2c455fa5442e45d4dd14d4a8a7e822f2bb3c97e21d1890734d108b6cf51a4a622910d3d6e7c792ca30ea307e5ffcc709d41a479'
            'a73f587a57634eb0258ff5f5abc4313adbe0bf114b7f64620f060662e18958f4b5a0afe967aa69017019e803fd29c01e97500b4721927ace5b514e7ebc7b1e33'
            'ff8eb6087e02334e5e7208b20c76e495a90df11f69f3f934f6d2f0dbe23005a8e1ea197718b83c947cb2c6392f65e847d825843e5fbc50c678228131181f7f19'
            'cb063678b784b2c14bc4935af93923d3576e837bbb0464561bb48c6e3ba1d033bd0116174b31ed5af7ba7650441a497b74f32212d456c55e542e7963b875b9a9'
            '4c122a0b70bfa02adf2e895fe51d3875e7fab569e025203938d1fa871055da848c860d36112e189272cc95f0d1a0d3709ffb13bd8ad95646a15902190cbe364e'
            'fb8e967cb3ee8d58658042f63324bf4fd4926ce3caf605c953392fcc7acb3ac81e44a095d1d08368eb5e160f1134e930c1cb30852ce9aff985c05cda8d72ade9'
            'eb32f9f5d115f45b158e1e24f454ad423f58520cacf2fe365d44a5373c9c137c8b474775e06a8f886eff29829f1f625d44362754e05c079ddaf17038bc0c536c'
            '09042f718045b38d207f6b682aeb6edc5ad36faa960040a496faec281a3de70c7761a677f94a871bd3ac6a3fe1d4be359f3818b7237683eac082f77608ecd578'
            '7d368adfcc01b267506c8d706ca8b25f737ee22e8cfacae2fa516c68f7a5333d6727dc2c04080a10541671bdd665b6496efa8426ac2348c8d1543b68a498160b'
            '18a1c7a9ba7a3bbabfaea57e1575cd07b637d8e3b40402a651df62621fbbfb4735e85cdb8c43f7f0c70aa9edd9e38d294cad6107a10c1fa4df981ac2ea426d03'
            'fffdc159096e4424a55d30bf5ad9e3a70e125e3fb5aef7cc7fc052ed5c434b7c925981ad5058ac8e8838e3dca9976a73ead2fb0d53667e2884865033797e971b'
            '05c253b9125d658799844f51440466c4ec3b38ebeca99f9b15b639cf48cf4dfc7bbe31aec8594e8420d0bc7ee79d081e37ab5b102b1f22c0544558a5f3ee540c'
            'c5da422505d797a2ae50136b329e526dd232e82097ec90903360494af673c53cd7fb5c7b16ff9ca8d0e68a94faa15ce95789ba96948e8fe26774af707b980a09'
            'cfd971abdf85cbf4919b5f4ac310ab8a58f38ab8657d6308b69a56273f07f4f4cb97e84cd12cf50f834dd7e541eafc398fd6c72927f1dc9777ceca3c292be3d5'
            'b9c65ece92a8c197a91a80e0bfce1cb8689ef634019c98cef37d289a847c64a28bb88cc5f961394a06acbcd295fec935233000a6d916a765176ca3d8365642b1'
            '6c3e63b0665b68cbc9eb7bbd16e556f872e926e666f210db09c00b8dfe87e3971011a9380e2ff46f131b29235e8f2c0805644a8b3d5f438dfbf3337ae2788232'
            '6daf07a82df33b828ef132967acd525744af4f1dd9f651a3dc611d8a393ff4d6cf284910266c3e6ef9414a7558ccbb9593cbfbf3cd6acc9d5303d94c8768b899'
            '9b24589c4d3f455f27e19c8d882feaacf48724c470577b894ff5c09d57e8ddbfd3f216fbd42ec61aefbd1b01d816792febba22af54259a248a5c79e4745328cc'
            '12c55f72a30655693ea780cd9d39d2c59df31aebb8fe48f7b12148cd7df530eca579ea5f1496a9cd5aaf9f9a4a6c9f9d1dda9b7934dc3d0cc48e005142007253'
            'f685bd8b1f2dedf35cb0c726c410404d1d443d33936faaf338e0b228daf7a6f27034616c487882afd42441e9a52ba12403010795cc0ca4467ce8136846063952'
            '2035c17c374ffb23aa572dae277ddc9e85094cd04b3c368bfb2e8fba7c42d9bb7a50932da2291a927789b143e43f0d75ed76185cb18d28712cfb5167a7477c2d'
            'c77fa0529a07ef99b362dcb15f3a98535d8c46d2d5a396734fd9754b82ee973dc620ea0b1ed0d898612d70a5795920c19259d1ea9eb34ebdabf4b4be420ef085'
            'e5c4401643c4146ad39d88c19fed7afbe933d5f0ce9d023819f11f8229594884799b5040bd71c57d3ab8e0fba889f38ccaf35b1664e84e6ada2688f19c05a9bb'
            'b28f46d258389262d5efb774403a3904bc131b647b1f373fae1d165039d39eacb892091c97a221c9ae8d52db5947703e367864dde624790eaaab7f787eab50ea'
            'ff3e8003589a206a79b4e8a22003398a91ca424ecc02bb2646021d50def77c0aee4cc2f48dcd166e0ee50e87a67c4d34e93a23417710d978fe0e021d814cc70e'
            '996df62ab0f6102bfe34b5d93c7ed2537ea50f95c5f9874ba67f73b07f81c8b618c4f0788a9600db888f5dc5d060ea3628e2c50ec200c1bee71d6a6521bd7e53'
            '50ac440d0e7e32805dc5551c64c4ba389b9c71380b100750fcc205cc1c26c2f05c15fb6f910a9776e1238a4df2ed6c611fd8382e5d2b6f49f72285c8a92804a0'
            '1f9c3884b4cb3f8ef8d23f348b7f35833da10f05d2035c5cfc57bb6d7d34dd71899673156683fdbc538ec6951127ff7f5dfdf054871c6c18f8908d75a8d13ecb'
            '80938eecf197724a5c4525d97af31941ca989f99e01b8ad931fc25917dfb5d2850a95724d64185d7fe2392c85f6b58aa52d029ad806555326794a906d676d3e8'
            'e3c4593fa1dbf2f3cb5527d76bcf33f9a7291134285d0623c7a0f1a7c4ccdcba64bdb2f6c9cd547836c9fb8339789d928a6a14d95e6557ff78fdd053d84c7d5c')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
