pkgname=thunderbird-i18n
pkgver=60.5.1
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="https://www.thunderbird.net/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

sha512sums=('6b8e55e444c8dd91e40eba6ff9e5a845ab8d84e92d2a50ebb19ed99359e482727e9647390af9e680662e317f368f64df269bba44bdc3f1e2dcd74b9d5e354de7'
            '34dc3028215c2918a77a875c5bd518c662d7a1e516a85f75119e0bd08978e83afaeed1d77b86178ad0dc533fddf8da1c7e8ca2d91061f2cf87847bb77bba9e4d'
            '618138a3953f315be80b0d97eda4b72802c9bf01c24d485b2b02ef0ad1634f144c52e0dfefe241f1e3c961df075e78ddc9353fe3e3fda2e3d8eb69d12b10722c'
            'ac5a152f9bc857f0b113d34f391e264b9819394f97c8002635ff972b6888bb55b9f6c35729a6bf3347b447039fc8477cb348e4c6873beff7ebf629e22f9215ab'
            '97f8400405b0223ae08f5c6f20091b6c0a329b3bbecb9e0c9b669b7139e3b4281685c1d95194b0fc75e627b008b4a246c2e9fb71b378f52596bf92fc7be72ea7'
            '9a68de5557cadb2439caebc0aae29301947160e6788159bc75e8d53f05f4a0a6ceecd53c242b9d680858ac03ced1dbda97b92836d664438b970452e98f0e3863'
            'f7085c67164d80fb360eccf3e736aed6a287b6d7a7caa51b64539a86b40bdcdc2d2680c3f2f18afb1e8833e2dad81b398763eabdadf034ed56ef1c148372f4fd'
            'e48d20eb206fd0b81c23e32623cace9134e203877b4baf60162725bbb0ca3850c73b80831adf42f52a491460d753e10151d32b5ebaa9105e738854fc8e892903'
            '421b9341d9fba664435248821ab2bc1e850aaf087be246c324b8fdd3f14ad4b1bccecc6b33c766bbf7c8eda7c8d9ab14226968c365cf653a64d63fbdda9410ee'
            '400b1d032ef047d8e75c3adced4eb306611eac7f13da53e6565d406771d44c9105e8dd9054af9b087ab3b957ab6417f5d758f9a35bd0bdf4d2bbe97d5af1d994'
            'b3eb0c5030dd4c4579d11a1db8864dfddc8749442cac9509322607240e25e05f86f4aa3affe52cd9350b94b2fd00cc5b5832af59af19835298bbb862e100ba0a'
            'd8cc973b82be08b5a25b30319d68529463e34df4b579ffa76baadc11404c3ace08e58b2b52827b9b6b92d80829fadd8a9044006a13b90981121f8fca28508e82'
            '5755254053ed2766408312f3242f1d3ea27c5cc25d467862531b93961d752bd2d92f2c7a5e30ee4cb48a6a25718257353af9380d35524dbf7942875905e64a77'
            'eda08c34d3df2199d417e1cf1c04b9561138785de874942f3fd9c908a35cdb42ade87c2202a3afd136998c7621ee4c7a390e5cfb45b6bb660a7c39ae926e95ca'
            '602e42e230f9f19f35895cec616a26918835846e874605ccb04cb2b9378cabf523f6030531f629edee1fa8e5011c0ef775dfa371987261a961eeb6edfadd9edf'
            '6c72506e86397f553fc9d7233712e18a29ac9ccce27ef2fff939646ab7a69c9f0612a9d89f238bb25c5497eaf1acd2679622d6305b29ddef823549384f405892'
            '6d13279f55298a9bf5a07273829e53379e4c321fd0820ccb8cfe054d43ff2a2578863f3734e2ff87ed27768a9183ed6af977175613edf0abc7aaf6deda4cd921'
            '1b23d34547893a29b9b812926b9b8c5947b6e8c2c6b62131251e933175f7cd257d2c2e434b39a3ef9ba831ef568a3dd715ebe9615dfc4023017b095cfedc493a'
            'd6388b2d97c81654c70879d6f2ca0e18cd136ced245d06f357132a8d77bb4b5562cc4ad2e6a981df8badf38e7778d179d5f7e991ab131cef309ed1a1f47fad32'
            'e35b8a71a40b38804673508e9fee76e7705529c28749646ec92b3aeb912ed8bfd8df5c99ff6602e0bb2872955a4730529ef0881b4470c9b4a1a3d06a18e06377'
            'e0681c8e94905c219c5d05fdf46f70713f9772d995fa204163e1e5c0ac187edb2d5844264b5322d0b51667c8644279f702f6c5dd2c6bbb8f3f6fd5cabf8b18c5'
            '23f58eb88810d9bf56dd7dc39b5bf4c37812a0db21a1902395ebf5a04b3959ee5538ae72f3dc491799dc443b40df60badd98edf029daeed57630ea0a61688495'
            'f9eae92945b62936348a77a7b98fcda6905d2ddfd1276943755a1f5653e9019c9e577946f0bccf7b8cf058b2673bd0e55ea2eab83cc41c141c3e162f7a841b87'
            '0a9a827b2adb21d6122438e7e6f811399dc93fe284f3cb96a90cd4c3ceba71bf07ae1d65ae6bc8357b1d17ebc8594a65c66319a20a0c3f78ce244fed9e38a187'
            '98e15d7b612e3adeda7f088591e9936efeb6bf3b53b45f274c5bebf51c0a9225904eff5a7cf0189d06aa161e62a47a447dd93f28c21e199080e29ead14619e6a'
            'acbb048d2a7bbf64d3c13047afc25fe4f4953b29c3d42f60af0f9de3d4b8a39c050c6f9a532cf161082cbc5f794904d123a20124c2cfcc8ac7d2cd3233e87b2f'
            '18fd8f779a9e72e518db356b0484df3b57791bf8c155d3dbdf72dddec5ff2f380e647e2085d47bf18c987f9173495836d9c36d24bd9f4be0ae89d68f0d0fff2c'
            '8aafd83758b58b58da2ed64147b1981a483939a86c957b89fcee94b0210ce099607e5fdb504cfac562e8f3b3b43132881893dfdbceb3170c4818e72bdd808c66'
            '51c96f6e1c313361890b991d418257b477b5344343693d403079cb0e186dad0097735b6caec07e0ce06a9f15e64c029c4fd5b578f2c77f081467a845b304c0c0'
            '58de6c785a4fbc1aaffc2e1e8b2d112a14bc8021b787d5958d8cb99b5e6df1d9c3ab2c0b1567aebab1939a7b4dc99e51d8e04daa30ef38c365010efec7f4ce71'
            '87b2270b23b7f36aabc6283b539a60b6755136fd65d1eec9f6b7e401587ea2e5f448d87491520cd2816b39ae5b9ea351623da8cc4b40575ef52d02bf44d55a9e'
            '28ec3c16465fd5ea53e35c1bcb5443469d37fc7d96f17647a3584c099b0b89aed81294c1e0e548c2e239ac050dceedfafadbf875a5fc5e73c1bed056afd0d211'
            'f23a19be810688ea6aa4c69fee6aa79988cacfa539dea6401b69db5875e6ff39f3e5d3312aef0fef20cb03d612be48cfb50f4706c6a4df5e57e2933b4478c267'
            'f2099655114e99ec6ceeea4d7e2f875fd7d1e386a6eaa08b8aeb43cb4baffe45f6f1302b84d2447bc458b0b58475e57b7f128d777b1c8dda8fd3b95081bf9659'
            '1f737f7734544235d70a71effb02a2aa067c4c06b73e7aea68c09d1df2d0374bd294e48b9b2e90a792f48394fea7c550f5edb4863c0eed51945903baae0d6f4c'
            '42bce132f7e57eaacc32a361dd0ab91f8544850c5fc3e8ed946b6cc67fcf2d9aa7ea979058cb7c37d897a5b6b70ac5f3a938a696d3c1075c527f0f26046075bf'
            '572310396a7eefdeab86bafd6f33b1c4dd6b0fe771430f8b4aa3ca67305ce1eb10ce0b44252b5129b0af206ec46649ec2b1879f1a75c8ec3f950dc16153a7153'
            'ff8bc24518b696a5a1d4fb44553162515d21a1e3445c086ec657dbf2da639992721b67585f797511f8fb0a5014a377e29d45b524c660801e3c05c233c6bff005'
            'f6569dc00b84fad51fb32d096b1855d89021859626ebbe214267d0d0819008318d39a3061e2989ccc8b16e8ea7013eee078d5ed34a22f94a7c2a2de041fa4e52'
            '155eb81f08dc9618b7e574a8802537c9de85a48848b419063f04a3988c09ecd3e238a13afbe8dc638cd3bebeb062f8c6e33542c2e4d6b450709fdc6c13baa022'
            'c678ef2d2ce0702cb41ebb261d31fb86f2b23ef99aaa2a9b69d7c4b6eda376a9cf1b661ebac6fe0d5e7a0a2fcc02b41d0e96435970eaf2632f15472a380ccc9c'
            '590de2aa4cdef25fe87bae3a6fe60e98c5ad4ccf51497540cce9952d5e464a70ffa24c553f9bd89a241ff33e547f2ad2cad8f80ccb9fda2576f1914a197343e6'
            '3f01b1e8be2041e46c3be86f3428710e52dd6faeeecc4e41468326690bd942f6b356bc430d87ee757e7cb1d759e3301618db74f92488213586eef0243e06aadf'
            '34e4fade10607a8e788d388c36f291865da696c2aebfdf12b111ddc7b589d01a547ddd974775eca535431a29030f605b07eed89026791cf58ad7be6be09c8a82'
            '6ace50684a1d0e526ed5da13a9546b67b9a9e562011b7b862ffebf3fb6fed967fc94cc1619c001ff1e229154aadb049e5fa87f46b35ca6871f63f055426ae8fd'
            '5dc55eb93de3e1e22589738ec121ac072b3a223e67573458fee2302d5e99855a9f024215c280d42d1f98d8964b8e7c004ec19163d65dce5efcf7826165a6d7a7'
            '09e6f61514209331e17769ae302dd6de0c0319f0a5f90de5bd4b9cb0a6720a408b80a0223e7ad59b72ca815c0b98cde1c2dad1ea13f62a9cd76ce92abf042140'
            '56fff94fc089b63329ba7a3332eb791ac62aaf9ff69d1d582095145afae63af2c2e6926dc2ce06057f5fc76cf3f95f602aad483742ae3d51ac0d9d77a6f21bbb'
            'f306bd143240fbeca628784759354bf2f479f55fe97ec8a79f8207810e481c3907d214aa2c49b25b7a8b2d5cdfaf9a4025fa632ee5dffb91c6932f61f4d27381'
            '418dbbacec1d54ab41702c3e9fc86217171ac00313ae69084b4949a902cbe8021f5e004f3932e72f4c3e5d00ba4c5d7b818c4411359fb176e09d2169eb590c80'
            'bc7bc8418d5676fef313fee11fc41558594438128cd3c3c18d39e69e0b9dce5a3983498fb1b1b9db04800e88361cb95043177b5ce8b74c7f64d68e02fd241a11'
            '581463bdd2239928333df1c69f3e7ab4d5b9b2f4c26e87c63aa584482ccef0fb0d28b85d9035033ffb6a00b1a634754976d31e020a2e55bfd3b3041941f8dc78'
            'c77acd499343a13458777ddfe014800506d4a3494ebcca315e7e20e6bf2367a4390efc2178e0a7586f8e14c29cfa174cc74cf17759770d20d3bec77b79f81c32'
            '0313b5b5931badb9d89f1caa95c628f9ccba2cad447ea36e5b2c7aaffa3a4e17e8ffa1322eb46c7bd253782b7bba63e2bd6a7915e201aac99a8044c2255059fc'
            'd31ae97e8bd0167b021f46088efbc52432e382e167a2999ff55bd3a16b2804ee306340846a3510e98a16bb304cd9f956ecdfa4fd2ffddc4b610729102a6cd8f4')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
